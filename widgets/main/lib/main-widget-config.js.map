{"version":3,"sources":["../src/main-widget-config.es6"],"names":[],"mappings":"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","file":"main-widget-config.js","sourcesContent":["//TMP function update to pattern\nif ( !Date.prototype.toShortISOString ) {\n  Date.prototype.toShortISOString = function() {\n    return this.getFullYear() +\n      \"-\" + (this.getMonth() + 1 < 10 ? \"0\"+ (this.getMonth()+ 1): this.getMonth() + 1) +\n      \"-\" + (this.getDate() < 10 ? \"0\"+ this.getDate(): this.getDate()) +\n      \"T\" + (this.getHours() < 10 ? \"0\"+this.getHours(): this.getHours()) +\n      \":\" + (this.getMinutes() < 10 ? \"0\"+this.getMinutes(): this.getMinutes()) +\n      \":\" + (this.getSeconds() < 10 ? \"0\"+this.getSeconds(): this.getSeconds()) +\n      \"Z\";\n  };\n}\n\n\nvar $widgetModal = $('#js_widget_modal'),\n    $widgetModalNoCode = $('#js_widget_modal_no_code');\n\n(function(){\n  //\n\n  var config = {\"ak\":\"KRUnjq8y8Sg5eDpP90dNzOK70d4WiUst\",\"kw\":\"Def\",\"t\":{\"n\":\"t1\",\"b\":false,\"h\":550,\"w\":350,\"br\":4}};\n\n  $(\".main-widget-config-form\").on(\"change\", function(event){\n    let widgetNode = document.querySelector(\"div[w-tm-api-key]\");\n\n    if(event.target.id === \"border\"){\n      if(event.target.checked){\n        widgetNode.setAttribute(event.target.id, \"\");\n      }\n      else{\n        widgetNode.removeAttribute(event.target.id);\n      }\n    }\n    else {\n      widgetNode.setAttribute(event.target.id, event.target.value);\n    }\n\n    widget.update();\n  });\n\n\n  var $widgetModal = $('#js_widget_modal'),\n      $widgetModalNoCode = $('#js_widget_modal_no_code');\n\n  $('#js_get_widget_code').on('click', function(){\n    var codeCont = document.querySelector(\".language-html.widget_dialog__code\");\n\n    var htmlCode = document.createElement(\"div\");\n    for(var key in widget.config){\n      htmlCode.setAttribute(\"w-\"+key,widget.config[key])\n    }\n    var tmp = document.createElement(\"div\");\n    tmp.appendChild(htmlCode);\n    codeCont.textContent = tmp.innerHTML;\n\n    $widgetModal.modal();\n  });\n\n  $('#js_widget_modal__close').on('click', function(){\n    $widgetModal.modal('hide');\n  });\n\n  $('#js_widget_modal_no_code__close').on('click', function(){\n    $widgetModalNoCode.modal('hide');\n  });\n\n\n  $(\"#period\").on(\"click\",function(event){\n\n    $(\"#period\").children().removeClass(\"active\");\n    $(event.target).addClass(\"active\");\n\n    var date = new Date(),\n        period = event.target.getAttribute(\"period\").toLowerCase(),\n        firstDay, lastDay;\n\n    if(period == \"year\" ){\n      firstDay = new Date(date.getFullYear(),0,1),\n      lastDay = new Date(date.getFullYear(),12,0);\n    }\n    else if(period == \"month\"){\n      firstDay = new Date(date.getFullYear(), date.getMonth(), 1);\n      lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n    }\n    else {\n      var first = date.getDate() - date.getDay();\n      var last = first + 6;\n      firstDay = new Date(date.setDate(first));\n      lastDay = new Date(date.setDate(last));\n    }\n\n    firstDay.setHours(0);   lastDay.setHours(23);\n    firstDay.setMinutes(0); lastDay.setMinutes(59);\n    firstDay.setSeconds(0); lastDay.setSeconds(59);\n\n    console.log([firstDay.toShortISOString(),lastDay.toShortISOString()]);\n  });\n\n  $(\"#w-size\").on(\"keydown\",function(event){\n    var kchar = String.fromCharCode(event.keyCode);\n    if(/[\\w\\d]/.test(kchar)){\n      if(/\\d/.test(kchar)){\n        var newVal = (this.value.substring(0, this.selectionStart)\n          + this.value.substring(this.selectionEnd)\n          + kchar)*1;\n        if(newVal > 100 || newVal < 1){\n          event.preventDefault();\n        }\n      }\n      else{\n        event.preventDefault();\n      }\n    }\n  });\n\n})();"]}