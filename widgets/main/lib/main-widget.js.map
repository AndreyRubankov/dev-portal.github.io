{"version":3,"sources":["../src/main-widget.es6"],"names":[],"mappings":"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","file":"main-widget.js","sourcesContent":["class TicketmasterWidget {\n\n  set config(attrs) { this.widgetConfig = this.loadConfig(attrs); }\n  get config() { return this.widgetConfig; }\n\n  set events(responce){ this.eventsList = this.parseEvents(responce);}\n  get events(){ return this.eventsList;}\n\n  get eventUrl(){ return \"http://www.ticketmaster.com/event/\"; }\n\n  get apiUrl(){ return \"https://app.ticketmaster.com/discovery/v2/events.json\"; }\n\n  //get themeUrl() { return \"http://localhost:4000/widgets/main/theme/\"; }\n  get themeUrl() { return \"http://ticketmaster-api-staging.github.io/widgets/main/theme/\"; }\n\n  get logoUrl() { return \"http://developer.ticketmaster.com/\"; }\n\n  get legalNoticeUrl() { return \"http://developer.ticketmaster.com/support/terms-of-use/\"; }\n\n  get questionUrl() { return \"http://developer.ticketmaster.com/support/\"; }\n\n  get updateExceptions() { return [\"width\",\"border\",\"borderradius\",\"colorscheme\",\"Layout\"]}\n\n  get sliderDelay(){ return 10000; }\n\n  get sliderRestartDelay(){ return 20000; }\n\n  get hideMessageDelay(){ return 8000; }\n\n  get controlHiddenClass(){ return \"events_control-hidden\"; }\n\n  isConfigAttrEmpty(attr) {\n    if( !this.config.hasOwnProperty(attr) || this.config[attr] === \"undefined\"){\n      return false; }\n    else if( this.config[attr] === \"\"){\n      return false;\n    }\n    return true;\n  }\n\n  get eventReqAttrs(){\n    let attrs = {};\n\n    if(this.isConfigAttrEmpty(\"tmapikey\"))\n      attrs.apikey = this.config.tmapikey;\n    if(this.isConfigAttrEmpty(\"keyword\"))\n      attrs.keyword = this.config.keyword;\n    if(this.isConfigAttrEmpty(\"size\"))\n      attrs.size = this.config.size;\n    //if(this.isConfigAttrEmpty(\"radius\"))\n    //  attrs.radius = this.config.radius;\n    if(this.isConfigAttrEmpty(\"postalcode\"))\n      attrs.postalCode = this.config.postalcode;\n    if(this.isConfigAttrEmpty(\"attractionid\"))\n      attrs.attractionid = this.config.attractionid;\n    if(this.isConfigAttrEmpty(\"promoterid\"))\n      attrs.promoterid = this.config.promoterid;\n    if(this.isConfigAttrEmpty(\"period\")){\n      let period = this.getDateFromPeriod(this.config.period);\n      attrs.startDateTime = period[0];\n      attrs.endDateTime = period[1];\n    }\n\n    return attrs;\n  }\n\n  //https://app.ticketmaster.com/discovery/v1/events/10004F84CD1C5395/images.json?apikey=KRUnjq8y8Sg5eDpP90dNzOK70d4WiUst\n\n  constructor(selector) {\n    this.widgetRoot = document.querySelector(\"div[w-tmapikey]\");\n\n    this.eventsRootContainer = document.createElement(\"div\");\n    this.eventsRootContainer.classList.add(\"events-root-container\");\n    this.widgetRoot.appendChild(this.eventsRootContainer);\n\n    this.eventsRoot = document.createElement(\"ul\");\n    this.eventsRoot.classList.add(\"events-root\");\n    this.eventsRootContainer.appendChild(this.eventsRoot);\n\n    // Set theme modificators\n    this.themeModificators = {\n      \"oldschool\" : this.oldSchoolModificator.bind(this),\n      \"newschool\" : this.newSchoolModificator.bind(this)\n    };\n\n    // dots container\n    //this.dotsContainer = document.createElement(\"div\");\n    //this.dotsContainer.classList.add(\"events_dots\");\n    //this.eventsRootContainer.appendChild(this.dotsContainer);\n\n    this.config = this.widgetRoot.attributes;\n\n    if(this.config.theme !== null && !document.getElementById(`widget-theme-${this.config.theme}`)){\n      this.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.theme + \".css\" );\n    }\n\n    this.eventsRootContainer.classList.remove(\"border\");\n    if(this.config.border){\n      this.eventsRootContainer.classList.add(\"border\");\n    }\n\n    this.widgetRoot.style.height = `${this.config.height}px`;\n    this.widgetRoot.style.width  = `${this.config.width}px`;\n\n    this.eventsRootContainer.style.height = `${this.config.height}px`;\n    this.eventsRootContainer.style.width  = `${this.config.width}px`;\n    this.eventsRootContainer.style.borderRadius =  `${this.config.borderradius}px`;\n\n    //this.clear();\n\n    this.AdditionalElements();\n\n    this.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\n\n    if( this.themeModificators.hasOwnProperty( this.widgetConfig.theme ) ) {\n      this.themeModificators[ this.widgetConfig.theme ]();\n    }\n\n    this.initMessage();\n\n    this.initSliderControls();\n\n    this.initEventCounter();\n  }\n\n  // Message\n  initMessage(){\n    this.messageDialog = document.createElement('div');\n    this.messageDialog.classList.add(\"event-message\");\n    this.messageContent = document.createElement('div');\n    this.messageContent.classList.add(\"event-message__content\");\n\n    let messageClose = document.createElement('div');\n    messageClose.classList.add(\"event-message__btn\");\n    messageClose.addEventListener(\"click\", ()=> {\n      this.hideMessage();\n    });\n\n    this.messageDialog.appendChild(this.messageContent);\n    this.messageDialog.appendChild(messageClose);\n    this.eventsRootContainer.appendChild(this.messageDialog);\n  }\n\n  showMessage(message, hideMessageWithoutDelay){\n    if(message.length){\n      this.hideMessageWithoutDelay = hideMessageWithoutDelay;\n      this.messageContent.innerHTML = message;\n      this.messageDialog.classList.add(\"event-message-visible\");\n      if (this.messageTimeout) {\n        clearTimeout(this.messageTimeout); // Clear timeout if before 'hideMessageWithDelay' was called\n      }\n    }\n  }\n\n  hideMessageWithDelay(delay){\n    if(this.messageTimeout) clearTimeout(this.messageTimeout); // Clear timeout if this method was called before\n    this.messageTimeout = setTimeout(()=>{\n      this.hideMessage();\n    }, delay);\n  }\n\n  hideMessage(){\n    if(this.messageTimeout) clearTimeout(this.messageTimeout); // Clear timeout and hide message immediately.\n    this.messageDialog.classList.remove(\"event-message-visible\");\n  }\n  // End message\n\n  AdditionalElements(){\n    var legalNoticeContent = document.createTextNode('Legal Notice'),\n        legalNotice = document.createElement(\"a\");\n    legalNotice.appendChild(legalNoticeContent);\n    legalNotice.classList.add(\"legal-notice\");\n    legalNotice.target = '_blank';\n    legalNotice.href = this.legalNoticeUrl;\n    this.widgetRoot.appendChild(legalNotice);\n\n    var logo = document.createElement('a');\n    logo.classList.add(\"event-logo\");\n    logo.target = '_blank';\n    logo.href = this.logoUrl;\n\n    var logoBox = document.createElement('div');\n    logoBox.classList.add(\"event-logo-box\");\n    logoBox.appendChild(logo);\n    this.eventsRootContainer.appendChild(logoBox);\n\n    let question = document.createElement('a');\n    question.classList.add(\"event-question\");\n    question.target = '_blank';\n    question.href = this.questionUrl;\n    this.eventsRootContainer.appendChild(question);\n  }\n\n  //adds general admission element for OLDSCHOOL theme\n  oldSchoolModificator(){\n    var generalAdmission = document.createElement(\"div\"),\n        generalAdmissionText = document.createTextNode('GENERAL ADMISSION');\n    generalAdmission.classList.add(\"general-admission\", \"modificator\");\n    generalAdmission.appendChild(generalAdmissionText);\n    this.eventsRootContainer.appendChild(generalAdmission);\n  }\n\n  newSchoolModificator(){\n    var ticketLogo = document.createElement(\"div\");\n    ticketLogo.classList.add(\"ticket-logo\", \"modificator\");\n\n    var headLogo = document.createElement(\"img\");\n    headLogo.setAttribute(\"src\", \"/assets/img/footer/ticketmaster-logo-white.svg\");\n    headLogo.setAttribute(\"height\", \"11\");\n    ticketLogo.appendChild(headLogo);\n\n    headLogo = document.createElement(\"img\");\n    headLogo.setAttribute(\"src\", \"/assets/img/footer/ticketmaster-logo-white.svg\");\n    headLogo.setAttribute(\"height\", \"11\");\n    ticketLogo.appendChild(headLogo);\n\n    headLogo = document.createElement(\"img\");\n    headLogo.setAttribute(\"src\", \"/assets/img/footer/ticketmaster-logo-white.svg\");\n    headLogo.setAttribute(\"height\", \"11\");\n    ticketLogo.appendChild(headLogo);\n\n    headLogo = document.createElement(\"img\");\n    headLogo.setAttribute(\"src\", \"/assets/img/footer/ticketmaster-logo-white.svg\");\n    headLogo.setAttribute(\"height\", \"11\");\n    ticketLogo.appendChild(headLogo);\n\n    this.eventsRootContainer.appendChild(ticketLogo);\n  }\n\n  hideSliderControls(){\n    this.prevEventX.classList.add(this.controlHiddenClass);\n    this.nextEventX.classList.add(this.controlHiddenClass);\n    this.prevEventY.classList.add(this.controlHiddenClass);\n    this.nextEventY.classList.add(this.controlHiddenClass);\n  }\n\n\n  toggleControlsVisibility(){\n    // Horizontal\n    if(this.slideCountX > 1){\n      this.prevEventX.classList.remove(this.controlHiddenClass);\n      this.nextEventX.classList.remove(this.controlHiddenClass);\n      if(this.currentSlideX === 0){\n        this.prevEventX.classList.add(this.controlHiddenClass);\n      }else if(this.currentSlideX === this.slideCountX - 1){\n        this.nextEventX.classList.add(this.controlHiddenClass);\n      }\n    }else{\n      this.prevEventX.classList.add(this.controlHiddenClass);\n      this.nextEventX.classList.add(this.controlHiddenClass);\n    }\n\n    // Vertical\n    if(this.eventsGroups.length){\n      if(this.eventsGroups[this.currentSlideX].length > 1){\n        this.prevEventY.classList.remove(this.controlHiddenClass);\n        this.nextEventY.classList.remove(this.controlHiddenClass);\n        if(this.currentSlideY === 0){\n          this.prevEventY.classList.add(this.controlHiddenClass);\n        }else if(this.currentSlideY === this.eventsGroups[this.currentSlideX].length - 1){\n          this.nextEventY.classList.add(this.controlHiddenClass);\n        }\n      }else{\n        this.prevEventY.classList.add(this.controlHiddenClass);\n        this.nextEventY.classList.add(this.controlHiddenClass);\n      }\n    }else{\n      this.prevEventY.classList.add(this.controlHiddenClass);\n      this.nextEventY.classList.add(this.controlHiddenClass);\n    }\n  }\n\n  prevSlideX(){\n    if(this.currentSlideX > 0){\n      this.setSlideManually(this.currentSlideX - 1, true);\n    }\n  }\n\n  nextSlideX(){\n    if(this.slideCountX - 1 > this.currentSlideX) {\n      this.setSlideManually(this.currentSlideX + 1, true);\n    }\n  }\n\n  prevSlideY(){\n    if(this.currentSlideY > 0){\n      this.setSlideManually(this.currentSlideY - 1, false);\n    }\n  }\n\n  nextSlideY(){\n    if(this.eventsGroups[this.currentSlideX].length - 1 > this.currentSlideY) {\n      this.setSlideManually(this.currentSlideY + 1, false);\n    }\n  }\n\n  setSlideManually(slideIndex, isDirectionX){\n    if(this.sliderTimeout) clearTimeout(this.sliderTimeout);\n    this.sliderTimeout = setTimeout(()=>{\n      this.runAutoSlideX();\n    }, this.sliderRestartDelay);\n    clearInterval(this.sliderInterval);\n    if(isDirectionX)\n      this.goToSlideX(slideIndex);\n    else\n      this.goToSlideY(slideIndex);\n  }\n\n  goToSlideX(slideIndex){\n    if(this.currentSlideX === slideIndex) return;\n    this.currentSlideY = 0;\n    this.currentSlideX = slideIndex;\n    this.eventsRoot.style.marginLeft = `-${this.currentSlideX * 100}%`;\n    this.toggleControlsVisibility();\n    this.setEventsCounter();\n    //let dots = this.dotsContainer.getElementsByClassName(\"events_dots__item\");\n    //for(let i = 0; dots.length > i; i++){\n    //  if(i === slideIndex){\n    //    dots[i].classList.add(\"events_dots__item-active\");\n    //  }else{\n    //    dots[i].classList.remove(\"events_dots__item-active\");\n    //  }\n    //}\n  }\n\n  goToSlideY(slideIndex){\n    if(this.currentSlideY === slideIndex) return;\n    this.currentSlideY = slideIndex;\n    let eventGroup = this.eventsRoot.getElementsByClassName(\"event-group-\" + this.currentSlideX);\n    if(eventGroup.length){\n      eventGroup = eventGroup[0];\n      eventGroup.style.marginTop = `-${this.currentSlideY * this.config.height}px`;\n      this.toggleControlsVisibility();\n    }\n  }\n\n  runAutoSlideX(){\n    if(this.slideCountX > 1) {\n      this.sliderInterval = setInterval(()=> {\n        var slideIndex = 0;\n        if (this.slideCountX - 1 > this.currentSlideX) slideIndex = this.currentSlideX + 1;\n        this.goToSlideX(slideIndex);\n      }, this.sliderDelay);\n    }\n  }\n\n  initSliderControls(){\n    this.currentSlideX = 0;\n    this.currentSlideY = 0;\n    this.slideCountX = 0;\n\n    // left btn\n    this.prevEventX = document.createElement(\"div\");\n    this.prevEventX.classList.add(\"events_control\", \"events_control-horizontal\", \"events_control-left\", this.controlHiddenClass);\n    this.eventsRootContainer.appendChild(this.prevEventX);\n\n    // right btn\n    this.nextEventX = document.createElement(\"div\");\n    this.nextEventX.classList.add(\"events_control\", \"events_control-horizontal\", \"events_control-right\", this.controlHiddenClass);\n    this.eventsRootContainer.appendChild(this.nextEventX);\n\n    // top btn\n    this.prevEventY = document.createElement(\"div\");\n    this.prevEventY.classList.add(\"events_control\", \"events_control-vertical\", \"events_control-top\", this.controlHiddenClass);\n    this.eventsRootContainer.appendChild(this.prevEventY);\n\n    // bottom btn\n    this.nextEventY = document.createElement(\"div\");\n    this.nextEventY.classList.add(\"events_control\", \"events_control-vertical\", \"events_control-bottom\", this.controlHiddenClass);\n    this.eventsRootContainer.appendChild(this.nextEventY);\n\n    // Restore events group position\n    function whichTransitionEvent(){\n      let el = document.createElement('fakeelement'),\n        transitions = {\n          'transition':'transitionend',\n          'OTransition':'oTransitionEnd',\n          'MozTransition':'transitionend',\n          'WebkitTransition':'webkitTransitionEnd'\n        };\n\n      for(let event in transitions){\n        if( el.style[event] !== undefined ) return transitions[event];\n      }\n    }\n\n    var transitionEvent = whichTransitionEvent();\n    transitionEvent && this.eventsRoot.addEventListener(transitionEvent, (e)=> {\n      if (this.eventsRoot !== e.target) return;\n      let eventGroup = this.eventsRoot.getElementsByClassName(\"event-group\");\n      // Reset all groups. We don't know what event group was visible before.\n      for(let i = 0; eventGroup.length > i; i++){\n        eventGroup[i].style.marginTop = 0;\n      }\n    });\n\n    // Arrows\n    this.prevEventX.addEventListener(\"click\", ()=> {\n      this.prevSlideX();\n    });\n\n    this.nextEventX.addEventListener(\"click\", ()=> {\n      this.nextSlideX();\n    });\n\n    this.prevEventY.addEventListener(\"click\", ()=> {\n      this.prevSlideY();\n    });\n\n    this.nextEventY.addEventListener(\"click\", ()=> {\n      this.nextSlideY();\n    });\n\n    // Tough device swipes\n    let xDown = null,\n        yDown = null;\n\n    function handleTouchStart(evt) {\n      xDown = evt.touches[0].clientX;\n      yDown = evt.touches[0].clientY;\n    }\n\n    function handleTouchMove(evt) {\n      if ( ! xDown || ! yDown ) return;\n\n      let xUp = evt.touches[0].clientX,\n          yUp = evt.touches[0].clientY,\n          xDiff = xDown - xUp,\n          yDiff = yDown - yUp;\n\n      if ( Math.abs( xDiff ) > Math.abs( yDiff ) ) {\n        if ( xDiff > 0 )\n          this.nextSlideX(); // left swipe\n        else\n          this.prevSlideX(); // right swipe\n      } else {\n        if ( yDiff > 0 )\n          this.nextSlideY(); // up swipe\n        else\n          this.prevSlideY(); // down swipe\n      }\n\n      xDown = null;\n      yDown = null;\n    }\n\n    this.eventsRootContainer.addEventListener('touchstart', (e)=> {\n      handleTouchStart.call(this, e);\n    }, false);\n    this.eventsRootContainer.addEventListener('touchmove', (e)=> {\n      handleTouchMove.call(this, e);\n    }, false);\n  }\n\n  //initDot(i){\n  //  var dot = document.createElement(\"span\");\n  //  dot.classList.add(\"events_dots__item\", \"events_dots__item-\" + i);\n  //  if(i === 0) dot.classList.add(\"events_dots__item-active\");\n  //  this.dotsContainer.appendChild(dot);\n  //  dot.addEventListener(\"click\", ()=> {\n  //    this.setSlideManually(i, true);\n  //  });\n  //}\n\n  initSlider(){\n    if(this.sliderInterval) clearInterval(this.sliderInterval);\n    if(this.sliderTimeout) clearTimeout(this.sliderTimeout);\n    this.slideCountX = this.eventsGroups.length;\n    this.eventsRoot.style.marginLeft = '0%';\n    this.eventsRoot.style.width = `${this.slideCountX * 100}%`;\n    this.currentSlideX = 0;\n    this.currentSlideY = 0;\n    this.runAutoSlideX();\n    this.toggleControlsVisibility();\n\n    //if(this.slideCountX > 1)\n    //  for(var i = 0; this.slideCountX > i; i++){\n    //    this.initDot(i);\n    //  }\n  }\n\n  formatDate(date) {\n    var result = '';\n    if(!date.day) return result; // Day is required\n\n    function LZ(x) {\n      return (x < 0 || x > 9 ? \"\" : \"0\") + x\n    }\n    var MONTH_NAMES = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],\n        DAY_NAMES = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],\n        dayArray = date.day.split('-'),\n        d = parseInt(dayArray[2]),\n        M = parseInt(dayArray[1]);\n\n    var E = new Date(date.day).getDay();\n    result = DAY_NAMES[E] + ', ' + MONTH_NAMES[M - 1] + ' ' + d + ', ' + dayArray[0];\n\n    if(!date.time) return result;\n\n    var timeArray = date.time.split(':'),\n      H = parseInt(timeArray[0]),\n      m = timeArray[1],\n      a = \"AM\";\n\n    if (H > 11) a = \"PM\";\n    if (H == 0) {\n      H = 12;\n    } else if (H > 12) {\n      H = H - 12;\n    }\n\n    return result + ' ' + LZ(H) + ':' + m + ' ' + a;\n  }\n\n  clearEvents(){\n    this.eventsRoot.innerHTML = \"\";\n  }\n\n  clear(){\n    var modificatorList = this.widgetRoot.getElementsByClassName('modificator');\n    while (modificatorList.length) {\n      let el = modificatorList[0],\n          parent = el.parentNode;\n      parent.removeChild(el);\n    }\n    this.clearEvents();\n  }\n\n  update() {\n\n    let oldTheme = this.config.constructor();\n    for (let attr in this.config) {\n      if (this.config.hasOwnProperty(attr)) oldTheme[attr] = this.config[attr];\n    }\n\n    this.config = this.widgetRoot.attributes;\n\n    /*if(this.config.theme !== null){\n      this.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.theme + \".css\" );\n    }*/\n\n    this.widgetRoot.style.height = `${this.config.height}px`;\n    this.widgetRoot.style.width  = `${this.config.width}px`;\n    this.eventsRootContainer.style.height = `${this.config.height}px`;\n    this.eventsRootContainer.style.width  = `${this.config.width}px`;\n    this.eventsRootContainer.style.borderRadius =  `${this.config.borderradius}px`;\n\n    this.eventsRootContainer.classList.remove(\"border\");\n    if( this.config.hasOwnProperty(\"border\") ){\n      this.eventsRootContainer.classList.add(\"border\");\n    }\n\n    if(this.needToUpdate(this.config, oldTheme, this.updateExceptions)){\n      this.clear();\n\n      if( this.themeModificators.hasOwnProperty( this.widgetConfig.theme ) ) {\n        this.themeModificators[ this.widgetConfig.theme ]();\n      }\n\n      this.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\n    }\n    else{\n      var events = document.getElementsByClassName(\"event-wrapper\");\n      for(let event in events){\n        if(events.hasOwnProperty(event) && events[event].style !== undefined){\n          events[event].style.width = `${this.config.width}px`;\n          events[event].style.height = `${this.config.height}px`;\n        }\n      }\n    }\n  }\n\n  needToUpdate(newTheme, oldTheme, forCheck = []){\n    return Object.keys(newTheme).map(function(key){\n      if(forCheck.indexOf(key) > -1) return true;\n      //console.warn([key, newTheme[key], oldTheme[key], newTheme[key] === oldTheme[key]])\n      return newTheme[key] === oldTheme[key] ;\n    }).indexOf(false) > -1\n  }\n\n  loadConfig(NamedNodeMap){\n      var config = {};\n      Object.keys(NamedNodeMap).map(function(value){\n        if( typeof(NamedNodeMap[value].name) !== \"undefined\" && NamedNodeMap[value].name.indexOf(\"w-\") !== -1){\n          config[ NamedNodeMap[value].name.replace(/w-/g, \"\").replace(/-/g, \"\") ] = NamedNodeMap[value].value;\n        }\n      });\n      return config;\n  }\n\n  styleLoadingHandler(){\n    if (this && this.readyState == XMLHttpRequest.DONE ) {\n      if(this.status == 200){\n        var style = document.createElement(\"style\");\n        style.setAttribute(\"type\",\"text/css\");\n        style.setAttribute(\"id\",`widget-theme-${this.widget.config.theme}`);\n        style.textContent = this.responseText;\n        document.getElementsByTagName(\"head\")[0].appendChild(style);\n      }\n      else {\n        //alert(\"theme wasn't loaded\");\n        console.log(\"theme wasn't loaded\");\n      }\n    }\n  }\n\n  groupEventsByName(){\n    let groups = {};\n    this.events.map(function(event){\n      if (groups[event.name] === undefined) groups[event.name] = [];\n      groups[event.name].push(event);\n    });\n\n    this.eventsGroups = [];\n    for (let groupName in groups) {\n      this.eventsGroups.push(groups[groupName]);\n    }\n  }\n\n  initEventCounter(){\n    this.eventsCounter = document.createElement(\"div\");\n    this.eventsCounter.classList.add(\"events-counter\");\n    this.widgetRoot.appendChild(this.eventsCounter);\n  }\n\n  setEventsCounter(){\n    if(this.eventsCounter){\n      let text = '';\n      if(this.eventsGroups.length){\n        if(this.eventsGroups.length > 1){\n          text = (this.currentSlideX + 1) + \" of \" + this.eventsGroups.length +  \" events\";\n        } else {\n          text = '1 event';\n        }\n      }\n      this.eventsCounter.innerHTML = text;\n    }\n  }\n\n  resetReduceParamsOrder(){\n    this.reduceParamsOrder = 0;\n  }\n\n  reduceParamsAndReloadEvents(){\n    let eventReqAttrs = {},\n      reduceParamsList = [\n          ['postalCode'],\n          ['attractionid'],\n          ['promoterid'],\n          ['startDateTime', 'endDateTime'],\n          ['keyword'],\n          ['size']\n      ];\n\n    // make copy of params\n    for(let key in this.eventReqAttrs){\n      eventReqAttrs[key] = this.eventReqAttrs[key]\n    }\n\n    if(!this.reduceParamsOrder) this.reduceParamsOrder = 0;\n    if(reduceParamsList.length > this.reduceParamsOrder){\n      for(let item in reduceParamsList){\n        if(this.reduceParamsOrder >= item){\n          for(let i in reduceParamsList[item]){\n            delete eventReqAttrs[reduceParamsList[item][i]];\n          }\n        }\n      }\n\n      if(this.reduceParamsOrder === 0) this.showMessage(\"No results were found.<br/>Here other options for you.\");\n      this.reduceParamsOrder++;\n      this.makeRequest( this.eventsLoadingHandler, this.apiUrl, eventReqAttrs );\n    }else{\n      // We haven't any results\n      this.showMessage(\"No results were found.\", true);\n      this.reduceParamsOrder = 0;\n      this.hideSliderControls();\n    }\n  }\n\n  eventsLoadingHandler(){\n    let widget = this.widget;\n    widget.clearEvents(); // Additional clearing after each loading\n    if (this && this.readyState == XMLHttpRequest.DONE ) {\n      if(this.status == 200){\n        widget.events = JSON.parse(this.responseText);\n\n        if(widget.events.length){\n          widget.groupEventsByName.call(widget);\n\n          widget.eventsGroups.map(function(group, i){\n            if(group.length === 1)\n              widget.publishEvent(group[0]);\n            else\n              widget.publishEventsGroup.call(widget, group, i);\n          });\n\n          widget.initSlider();\n          widget.setEventsCounter();\n          widget.resetReduceParamsOrder();\n          if(widget.hideMessageWithoutDelay)\n            widget.hideMessage();\n          else\n            widget.hideMessageWithDelay(widget.hideMessageDelay);\n\n        }else{\n          widget.reduceParamsAndReloadEvents.call(widget);\n        }\n      }\n      else if(this.status == 400) {\n        widget.reduceParamsAndReloadEvents.call(widget);\n        console.log('There was an error 400');\n      }\n      else {\n        widget.reduceParamsAndReloadEvents.call(widget);\n        console.log('something else other than 200 was returned');\n      }\n    }\n  }\n\n\n  publishEventsGroup(group, index){\n    let groupNodeWrapper = document.createElement(\"li\");\n    groupNodeWrapper.classList.add(\"event-wrapper\", \"event-group-wrapper\");\n    groupNodeWrapper.style.width  = `${this.config.width}px`;\n    groupNodeWrapper.style.height = `${this.config.height}px`;\n\n    let groupNode = document.createElement(\"ul\");\n    groupNode.classList.add(\"event-group\", \"event-group-\" + index);\n    groupNode.style.height  = `${this.config.height * group.length}px`;\n\n    group.map((event)=> {\n      this.publishEvent(event, groupNode)\n    });\n\n    groupNodeWrapper.appendChild(groupNode);\n    this.eventsRoot.appendChild(groupNodeWrapper);\n  }\n\n  publishEvent(event, parentNode){\n    parentNode = parentNode || this.eventsRoot;\n    let DOMElement = this.createDOMItem(event);\n    parentNode.appendChild(DOMElement);\n  }\n\n  getEventByID(id){\n    for(let index in this.events){\n      if(this.events.hasOwnProperty(index) && this.events[index].id === id){\n        return this.events[index]\n      }\n    }\n  }\n\n  getImageForEvent(images){\n    var width = this.config.width,\n      height = this.config.height;\n\n    images.sort(function(a,b) {\n      if (a.width < b.width)\n        return -1;\n      else if (a.width > b.width)\n        return 1;\n      else\n        return 0;\n    });\n\n    var myImg = \"\";\n    images.forEach(function(element){\n      if(element.width >= width && element.height >= height && !myImg){\n        myImg = element.url;\n      }\n    });\n    return myImg;\n  }\n\n  parseEvents(eventsSet){\n    if(!eventsSet._embedded){\n      if(typeof($widgetModalNoCode) !== \"undefined\"){\n        $widgetModalNoCode.modal();\n      }\n      return [];\n    }\n    eventsSet = eventsSet._embedded.events;\n    var tmpEventSet = [];\n    for(var key in eventsSet){\n      if(eventsSet.hasOwnProperty(key)){\n        let currentEvent = {};\n\n        currentEvent.id = eventsSet[key].id;\n        currentEvent.url = eventsSet[key].url;\n        currentEvent.name = eventsSet[key].name;\n\n        currentEvent.date = {\n          day: eventsSet[key].dates.start.localDate,\n          time: eventsSet[key].dates.start.localTime\n        };\n\n        if(eventsSet[key]._embedded.venues[0].address){\n          currentEvent.address = eventsSet[key]._embedded.venues[0].address;\n        }\n\n        // Remove this comment to get categories\n        /*if(eventsSet[key]._embedded.hasOwnProperty('categories')){\n          currentEvent.categories = [];\n          let eventCategories = eventsSet[key]._embedded.categories;\n          currentEvent.categories = Object.keys(eventCategories).map(function(category){\n            return eventCategories[category].name\n          });\n        }*/\n\n        currentEvent.img = this.getImageForEvent(eventsSet[key].images);\n\n        tmpEventSet.push(currentEvent);\n\n      }\n    }\n    return tmpEventSet;\n  }\n\n\n  makeRequest(handler, url=this.apiUrl, attrs={}, method=\"GET\"){\n    attrs = Object.keys(attrs).map(function(key){\n      return `${key}=${attrs[key]}`;\n    }).join(\"&\");\n\n    url = [url,attrs].join(\"?\");\n\n    this.xmlHTTP = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\n    if(method == \"POST\") {\n      this.xmlHTTP.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n    }\n    this.xmlHTTP.widget = this;\n    this.xmlHTTP.onreadystatechange = handler;\n    this.xmlHTTP.open(method, url, true);\n    this.xmlHTTP.send();\n  }\n\n  createDOMItem(itemConfig){\n\n    var medWrapper = document.createElement(\"a\");\n    medWrapper.classList.add(\"event-content-wraper\");\n    medWrapper.target = '_blank';\n    medWrapper.href = itemConfig.url;\n\n    var event = document.createElement(\"li\");\n    event.classList.add(\"event-wrapper\");\n    //event.style.backgroundImage = `url('${itemConfig.img}')`;\n    event.style.height = `${this.config.height}px`;\n    event.style.width  = `${this.config.width}px`;\n\n    var image = document.createElement(\"span\");\n    image.classList.add(\"bg-cover\");\n    image.style.backgroundImage = `url('${itemConfig.img}')`;\n    event.appendChild(image);\n\n    var nameContent = document.createTextNode(itemConfig.name),\n    name =  document.createElement(\"span\");\n    name.classList.add(\"event-name\");\n    name.appendChild(nameContent);\n    medWrapper.appendChild(name);\n\n\n\n    var dateTimeContent = document.createTextNode(this.formatDate(itemConfig.date)),\n    dateTime = document.createElement(\"span\");\n    dateTime.classList.add(\"event-date\");\n    dateTime.appendChild(dateTimeContent);\n\n    var dateWraper = document.createElement(\"span\");\n    dateWraper.classList.add(\"event-date-wraper\");\n    dateWraper.appendChild(dateTime);\n    medWrapper.appendChild(dateWraper);\n\n    if(itemConfig.hasOwnProperty(\"address\")){\n      var addressWrapper = document.createElement(\"span\");\n      addressWrapper.classList.add(\"address-wrapper\");\n\n      if( itemConfig.address.hasOwnProperty(\"line1\") ){\n        var addressOneText = document.createTextNode(itemConfig.address.line1),\n        addressOne =  document.createElement(\"span\");\n        addressOne.classList.add(\"event-address\");\n        addressOne.appendChild(addressOneText);\n        addressWrapper.appendChild(addressOne);\n      }\n\n      if( itemConfig.address.hasOwnProperty(\"line2\") ){\n        var addressTwoText = document.createTextNode(itemConfig.address.line2),\n        addressTwo =  document.createElement(\"span\");\n        addressTwo.classList.add(\"event-address\");\n        addressTwo.appendChild(addressTwoText);\n        addressWrapper.appendChild(addressTwo);\n      }\n\n      medWrapper.appendChild(addressWrapper);\n    }\n\n    if(itemConfig.hasOwnProperty(\"categories\")) {\n      var categoriesWrapper = document.createElement(\"span\");\n      categoriesWrapper.classList.add(\"category-wrapper\");\n\n      itemConfig.categories.forEach(function (element) {\n        var categoryText = document.createTextNode(element),\n          category = document.createElement(\"span\");\n        category.classList.add(\"event-category\");\n        category.appendChild(categoryText);\n        categoriesWrapper.appendChild(category);\n      });\n      medWrapper.appendChild(categoriesWrapper);\n    }\n\n    event.appendChild(medWrapper);\n    return event;\n  }\n\n\n  makeImageUrl(id){\n    return `https://app.ticketmaster.com/discovery/v2/events/${id}/images.json`;\n  }\n\n\n  /*\n   * Config block\n   */\n\n  decConfig(config){\n    return JSON.parse(window.atob(config));\n  }\n\n  encConfig(config){\n    return window.btoa(config);\n  }\n\n  toShortISOString(dateObj){\n    return dateObj.getFullYear() +\n      \"-\" + (dateObj.getMonth() + 1 < 10 ? \"0\"+ (dateObj.getMonth()+ 1): dateObj.getMonth() + 1) +\n      \"-\" + (dateObj.getDate() < 10 ? \"0\"+ dateObj.getDate(): dateObj.getDate()) +\n      \"T\" + (dateObj.getHours() < 10 ? \"0\"+dateObj.getHours(): dateObj.getHours()) +\n      \":\" + (dateObj.getMinutes() < 10 ? \"0\"+dateObj.getMinutes(): dateObj.getMinutes()) +\n      \":\" + (dateObj.getSeconds() < 10 ? \"0\"+dateObj.getSeconds(): dateObj.getSeconds()) +\n      \"Z\";\n  }\n\n  getDateFromPeriod(period){\n\n    var date = new Date(),\n      period = period.toLowerCase(),\n      firstDay, lastDay;\n\n    if(period == \"year\" ){\n      firstDay = new Date(date.getFullYear(),0,1),\n        lastDay = new Date(date.getFullYear(),12,0);\n    }\n    else if(period == \"month\"){\n      firstDay = new Date(date.getFullYear(), date.getMonth(), 1);\n      lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n    }\n    else if(period == \"week\"){\n      var first = date.getDate() - date.getDay();\n      var last = first + 6;\n      firstDay = new Date(date.setDate(first));\n      lastDay = new Date(date.setDate(last));\n    } else {\n      firstDay = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n      lastDay = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n    }\n\n    firstDay.setHours(0);   lastDay.setHours(23);\n    firstDay.setMinutes(0); lastDay.setMinutes(59);\n    firstDay.setSeconds(0); lastDay.setSeconds(59);\n\n    return [this.toShortISOString(firstDay), this.toShortISOString(lastDay)];\n  }\n\n}\n\nconst widget = new TicketmasterWidget(\"#ticketmaster-config\");\n"]}