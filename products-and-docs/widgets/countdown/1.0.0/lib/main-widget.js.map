{"version":3,"sources":["../src/main-widget.es6"],"names":[],"mappings":"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","file":"main-widget.js","sourcesContent":["class CountdownClock {\n  set endTime(endTime) { this.config.endTime = endTime; }\n  get endTime(){ return this.config.endTime || new Date();}\n\n  set interval(interval) { return this.config.interval = interval; }\n  get interval(){ return this.config.interval || 1000;}\n\n  set onChange(fn) { return this.config.onChange = fn; }\n  get onChange(){ return this.config.onChange || ((time) => {})}\n\n  constructor(config = {}) {\n    this.config = config;\n    this.updateClock();\n    if(this.config.endTime) this.initInterval();\n  }\n\n  initInterval(){\n    this.timeinterval = setInterval(this.updateClock.bind(this), this.interval);\n  }\n\n  update(endTime){\n    clearInterval(this.timeinterval);\n    this.endTime = endTime;\n    this.updateClock();\n    if(endTime) this.initInterval();\n  }\n\n  updateClock() {\n    let timeRemaining = this.getTimeRemaining();\n    this.onChange(timeRemaining);\n    if (timeRemaining.total <= 0) clearInterval(this.timeinterval);\n  }\n\n  /*\n  //Covert datetime by GMT offset\n  //If toUTC is true then return UTC time other wise return local time\n  convertLocalDateToUTCDate(date, toUTC) {\n    date = new Date(date);\n    //Local time converted to UTC\n    var localOffset = date.getTimezoneOffset() * 60000;\n    var localTime = date.getTime();\n    (toUTC)\n      ? date = localTime + localOffset\n      : date = localTime - localOffset;\n    date = new Date(date);\n    return date;\n  }\n  */\n\n  getTimeRemaining() {\n    let total = Date.parse(this.endTime) - Date.parse(new Date());\n    if(total <= 0) total = 0;\n    let seconds = Math.floor((total / 1000) % 60),\n      minutes = Math.floor((total / 1000 / 60) % 60),\n      hours = Math.floor((total / 3600000 /* (1000 * 60 * 60) */) % 24),\n      days = Math.floor(total / 86400000 /* (1000 * 60 * 60 * 24) */),\n      monthLeft = 0;\n      //years = 0;\n\n    let daysInMonth = function(year,month){\n      var D=new Date(year, month-1, 1, 12);\n      return parseInt((-Date.parse(D)+D.setMonth(D.getMonth()+1)+36e5)/864e5);\n    };\n\n    let today = new Date(),\n        curr_day = today.getUTCDate(),\n        curr_month = today.getUTCMonth(),\n        curr_year = today.getUTCFullYear(),\n        curr_days_in_month = daysInMonth(curr_year, curr_month);\n\n    if(days > curr_days_in_month){\n      let servYear = new Date(this.endTime).getUTCFullYear(),\n          servMonth = new Date(this.endTime).getUTCMonth(),\n          servDay = new Date(this.endTime).getUTCDate(),\n          serv_days_in_month = daysInMonth(servYear, servMonth);\n\n      monthLeft = Math.floor( days/daysInMonth(servYear,servMonth) );\n\n      days = Math.abs(servDay - curr_day);\n      \n      /*if(monthLeft > 99){\n        years = servYear - curr_year;\n        monthLeft = monthLeft-1 - years*12;\n        //console.log( 'monthLeft ',monthLeft );\n      }*/\n    }\n\n    return {\n      total,\n      //years,\n      monthLeft,\n      days,\n      hours,\n      minutes,\n      seconds\n    };\n  }\n}\n\nclass TicketmasterCountdownWidget {\n\n  set config(attrs) { this.widgetConfig = this.loadConfig(attrs); }\n  get config() { return this.widgetConfig; }\n\n  set event(responce){ this.eventResponce = this.parseEvent(responce);}\n  get event(){ return this.eventResponce;}\n\n  get borderSize(){ return this.config.border || 0;}\n\n  get eventUrl(){ return \"http://www.ticketmaster.com/event/\"; }\n\n  set eventId(id){ this.config.id = id;}\n  get eventId(){ return this.config.id;}\n\n  get apiUrl(){ return this.config.id ? `https://app.ticketmaster.com/discovery/v2/events/${this.config.id}.json` : `https://app.ticketmaster.com/discovery/v2/events/${this.eventId}.json`; }\n\n  get themeUrl() {\n    return (window.location.host === 'developer.ticketmaster.com')\n      ? `https://developer.ticketmaster.com/products-and-docs/widgets/countdown/1.0.0/theme/`\n      : `https://ticketmaster-api-staging.github.io/products-and-docs/widgets/countdown/1.0.0/theme/`;\n  }\n\n  get portalUrl(){\n    return (window.location.host === 'developer.ticketmaster.com')\n      ? `https://developer.ticketmaster.com/`\n      : `https://ticketmaster-api-staging.github.io/`;\n  }\n\n  get logoUrl() { return \"https://www.ticketmaster.com/\"; }\n\n  get legalNoticeUrl() { return \"http://developer.ticketmaster.com/support/terms-of-use/\"; }\n\n  get questionUrl() { return \"http://developer.ticketmaster.com/support/faq/\"; }\n\n  get updateExceptions() { return [\"width\", \"height\", \"border\", \"borderradius\", \"layout\", \"propotion\", \"seconds\"]}\n\n  get hideMessageDelay(){ return 5000; }\n\n  get tmWidgetWhiteList(){ return [\"2200504BAD4C848F\", \"00005044BDC83AE6\", \"1B005068DB60687F\", \"1B004F4DBEE45E47\", \"3A004F4ED7829D5E\", \"3A004F4ED1FC9B63\", \"1B004F4FF83289C5\", \"1B004F4FC0276888\", \"0E004F4F3B7DC543\", \"1D004F4F09C61861\", \"1600505AC9A972A1\", \"22004F4FD82795C6\", \"01005057AFF54574\", \"01005056FAD8793A\", \"3A004F4FB2453240\", \"22004F50D2149AC6\", \"01005059AD49507A\", \"01005062B4236D5D\"]; }\n\n  //get eventIdDefault(){ return '1Ad0ZfdGkMoCQHJ';}\n\n  isConfigAttrExistAndNotEmpty(attr) {\n    if( !this.config.hasOwnProperty(attr) || this.config[attr] === \"undefined\"){\n      return false;\n    }else if( this.config[attr] === \"\"){\n      return false;\n    }\n    return true;\n  }\n  \n  get eventReqAttrs(){\n    let attrs = {},\n    params = [\n      {\n        attr: 'tmapikey',\n        verboseName: 'apikey'\n      }\n    ];\n\n    for(let i in params){\n      let item = params[i];\n      if(this.isConfigAttrExistAndNotEmpty(item.attr))\n        attrs[item.verboseName] = this.config[item.attr];\n    }\n\n    return attrs;\n  }\n\n  constructor(root) {\n    this.widgetRoot = root;\n\n    this.eventsRootContainer = document.createElement(\"div\");\n    this.eventsRootContainer.classList.add(\"events-root-container\");\n    this.widgetRoot.appendChild(this.eventsRootContainer);\n\n    this.eventsRoot = document.createElement(\"ul\");\n    this.eventsRoot.classList.add(\"events-root\");\n    this.eventsRootContainer.appendChild(this.eventsRoot);\n\n    // Set theme modificators\n    /*this.themeModificators = {\n      \"oldschool\" : this.oldSchoolModificator.bind(this)\n    };*/\n\n    this.config = this.widgetRoot.attributes;\n    this.eventId = this.config.id;\n\n    if(this.config.theme !== null && !document.getElementById(`widget-theme-${this.config.theme}`)){\n      this.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.theme + \".css\" );\n    }\n\n    this.widgetRoot.style.height = `${this.config.height}px`;\n    this.widgetRoot.style.width  = `${this.config.width}px`;\n\n    this.eventsRootContainer.style.height = `${this.config.height}px`;\n    this.eventsRootContainer.style.width  = `${this.config.width}px`;\n    this.eventsRootContainer.style.borderRadius = `${this.config.borderradius}px`;\n    this.eventsRootContainer.style.borderWidth = `${this.borderSize}px`;\n\n    this.initBuyBtn();\n\n    this.AdditionalElements();\n\n    this.initMessage();\n\n    this.buildCountdown();\n\n    if(this.apiUrl){\n      this.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\n    }else{\n      this.showMessage(\"Please enter event ID.\", true, null );\n    }\n\n    /*if( this.themeModificators.hasOwnProperty( this.widgetConfig.theme ) ) {\n      this.themeModificators[ this.widgetConfig.theme ]();\n    }*/\n\n    this.embedUniversePlugin();\n    this.embedTMPlugin();\n\n    this.countDownWrapper.classList.add(\"events-count-down\");\n\n    this.countdownClock = new CountdownClock({\n      onChange: this.onCountdownChange.bind(this)\n    });\n\n    this.toggleSecondsVisibility();\n  }\n\n  getNormalizedDateValue(val){\n    return (val < 0 || val > 9 ? \"\" : \"0\") + val\n  }\n\n  toggleSecondsVisibility(){\n    if(this.countDownMonth.innerHTML > 0){\n      this.countDownWrapper.classList.add(\"hide-seconds\");\n      this.countDownWrapper.classList.remove(\"hide-days\");\n      this.countDownWrapper.classList.remove(\"hide-month\");//Removing a class that does not exist, does NOT throw an error\n    }else if(this.countDownDays.innerHTML <= 0){\n      this.countDownWrapper.classList.add(\"hide-month\");\n      this.countDownWrapper.classList.add(\"hide-days\");\n      this.countDownWrapper.classList.remove(\"hide-seconds\");\n    }else {\n      this.countDownWrapper.classList.add(\"hide-month\");\n      this.countDownWrapper.classList.remove(\"hide-days\");\n      this.countDownWrapper.classList.remove(\"hide-seconds\");\n    }\n  }\n\n  onCountdownChange(data){\n    let timeLeft = this.getNormalizedDateValue(data.total);\n\n    /*toggle CountDown-Box Visibility*/\n    if(timeLeft <= 0){\n      this.countDownWrapper.classList.add(\"hide-countDownBox\");\n      if(this.eventId && this.event){\n        this.showMessage(`This event has taken place`, false , \"event-message-started\");\n        return false; //exit if event has taken place\n      }\n    }else this.countDownWrapper.classList.remove(\"hide-countDownBox\");\n\n    if(data.monthLeft > 99){\n      this.showMessage(`This event starts in more than ${data.monthLeft} month, ${data.days} days, ${data.hours} hours`, false , \"event-message-started\");\n      this.countDownWrapper.classList.add(\"hide-countDownBox\");\n      return false;\n    }\n\n    this.countDownMonth.innerHTML = this.getNormalizedDateValue(data.monthLeft);\n    this.countDownDays.innerHTML = this.getNormalizedDateValue(data.days);\n    this.countDownHours.innerHTML = this.getNormalizedDateValue(data.hours);\n    this.countDownMinute.innerHTML = this.getNormalizedDateValue(data.minutes);\n    this.countDownSecond.innerHTML = this.getNormalizedDateValue(data.seconds);\n\n    this.toggleSecondsVisibility();\n\n    //console.log('event is null?', this.apiUrl , '\\n this.eventId', this.eventId);\n  }\n\n  buildCountdown(){\n    this.countDownWrapper = document.createElement(\"div\");\n    this.countDownWrapper.classList.add(\"events-count-down\");\n    this.countDownMonth = document.createElement(\"span\");\n    this.countDownDays = document.createElement(\"span\");\n    this.countDownHours = document.createElement(\"span\");\n    this.countDownMinute = document.createElement(\"span\");\n    this.countDownSecond = document.createElement(\"span\");\n\n    this.countDownMonth.innerHTML = '00';\n    this.countDownDays.innerHTML = '00';\n    this.countDownHours.innerHTML = '00';\n    this.countDownMinute.innerHTML = '00';\n    this.countDownSecond.innerHTML = '00';\n\n    this.countDownMonth.classList.add(\"events-count-down__month\");\n    this.countDownDays.classList.add(\"events-count-down__day\");\n    this.countDownHours.classList.add(\"events-count-down__hour\");\n    this.countDownMinute.classList.add(\"events-count-down__minute\");\n    this.countDownSecond.classList.add(\"events-count-down__second\");\n\n    this.countDownWrapper.appendChild(this.countDownMonth);\n    this.countDownWrapper.appendChild(this.countDownDays);\n    this.countDownWrapper.appendChild(this.countDownHours);\n    this.countDownWrapper.appendChild(this.countDownMinute);\n    this.countDownWrapper.appendChild(this.countDownSecond);\n\n    this.eventsRootContainer.appendChild(this.countDownWrapper);\n  }\n\n  initBuyBtn(){\n    this.buyBtn = document.createElement(\"a\");\n    this.buyBtn.appendChild(document.createTextNode('BUY NOW'));\n    this.buyBtn.classList.add(\"event-buy-btn\");\n    this.buyBtn.target = '_blank';\n    this.buyBtn.href = '';\n    this.buyBtn.setAttribute('onclick', \"ga('send', 'event', 'CountdownClickBuyButton', 'click');\");\n    this.buyBtn.addEventListener('click', (e) => {\n      e.preventDefault();\n    });\n    this.eventsRootContainer.appendChild(this.buyBtn);\n  }\n\n  updateTransition(url) {\n    var el = this.eventsRootContainer.querySelector(\".event-logo.centered-logo\");\n    if(url !=='') {\n      if(el){\n        el.classList.add(\"right-logo\");\n        el.classList.remove(\"centered-logo\");\n      }else return;\n    }\n    else{\n      el = this.eventsRootContainer.querySelector(\".event-logo.right-logo\");\n      if(el){\n        el.classList.remove(\"right-logo\");\n        el.classList.add(\"centered-logo\");\n      }\n    }\n  }\n\n  setBuyBtnUrl(){\n    if(this.buyBtn){\n      let event = this.event,\n          url = '';\n      if(event){\n        if(event.url){\n          if((this.isUniversePluginInitialized && this.isUniverseUrl(event.url)) || (this.isTMPluginInitialized && this.isAllowedTMEvent(event.url))){\n            url = event.url;\n          }\n          this.updateTransition(url);\n        }\n      }\n      this.buyBtn.href = url;\n    }\n  }\n\n  isUniverseUrl(url){\n    return (url.match(/universe.com/g) || url.match(/uniiverse.com/g));\n  }\n\n  isAllowedTMEvent(url){\n    for (var t = [/(?:ticketmaster\\.com)\\/(.*\\/)?event\\/([^\\/?#]+)/, /(?:concerts\\.livenation\\.com)\\/(.*\\/)?event\\/([^\\/?#]+)/], n = null, r = 0; r < t.length && (n = url.match(t[r]), null === n); r++);\n    let id = (null !== n ? n[2] : void 0);\n    return (this.tmWidgetWhiteList.indexOf(id) > -1);\n  }\n\n  embedTMPlugin(){\n    let id = 'id_tm_widget';\n    if( !document.getElementById(id) ) {\n      let script = document.createElement('script');\n      script.setAttribute('src', this.portalUrl + 'scripts/vendors/tm.js');\n      script.setAttribute('type', 'text/javascript');\n      script.setAttribute('charset', 'UTF-8');\n      script.setAttribute('id', id);\n      (document.head || document.getElementsByTagName('head')[0]).appendChild(script);\n    }\n    this.isTMPluginInitialized = true;\n  }\n\n  embedUniversePlugin(){\n    let id = 'id_universe_widget';\n    if( !document.getElementById(id) ){\n      let script = document.createElement('script');\n      script.setAttribute('src', 'https://www.universe.com/embed.js');\n      script.setAttribute('type', 'text/javascript');\n      script.setAttribute('charset', 'UTF-8');\n      script.setAttribute('id', id);\n      (document.head || document.getElementsByTagName('head')[0]).appendChild(script);\n    }\n    this.isUniversePluginInitialized = true;\n  }\n\n  // Message\n  initMessage(){\n    this.messageDialog = document.createElement('div');\n    this.messageDialog.classList.add(\"event-message\");\n    this.messageContent = document.createElement('div');\n    this.messageContent.classList.add(\"event-message__content\");\n\n    let messageClose = document.createElement('div');\n    messageClose.classList.add(\"event-message__btn\");\n    messageClose.addEventListener(\"click\", ()=> {\n      this.hideMessage();\n    });\n\n    this.messageDialog.appendChild(this.messageContent);\n    this.messageDialog.appendChild(messageClose);\n    this.eventsRootContainer.appendChild(this.messageDialog);\n  }\n\n  showMessage(message, hideMessageWithoutDelay , /*string togleClassName*/className ){\n    if(message.length){\n      this.hideMessageWithoutDelay = hideMessageWithoutDelay;\n      this.messageContent.innerHTML = message;\n      this.messageDialog.classList.add(\"event-message-visible\");\n      this.messageDialog.classList.remove(\"event-message-started\");\n    }\n\n    if( className ){\n      this.messageDialog.classList.add(className);\n    }else {\n      this.messageDialog.classList.add(\"event-message-visible\");\n      this.messageDialog.classList.remove(className);\n    }\n\n    className = null;\n\n  }\n\n  hideMessage(){\n    if(this.messageTimeout) clearTimeout(this.messageTimeout); // Clear timeout and hide message immediately.\n    this.messageDialog.classList.remove(\"event-message-visible\");\n  }\n  // End message\n\n  AdditionalElements(){\n    var legalNoticeContent = document.createTextNode('Legal Notice'),\n        legalNotice = document.createElement(\"a\");\n    legalNotice.appendChild(legalNoticeContent);\n    legalNotice.classList.add(\"legal-notice\");\n    legalNotice.target = '_blank';\n    legalNotice.href = this.legalNoticeUrl;\n    this.widgetRoot.appendChild(legalNotice);\n\n    var logo = document.createElement('a');\n    logo.classList.add(\"event-logo\",\"centered-logo\");\n    logo.target = '_blank';\n    logo.href = this.logoUrl;\n    logo.innerHTML = 'Powered by ';\n\n    var logoBox = document.createElement('div');\n    logoBox.classList.add(\"event-logo-box\");\n    logoBox.appendChild(logo);\n    this.eventsRootContainer.appendChild(logoBox);\n\n    let question = document.createElement('a');\n    question.classList.add(\"event-question\");\n    question.target = '_blank';\n    question.href = this.questionUrl;\n    this.eventsRootContainer.appendChild(question);\n  }\n\n  //adds general admission element for OLDSCHOOL theme\n  /*oldSchoolModificator(){\n    console.log('inside oldSchoolModificator' );\n  }*/\n\n  formatDate(date) {\n    var result = '';\n    if(!date.day) return result; // Day is required\n\n    var MONTH_NAMES = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],\n        DAY_NAMES = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],\n        dayArray = date.day.split('-'),\n        d = parseInt(dayArray[2]),\n        M = parseInt(dayArray[1]);\n\n    // var E = new Date(date.day).getDay();\n    var E = new Date(+date.day.split('-')[0],(+date.day.split('-')[1])-1,+date.day.split('-')[2]).getDay();\n    result = DAY_NAMES[E] + ', ' + MONTH_NAMES[M - 1] + ' ' + d + ', ' + dayArray[0];\n\n    if(!date.time) return result;\n\n    var timeArray = date.time.split(':'),\n      H = parseInt(timeArray[0]),\n      m = timeArray[1],\n      a = \"AM\";\n\n    if (H > 11) a = \"PM\";\n    if (H == 0) {\n      H = 12;\n    } else if (H > 12) {\n      H = H - 12;\n    }\n\n    return result + ' ' + this.getNormalizedDateValue(H) + ':' + m + ' ' + a;\n  }\n\n  clearEvents(){\n    this.eventsRoot.innerHTML = \"\";\n  }\n\n  clear(){\n    var modificatorList = this.widgetRoot.getElementsByClassName('modificator');\n    while (modificatorList.length) {\n      let el = modificatorList[0],\n          parent = el.parentNode;\n      parent.removeChild(el);\n    }\n    this.clearEvents();\n  }\n\n  update(isFullWidthTheme) {\n\n    let oldTheme = this.config.constructor();\n    for (let attr in this.config) {\n      if (this.config.hasOwnProperty(attr)) oldTheme[attr] = this.config[attr];\n    }\n\n    this.config = this.widgetRoot.attributes;\n    this.widgetRoot.style.height = `${this.config.height}px`;\n    this.widgetRoot.style.width  = `${this.config.width}px`;\n    this.eventsRootContainer.style.height = `${this.config.height}px`;\n    this.eventsRootContainer.style.width  = `${this.config.width}px`;\n    this.eventsRootContainer.style.borderRadius = `${this.config.borderradius}px`;\n    this.eventsRootContainer.style.borderWidth = `${this.borderSize}px`;\n\n    if(this.config.theme !== null){\n     this.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.theme + \".css\" );\n    }\n\n    if(this.needToUpdate(this.config, oldTheme, this.updateExceptions) || isFullWidthTheme){\n      this.clear();\n\n      if(this.widgetConfig.theme !== 'simple_countdown') {\n        let heightStatic = '700px';\n        //draw inline style\n        //border\n        this.eventsRootContainer.style.borderRadius = `${this.config.borderradius}px`;\n        this.eventsRootContainer.style.borderWidth = `${this.borderSize}px`;\n\n        //set width\n        this.widgetRoot.style.width = `100%`;\n        this.widgetRoot.style.height = heightStatic;\n        this.widgetRoot.style.display = `block`;\n        this.eventsRootContainer.style.width  = `100%`;\n        this.eventsRootContainer.style.height = heightStatic;\n        this.widgetConfig.width = `100%`;\n      }\n\n      /*if( this.themeModificators.hasOwnProperty( this.widgetConfig.theme ) ) {\n        this.themeModificators[ this.widgetConfig.theme ]();\n      }*/\n\n      if(this.apiUrl && this.eventId){\n        this.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\n      }else{\n        this.showMessage(\"No results were found.\", true);\n        this.countdownClock.update(null);\n      }\n    }else{\n      let events = this.widgetRoot.getElementsByClassName(\"event-wrapper\");\n      for(let i in events){\n        if(events.hasOwnProperty(i) && events[i].style !== undefined){\n          events[i].style.width = `${this.config.width - this.borderSize * 2}px`;\n          events[i].style.height = `${this.config.height - this.borderSize * 2}px`;\n        }\n      }\n    }\n    //this.toggleSecondsVisibility();\n  }\n\n  needToUpdate(newTheme, oldTheme, forCheck = []){\n    return Object.keys(newTheme).map(function(key){\n      if(forCheck.indexOf(key) > -1) return true;\n      //console.warn([key, newTheme[key], oldTheme[key], newTheme[key] === oldTheme[key]])\n      return newTheme[key] === oldTheme[key] ;\n    }).indexOf(false) > -1\n  }\n\n  loadConfig(NamedNodeMap){\n      var config = {};\n      Object.keys(NamedNodeMap).map(function(value){\n        if( typeof(NamedNodeMap[value].name) !== \"undefined\" && NamedNodeMap[value].name.indexOf(\"w-\") !== -1){\n          config[ NamedNodeMap[value].name.replace(/w-/g, \"\").replace(/-/g, \"\") ] = NamedNodeMap[value].value;\n        }\n      });\n      return config;\n  }\n\n  styleLoadingHandler(){\n    if (this && this.readyState == XMLHttpRequest.DONE ) {\n      if(this.status == 200){\n        var style = document.createElement(\"style\");\n        style.setAttribute(\"type\",\"text/css\");\n        style.setAttribute(\"id\",`widget-theme-${this.widget.config.theme}`);\n        style.textContent = this.responseText;\n        document.getElementsByTagName(\"head\")[0].appendChild(style);\n      }\n      else {\n        //alert(\"theme wasn't loaded\");\n        console.log(\"theme wasn't loaded\");\n      }\n    }\n  }\n\n  onEventLoadError(status){\n    this.event = false;\n    this.showMessage(\"No results were found.\", true, null);\n    console.log(`There was an error status - ${status}`);\n  }\n\n  eventsLoadingHandler(){\n    let widget = this.widget;\n    widget.clearEvents(); // Additional clearing after each loading\n    if (this && this.readyState == XMLHttpRequest.DONE ) {\n      if(this.status == 200){\n        widget.event = JSON.parse(this.responseText);\n        if(widget.event){\n          widget.publishEvent(widget.event);\n          widget.hideMessage();\n        }\n      }\n      else if(this.status == 400) {\n        widget.onEventLoadError.call(widget, this.status);\n      }\n      else {\n        widget.onEventLoadError.call(widget, this.status);\n      }\n      // http://js2coffee.thomaskalka.de/ - widget.event?.date?.dateTime\n      let _ref, _ref2;\n      widget.countdownClock.update((_ref = widget.event) != null ? (_ref2 = _ref.date) != null ? _ref2.dateTime || _ref2.day : void 0 : void 0);\n    }\n    widget.setBuyBtnUrl();\n  }\n\n  publishEvent(event, parentNode){\n    parentNode = parentNode || this.eventsRoot;\n    let DOMElement = this.createDOMItem(event);\n    parentNode.appendChild(DOMElement);\n  }\n\n  getImageForEvent(images){\n    var width = this.config.width,\n      height = this.config.height;\n\n    images.sort(function(a,b) {\n      if (a.width < b.width)\n        return -1;\n      else if (a.width > b.width)\n        return 1;\n      else\n        return 0;\n    });\n\n    var myImg = \"\";\n    images.forEach(function(element){\n      if(element.width >= width && element.height >= height && !myImg){\n        myImg = element.url;\n      }\n    });\n    if(myImg === \"\") {\n      myImg = images[images.length-1].url;\n    }\n    return myImg;\n  }\n\n  parseEvent(eventSet){\n    if(!eventSet.id){\n      if(typeof($widgetModalNoCode) !== \"undefined\"){\n        $widgetModalNoCode.modal();\n      }\n      return false;\n    }\n\n    let currentEvent = {};\n\n    currentEvent.id = eventSet.id;\n    currentEvent.url = eventSet.url;\n    currentEvent.name = eventSet.name;\n\n    currentEvent.date = {\n      day: eventSet.dates.start.localDate,\n      time: eventSet.dates.start.localTime,\n      dateTime: eventSet.dates.start.dateTime\n    };\n\n    if(eventSet.hasOwnProperty('_embedded') && eventSet._embedded.hasOwnProperty('venues')){\n      let venue = eventSet._embedded.venues[0];\n      if(venue){\n        if(venue.address)\n          currentEvent.address = venue.address;\n\n        if(venue.name){\n          if(!currentEvent.address) currentEvent.address = {};\n          currentEvent.address.name = venue.name;\n        }\n      }\n    }\n\n    currentEvent.img = this.getImageForEvent(eventSet.images);\n    return currentEvent;\n  }\n\n\n  makeRequest(handler, url=this.apiUrl, attrs={}, method=\"GET\"){\n    attrs = Object.keys(attrs).map(function(key){\n      return `${key}=${attrs[key]}`;\n    }).join(\"&\");\n\n    url = [url,attrs].join(\"?\");\n\n    this.xmlHTTP = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\n    if(method == \"POST\") {\n      this.xmlHTTP.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n    }\n    this.xmlHTTP.widget = this;\n    this.xmlHTTP.onreadystatechange = handler;\n    this.xmlHTTP.open(method, url, true);\n    this.xmlHTTP.send();\n  }\n\n\n  initPretendedLink(el, url, isBlank){\n    if(el && url){\n      el.setAttribute('data-url', url);\n      el.classList.add(\"event-pretended-link\");\n      el.addEventListener('click', function(){\n        let url = this.getAttribute('data-url');\n        if(url){\n          let win = window.open(url, (isBlank ? '_blank' : '_self'));\n          win.focus();\n        }\n      });\n    }\n    return el;\n  }\n\n\n  createDOMItem(itemConfig){\n    var medWrapper = document.createElement(\"div\");\n    medWrapper.classList.add(\"event-content-wraper\");\n\n    var event = document.createElement(\"li\");\n    event.classList.add(\"event-wrapper\");\n    event.style.height = `${this.config.height - this.borderSize * 2}px`;\n    event.style.width  = `${this.config.width - this.borderSize * 2}px`;\n\n    var image = document.createElement(\"span\");\n    image.classList.add(\"bg-cover\");\n    image.style.backgroundImage = `url('${itemConfig.img}')`;\n    event.appendChild(image);\n\n    var nameContent = document.createTextNode(itemConfig.name),\n    name = document.createElement(\"span\");\n    name.classList.add(\"event-name\");\n    name.appendChild(nameContent);\n    this.initPretendedLink(name, itemConfig.url, true);\n    name.setAttribute('onclick', `ga('send', 'event', 'CountDownClickeventName_theme=${this.config.theme}_width=${this.config.width}_height=${this.config.height}_color_scheme=light', 'click', '${itemConfig.url}');`);\n    medWrapper.appendChild(name);\n\n\n    var dateTimeContent = document.createTextNode(this.formatDate(itemConfig.date)),\n    dateTime = document.createElement(\"span\");\n    dateTime.classList.add(\"event-date\");\n    dateTime.appendChild(dateTimeContent);\n\n    var dateWraper = document.createElement(\"span\");\n    dateWraper.classList.add(\"event-date-wraper\");\n    dateWraper.appendChild(dateTime);\n    medWrapper.appendChild(dateWraper);\n\n    if(itemConfig.hasOwnProperty(\"address\")){\n      var addressWrapper = document.createElement(\"span\");\n      addressWrapper.classList.add(\"address-wrapper\");\n\n      if( itemConfig.address.hasOwnProperty(\"name\") ){\n        var addressNameText = document.createTextNode(itemConfig.address.name),\n            addressName =  document.createElement(\"span\");\n        addressName.classList.add(\"event-address\");\n        addressName.classList.add(\"event-address-name\");\n        addressName.appendChild(addressNameText);\n        addressWrapper.appendChild(addressName);\n      }\n\n      if( itemConfig.address.hasOwnProperty(\"line1\") ){\n        var addressOneText = document.createTextNode(itemConfig.address.line1),\n        addressOne =  document.createElement(\"span\");\n        addressOne.classList.add(\"event-address\");\n        addressOne.appendChild(addressOneText);\n        addressWrapper.appendChild(addressOne);\n      }\n\n      if( itemConfig.address.hasOwnProperty(\"line2\") ){\n        var addressTwoText = document.createTextNode(itemConfig.address.line2),\n        addressTwo =  document.createElement(\"span\");\n        addressTwo.classList.add(\"event-address\");\n        addressTwo.appendChild(addressTwoText);\n        addressWrapper.appendChild(addressTwo);\n      }\n\n      medWrapper.appendChild(addressWrapper);\n    }\n\n    if(itemConfig.hasOwnProperty(\"categories\")) {\n      var categoriesWrapper = document.createElement(\"span\");\n      categoriesWrapper.classList.add(\"category-wrapper\");\n\n      itemConfig.categories.forEach(function (element) {\n        var categoryText = document.createTextNode(element),\n          category = document.createElement(\"span\");\n        category.classList.add(\"event-category\");\n        category.appendChild(categoryText);\n        categoriesWrapper.appendChild(category);\n      });\n      medWrapper.appendChild(categoriesWrapper);\n    }\n\n    event.appendChild(medWrapper);\n\n    return event;\n  }\n\n  /*\n   * Config block\n   */\n\n  decConfig(config){\n    return JSON.parse(window.atob(config));\n  }\n\n  encConfig(config){\n    return window.btoa(config);\n  }\n\n}\n\nlet widgetsCountdown = [];\n(function () {\n  let widgetContainers = document.querySelectorAll(\"div[w-type='countdown']\");\n  for (let i = 0; i < widgetContainers.length; ++i) {\n    widgetsCountdown.push(new TicketmasterCountdownWidget(widgetContainers[i]));\n  }\n\n})();\n\n(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\nga('create', 'UA-78317809-1', 'auto');\nga('send', 'pageview');\n"]}