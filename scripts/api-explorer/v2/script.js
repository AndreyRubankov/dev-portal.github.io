var base=function(e){function t(o){if(a[o])return a[o].exports;var r=a[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){function o(e){var t=e||{};self=this,this.apiKey=s,this.selectedCategory=ko.observable(""),this.selectedMethod=ko.observable(""),this.selectedParams=ko.observableArray([]),this.menu=new n(t,this.selectedCategory),this.methods=new l(t,this.selectedCategory,this.selectedMethod),this.params=new c(t,this.selectedMethod,this.selectedParams),this.sendButtonText=ko.pureComputed(this.getMethodName,this),this.URL=ko.computed(this.getUrl,this)}var r=a(2),s=a(3),i=a(4),n=a(5),c=a(7),l=a(8);a(9);o.prototype.onClickSendBtn=function(){i(this.URL())},o.prototype.getMethodName=function(){return this.selectedMethod().method.toLowerCase()},o.prototype.getUrl=function(){return[this.selectedMethod(),this.apiKey,this.selectedParams()]},ko.applyBindings(new o(r)),e.exports=r},function(e,t){var a={},o="../../apidescription.xml",r=function(e){var t=$(e).find("resources");t.each(function(){var e=$(this).find("resource");e.each(function(e,t){var o=$(t),r=$(o.find("method")[0]),s=r.find('[primary="true"]').text(),i=o.find("param"),n={};i.each(function(e,t){var a=$(this);n[a.attr("name")]={name:a.attr("name"),required:a.attr("required"),type:a.attr("type"),style:a.attr("style"),"default":a.attr("default"),doc:a.first("doc").text().trim()}}),a[s]||(a[s]={}),a[s][r.attr("name")]=a[s][r.attr("name")]||{},a[s].ALL=a[s].ALL||{},a[s].ALL[r.attr("id")]={id:r.attr("id"),name:r.attr("apigee:displayName")?r.attr("apigee:displayName"):r.attr("id"),method:r.attr("name"),category:s,path:o.attr("path"),parameters:n,base:o.parent().attr("base"),documentation:$(r.find("doc")[0]).attr("apigee:url"),description:$(r.find("doc")[0]).text().trim()},a[s][r.attr("name")][r.attr("id")]={id:r.attr("id"),name:r.attr("apigee:displayName")?r.attr("apigee:displayName"):r.attr("id"),method:r.attr("name"),category:s,path:o.attr("path"),parameters:n,base:o.parent().attr("base"),documentation:$(r.find("doc")[0]).attr("apigee:url"),description:$(r.find("doc")[0]).text().trim()}})})},s=function(){$.ajax({url:o,async:!1,dataType:$.browser.msie?"text":"xml",success:function(e){var t;"string"==typeof e?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e)):t=e,r(t)},error:function(e,t,a){alert("Data Could Not Be Loaded - "+t)}})};s(),e.exports=a},function(e,t){var a=sessionStorage.getItem("tk-api-key")||"7elxdku9GGG5k8j0Xm8KWdANDgecHMV0";e.exports={name:"apikey",style:"query",value:ko.observable(a)}},function(e,t){var a=function(e,t,a){var o=encodeURI(e);console.log(o),$.ajax({type:t,url:o,async:!0,dataType:"json",complete:a})},o=function(e){var t,a,o,r,s,i;if(!e&&!e.length)return!1;o=e[0].base,r=e[0].path,s=e[1],i=e[2].filter(function(e){return"query"===e.style}),t=r.match(/([^{]*?)\w(?=\})/gim);var n=e[2].filter(function(e){return"template"===e.style});return t.forEach(function(e){var t=n.find(function(t){return t.name===e});r=r.replace("{"+t.name+"}",t.value()||t["default"])}),i[0]&&"apikey"===i[0].name||i.unshift(s),i=i.map(function(e){return[e.name,e.value()||e["default"]].join("=")}).join("&"),a=[o,"/",r,"?",i].join("")},r=function(e){console.clear();var t=o(e);a(t,e[0].method,function(e,t){if("error"==t){var a=e&&e.responseJSON&&e.responseJSON.errors&&e.responseJSON.errors[0];console.warn(t,e.status),a?(console.warn(a.code),console.warn(a.detail)):console.warn(e)}else console.log(t,e.status),console.log(e.responseJSON)})};e.exports=r},function(e,t,a){function o(e,t){r=this,this.category=t,this.categories=ko.observableArray(Object.keys(e).map(function(e,t){return{checked:ko.observable(!t),name:e,link:!1}})),this.selectCategory(this.categories()[0])}var r,s=a(6);o.prototype.selectCategory=function(e){var t=e.name;r.category(t),s.checkActive(r.categories,t)},e.exports=o},function(e,t){t.getModelArray=function(e){var t=e.obj||{},a=e.arr||[],o=e.prop||"name";for(var r in t)if(t.hasOwnProperty(r)){var s=a.find(function(e){return e.name===t[r][o]});s||a.push({checked:ko.observable(!1),name:t[r][o]})}return a},t.checkActive=function(e,t){return!(!e&&!t)&&void e(e().map(function(e){return e.name===t?e.checked(!0):e.checked(!1),e}))}},function(e,t){function a(e,t,a){r=e,o=this,this.animationSpeed=200,this.method=t,this.params=a,this.isHidden=ko.observable(!0),this.paramInFocus=ko.observable(""),this.paramsModel=ko.computed(this.updateParamsModel,this),this.paramInFocus(this.paramsModel()[0]),this.isDirty=ko.computed(this.checkDirty,this)}var o,r;a.prototype.checkDirty=function(){var e=this.paramsModel().filter(function(e){return e.isDirty()===!0});return e.length>0},a.prototype.updateParamsModel=function(e,t){var a=this.method().parameters||{},o=[];for(var r in a){var s=a[r];a.hasOwnProperty(r)&&(s.value=s.value||ko.observable(""),s.isDirty=ko.pureComputed(function(){return!!this.value().trim().length},s),s.hasCalendar=r.search(/(date|time)/gim)!=-1,s.hasPopUp=r.search(/(attractionId|venueId)/gim)!=-1,o.push(s))}return this.prepareUrlPairs(o,this.params),this.paramInFocus(o[0]),o},a.prototype.onEnterKeyDown=function(e,t){return 13!==t.keyCode||void $("#api-exp-get-btn").trigger("click")},a.prototype.slideToggle=function(e,t){$(t.currentTarget).parents(".js-slide-control").find(".js-slide-wrapper").slideToggle(e.animationSpeed,function(){e.isHidden(!e.isHidden())})},a.prototype.onFocus=function(e){o.paramInFocus(e)},a.prototype.prepareUrlPairs=function(e,t){return!(!e&&!t)&&t(e.filter(function(e){return e.value()||e["default"]}))},e.exports=a},function(e,t,a){"use strict";function o(e,t,a){r=this,s=e,this.category=t,this.method=a,this.togglePopUp=ko.observable(!1),this.radiosModel=ko.observableArray([]),this.selectModel=ko.observableArray([]),this.updateModel(this.category()),this.category.subscribe(this.updateModel)}var r,s,i=a(6);o.prototype.updateModel=function(e){r.updateRadiosModel(s[e]),r.updateSelect(r.radiosModel()[0])},o.prototype.onchangeRadios=function(e){i.checkActive(r.radiosModel,e.name),r.updateSelect(e)},o.prototype.updateRadiosModel=function(e){var t=e||{},a=[];for(var o in t)if(t.hasOwnProperty(o)){var r={checked:ko.observable("ALL"===o),name:o};"ALL"===o?a.unshift(r):a.push(r)}return this.radiosModel(a),a},o.prototype.updateSelect=function(e){var t=s[r.category()][e.name]||{},a=[],o=0;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];a.push({checked:ko.observable(!o),name:n.name,id:n.id,link:n.documentation,about:n.description,category:n.category,method:n.method}),!o&&this.method(s[n.category][n.method][n.id]),o++}r.selectModel(a)},o.prototype.onSelectMethod=function(e){i.checkActive(r.selectModel,e.name),r.method(s[e.category][e.method][e.id])},o.prototype.onAboutClick=function(e,t){e.togglePopUp(!e.togglePopUp())},e.exports=o},function(e,t){function a(e){r=this,this.animationSpeed=e.animationSpeed||200,this.selectModel=e.options||ko.observableArray([]),this.placeholder=ko.observable(e.placeholder||""),this.onselect=e.onselect||function(e){console.log(e+"selected!")},this.selected=ko.observable(this.selectModel()[0]),this.isOneOption=ko.pureComputed(function(){return this.selectModel().length<2},this)}function o(e){var t=$(e.currentTarget).parents(".js-custom-select");return{wrapper:t.find(".js-custom-select-wrapper"),layer:t.find(".js-custom-select-layer")}}var r;a.prototype.slideToggle=function(e,t){if(e.isOneOption())return!1;var a=o(t);a.wrapper.slideToggle(e.animationSpeed),a.layer.toggleClass("hidden")},a.prototype.selectItem=function(e,t){var a=this;this.selected(e),this.onselect(e),this.slideToggle(a,t)},e.exports=ko.components.register("custom-select",{viewModel:a,template:['<div class="api-exp-custom-select js-custom-select">','<div class="api-exp-custom-select-wrapper">','<select data-bind="options: selectModel, optionsText: \'name\', value: selected" class="api-exp-custom-select__field" name="api-exp-method"></select>','<span class="api-exp-custom-select__placeholder">','<input data-bind="event: {click: slideToggle}, attr: {value: selected().name, disabled: isOneOption}" type="text" value="" readonly="">','<b data-bind="css: {hidden: isOneOption}" class="api-exp-custom-select__chevron">&nbsp;</b>',"</span>",'<ul data-bind="foreach: selectModel" class="api-exp-custom-select__list js-custom-select-wrapper">','<li data-bind="css: {\'active\': checked}" class="api-exp-custom-select__item">','<button data-bind="event: {click: $parent.selectItem.bind($parent)}, text: name, css: {\'active\': checked()}, attr: {\'data-value\': name}"  class="api-exp-custom-select__item-label" href="#"></button>','<a data-bind="attr: {href: link}, css: {\'hidden\': !link}" class="api-exp-custom-select__item-link" target="_blank">&nbsp;</a>',"</li>","</ul>","</div>",'<div data-bind="click: slideToggle" class="api-exp-custom-select-layer js-custom-select-layer hidden"></div>',"</div>"].join("")})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2NyaXB0LmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBlNmNhNmQ0NDYxM2NiOWI4YmMwOCIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9WaWV3TW9kZWxzL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9hcGlrZXkuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9hamF4U2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9WaWV3TW9kZWxzL21lbnVWaWV3TW9kZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9oZWxwZXJGdW5jLmpzIiwid2VicGFjazovLy8uL3NjcmlwdHMvYXBpLWV4cGxvcmVyL3YyL1ZpZXdNb2RlbHMvcGFyYW1zVmlld01vZGVsLmpzIiwid2VicGFjazovLy8uL3NjcmlwdHMvYXBpLWV4cGxvcmVyL3YyL1ZpZXdNb2RlbHMvbWV0aG9kc1ZpZXdNb2RlbC5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9jb21wb25lbnRzL2N1c3RvbVNlbGVjdC5qcyJdLCJuYW1lcyI6WyJiYXNlIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiQXBwVmlld01vZGVsIiwib2JqIiwic2VsZiIsInRoaXMiLCJhcGlLZXkiLCJzZWxlY3RlZENhdGVnb3J5Iiwia28iLCJvYnNlcnZhYmxlIiwic2VsZWN0ZWRNZXRob2QiLCJzZWxlY3RlZFBhcmFtcyIsIm9ic2VydmFibGVBcnJheSIsIm1lbnUiLCJNZW51Vmlld01vZGVsIiwibWV0aG9kcyIsIk1ldGhvZHNWaWV3TW9kZWwiLCJwYXJhbXMiLCJQYXJhbXNWaWV3TW9kZWwiLCJzZW5kQnV0dG9uVGV4dCIsInB1cmVDb21wdXRlZCIsImdldE1ldGhvZE5hbWUiLCJVUkwiLCJjb21wdXRlZCIsImdldFVybCIsImFqYXhTZXJ2aWNlIiwicHJvdG90eXBlIiwib25DbGlja1NlbmRCdG4iLCJtZXRob2QiLCJ0b0xvd2VyQ2FzZSIsImFwcGx5QmluZGluZ3MiLCJDT05GSUdfVVJMIiwicGFyc2VYTUxEb2MiLCJ4bWwiLCJBUElzIiwiJCIsImZpbmQiLCJlYWNoIiwiaW5kZXgiLCJlbGVtZW50IiwibWUiLCJjYXRlZ29yeSIsInRleHQiLCJwYXJhbWV0ZXJzIiwidGhhdCIsImF0dHIiLCJuYW1lIiwicmVxdWlyZWQiLCJ0eXBlIiwic3R5bGUiLCJkZWZhdWx0IiwiZG9jIiwiZmlyc3QiLCJ0cmltIiwiQUxMIiwicGF0aCIsInBhcmVudCIsImRvY3VtZW50YXRpb24iLCJkZXNjcmlwdGlvbiIsInJlYWRGcm9tV0FETCIsImFqYXgiLCJ1cmwiLCJhc3luYyIsImRhdGFUeXBlIiwiYnJvd3NlciIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsIkFjdGl2ZVhPYmplY3QiLCJsb2FkWE1MIiwiZXJyb3IiLCJYTUxIdHRwUmVxdWVzdCIsInRleHRTdGF0dXMiLCJlcnJvclRocm93biIsImFsZXJ0Iiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwidmFsdWUiLCJjYWxsYmFjayIsImVzY2FwZWRVUkwiLCJlbmNvZGVVUkkiLCJjb25zb2xlIiwibG9nIiwiY29tcGxldGUiLCJwcmVwYXJlVXJsIiwiYXJyIiwicmVwbGFjZW1lbnQiLCJkb21haW4iLCJsZW5ndGgiLCJmaWx0ZXIiLCJpdGVtIiwibWF0Y2giLCJ0ZW1wbGF0ZXNBcnIiLCJmb3JFYWNoIiwidmFsIiwicGFyYW0iLCJyZXBsYWNlIiwidW5zaGlmdCIsIm1hcCIsImpvaW4iLCJzZW5kUHJpbWFyeVJlcXVlc3QiLCJjbGVhciIsIm1lc3NhZ2UiLCJlcnIiLCJyZXNwb25zZUpTT04iLCJlcnJvcnMiLCJ3YXJuIiwic3RhdHVzIiwiY29kZSIsImRldGFpbCIsImNhdGVnb3JpZXMiLCJPYmplY3QiLCJrZXlzIiwiY2hlY2tlZCIsImxpbmsiLCJzZWxlY3RDYXRlZ29yeSIsImhmIiwiY2F0ZWdvcnlOYW1lIiwiY2hlY2tBY3RpdmUiLCJnZXRNb2RlbEFycmF5IiwicHJvcCIsImkiLCJoYXNPd25Qcm9wZXJ0eSIsIm0xIiwicHVzaCIsImtvQXJyIiwiYWN0aXZlRWxlbSIsInJhdyIsImFuaW1hdGlvblNwZWVkIiwiaXNIaWRkZW4iLCJwYXJhbUluRm9jdXMiLCJwYXJhbXNNb2RlbCIsInVwZGF0ZVBhcmFtc01vZGVsIiwiaXNEaXJ0eSIsImNoZWNrRGlydHkiLCJkaXJ0eSIsImEiLCJiIiwiaGFzQ2FsZW5kYXIiLCJzZWFyY2giLCJoYXNQb3BVcCIsInByZXBhcmVVcmxQYWlycyIsIm9uRW50ZXJLZXlEb3duIiwibW9kZWwiLCJldmVudCIsImtleUNvZGUiLCJ0cmlnZ2VyIiwic2xpZGVUb2dnbGUiLCJ2aWV3TW9kZWwiLCJjdXJyZW50VGFyZ2V0IiwicGFyZW50cyIsIm9uRm9jdXMiLCJrb09icyIsInRvZ2dsZVBvcFVwIiwicmFkaW9zTW9kZWwiLCJzZWxlY3RNb2RlbCIsInVwZGF0ZU1vZGVsIiwic3Vic2NyaWJlIiwidXBkYXRlUmFkaW9zTW9kZWwiLCJ1cGRhdGVTZWxlY3QiLCJvbmNoYW5nZVJhZGlvcyIsImNvdW50IiwicHJvcGVydHkiLCJhYm91dCIsIm9uU2VsZWN0TWV0aG9kIiwib25BYm91dENsaWNrIiwiQ3VzdG9tU2VsZWN0Iiwib3B0aW9ucyIsInBsYWNlaG9sZGVyIiwib25zZWxlY3QiLCJzZWxlY3RlZCIsImlzT25lT3B0aW9uIiwiZmluZEVsZW1lbnQiLCJ3cmFwcGVyIiwibGF5ZXIiLCJlbCIsInRvZ2dsZUNs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QUFBSCxFQUFBNUIsRUFDQStCLEdBQUFGLFFBQUExQixZQUFBQyxFQUFBcEIsZ0JBQ0ErQyxFQUFBRCxNQUFBRSxZQUFBLFdBUUFWLEVBQUEzSSxVQUFBc0osV0FBQSxTQUFBdkYsRUFBQXNELEdBQ0EsR0FBQTNJLEdBQUFDLElBQ0FBLE1BQUFvSyxTQUFBaEYsR0FFQXBGLEtBQUFtSyxTQUFBL0UsR0FFQXBGLEtBQUE2SSxZQUFBOUksRUFBQTJJLElBR0FwSixFQUFBRCxRQUFBYyxHQUFBeUssV0FBQUMsU0FBQSxpQkFDQS9CLFVBQUFrQixFQUNBYyxVQUNBLHVEQUNBLDhDQUNBLHdKQUNBLG9EQUNBLDBJQUNBLDhGQUNBLFVBQ0EscUdBQ0Esa0ZBQ0EsNk1BQ0Esa0lBQ0EsUUFDQSxRQUNBLFNBQ0EsK0dBQ0EsVUFDQWpGLEtBQUEiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGJhc2UgPVxuLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxyXG5cdCAqIE1haW4gZmlsZSBmb3IgQXBpIEV4cGxyZXIgdjIuMFxyXG5cdCAqIEZvciBkZXZlbG9wbWVudCBwbGVhc2UgdXNlIFdlYnBhY2sgdG8gYnVuZGxlIGFsbCBtb2R1bGVzXHJcblx0ICogSXQgY2FuIGJlIG1hZGUgdXNpbmcgbnBtIHNjcmlwdHMgY21kIC0gJ3dlYnBhY2snXHJcblx0ICovXHJcblx0Ly8gQ29tcG9uZW50c1xyXG5cdHZhciBiYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxuXHR2YXIgYXBpS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcclxuXHR2YXIgYWpheFNlcnZpY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xyXG5cdFxyXG5cdC8vIFZpZXcgTW9kZWxzXHJcblx0dmFyIE1lbnVWaWV3TW9kZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xyXG5cdHZhciBQYXJhbXNWaWV3TW9kZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG5cdHZhciBNZXRob2RzVmlld01vZGVsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcclxuXHRcclxuXHQvLyBNb2R1bGVzXHJcblx0dmFyIGN1c3RvbVNlbGVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XHJcblx0XHJcblx0LyoqXHJcblx0ICogTWFpbiBhcHBsaWNhdGlvbiB2aWV3LW1vZGVsXHJcblx0ICogQHBhcmFtIG9iaiB7b2JqZWN0fSBnbG9iYWwgZGF0YSBvYmplY3RcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBBcHBWaWV3TW9kZWwob2JqKSB7XHJcblx0ICB2YXIgYmFzZSA9IG9iaiB8fCB7fTtcclxuXHQgIHNlbGYgPSB0aGlzO1xyXG5cdCAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XHJcblx0XHJcblx0ICAvLyBvYnNlcnZhYmxlc1xyXG5cdCAgdGhpcy5zZWxlY3RlZENhdGVnb3J5ID0ga28ub2JzZXJ2YWJsZSgnJyk7XHJcblx0ICB0aGlzLnNlbGVjdGVkTWV0aG9kID0ga28ub2JzZXJ2YWJsZSgnJyk7XHJcblx0ICB0aGlzLnNlbGVjdGVkUGFyYW1zID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuXHRcclxuXHQgIC8vIHN1Yi1tb2RlbHNcclxuXHQgIHRoaXMubWVudSA9IG5ldyBNZW51Vmlld01vZGVsKGJhc2UsIHRoaXMuc2VsZWN0ZWRDYXRlZ29yeSk7XHJcblx0ICB0aGlzLm1ldGhvZHMgPSBuZXcgTWV0aG9kc1ZpZXdNb2RlbChiYXNlLCB0aGlzLnNlbGVjdGVkQ2F0ZWdvcnksIHRoaXMuc2VsZWN0ZWRNZXRob2QpO1xyXG5cdCAgdGhpcy5wYXJhbXMgPSBuZXcgUGFyYW1zVmlld01vZGVsKGJhc2UsIHRoaXMuc2VsZWN0ZWRNZXRob2QsIHRoaXMuc2VsZWN0ZWRQYXJhbXMpO1xyXG5cdFxyXG5cdCAgLy8gY29tcHV0ZWRcclxuXHQgIHRoaXMuc2VuZEJ1dHRvblRleHQgPSBrby5wdXJlQ29tcHV0ZWQodGhpcy5nZXRNZXRob2ROYW1lLCB0aGlzKTtcclxuXHQgIFxyXG5cdCAgdGhpcy5VUkwgPSBrby5jb21wdXRlZCh0aGlzLmdldFVybCwgdGhpcyk7XHJcblx0fVxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFNlbmQgcmVxdWVzdCBtZXRob2RcclxuXHQgKi9cclxuXHRBcHBWaWV3TW9kZWwucHJvdG90eXBlLm9uQ2xpY2tTZW5kQnRuID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgYWpheFNlcnZpY2UodGhpcy5VUkwoKSk7XHJcblx0fTtcclxuXHRcclxuXHQvKipcclxuXHQgKiBHZXRzIGN1cnJlbnQgbWV0aG9kIG5hbWVcclxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG5cdCAqL1xyXG5cdEFwcFZpZXdNb2RlbC5wcm90b3R5cGUuZ2V0TWV0aG9kTmFtZSA9IGZ1bmN0aW9uICgpIHtcclxuXHQgIHJldHVybiB0aGlzLnNlbGVjdGVkTWV0aG9kKCkubWV0aG9kLnRvTG93ZXJDYXNlKCk7XHJcblx0fTtcclxuXHRcclxuXHQvKipcclxuXHQgKiBHZXRzIHJhdyB1cmwgZGF0YSBhcnJheVxyXG5cdCAqIEByZXR1cm5zIHsqW119XHJcblx0ICovXHJcblx0QXBwVmlld01vZGVsLnByb3RvdHlwZS5nZXRVcmwgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICByZXR1cm4gW1xyXG5cdCAgICB0aGlzLnNlbGVjdGVkTWV0aG9kKCksXHJcblx0ICAgIHRoaXMuYXBpS2V5LFxyXG5cdCAgICB0aGlzLnNlbGVjdGVkUGFyYW1zKClcclxuXHQgIF07XHJcblx0fTtcclxuXHRcclxuXHQvKipcclxuXHQgKiBBY3RpdmF0ZXMga25vY2tvdXQuanNcclxuXHQgKi9cclxuXHRrby5hcHBseUJpbmRpbmdzKG5ldyBBcHBWaWV3TW9kZWwoYmFzZSkpO1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIGV4cG9ydHMgZ2xvYmFsIHZhcmlhYmxlXHJcblx0ICovXHJcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlO1xuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIGJhc2UgPSB7fTtcclxuXHR2YXIgQ09ORklHX1VSTCA9ICcuLi8uLi9hcGlkZXNjcmlwdGlvbi54bWwnO1xyXG5cdFxyXG5cdC8vZ2V0cyBpbXBvcnRhbnQgZWxlbWVudHMgZnJvbSBXQURMIGRvY3VtZW50IGFuZCB3cml0ZXMgdGhlbSBpbnRvIGdsb2JhbCB2YXJpYWJsZXNcclxuXHR2YXIgcGFyc2VYTUxEb2MgPSBmdW5jdGlvbiAoeG1sKSB7XHJcblx0ICAvL2dldCBhbGwgQVBJc1xyXG5cdCAgdmFyIEFQSXMgPSAkKHhtbCkuZmluZChcInJlc291cmNlc1wiKSxcclxuXHQgICAgaXNGaXJzdE1ldGhvZCA9IHRydWU7IC8vdmFyaWFibGUgdG8gc3RvcmUgdGhlIHZlcnkgZmlyc3QgbWV0aG9kIGZvdW5kXHJcblx0XHJcblx0ICBBUElzLmVhY2goZnVuY3Rpb24oKXtcclxuXHQgICAgLy9nZXQgYWxsIG1ldGhvZHMgaW4gdGhlIEFQSVxyXG5cdCAgICB2YXIgbWV0aG9kcyA9ICQodGhpcykuZmluZCgncmVzb3VyY2UnKTtcclxuXHRcclxuXHQgICAgbWV0aG9kcy5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KXtcclxuXHQgICAgICB2YXIgbWUgPSAkKGVsZW1lbnQpLCAvL21ldGhvZFxyXG5cdCAgICAgICAgbWV0aG9kID0gJChtZS5maW5kKCdtZXRob2QnKVswXSksIC8vZ2V0IG1ldGhvZCBkZXRhaWxzIG9iamVjdFxyXG5cdCAgICAgICAgY2F0ZWdvcnkgPSBtZXRob2QuZmluZCgnW3ByaW1hcnk9XCJ0cnVlXCJdJykudGV4dCgpLCAvL2dldCBBUEkgbmFtZVxyXG5cdCAgICAgICAgcGFyYW1zID0gbWUuZmluZCgncGFyYW0nKSwgLy9tZXRob2QgcGFyYW1zXHJcblx0ICAgICAgICBwYXJhbWV0ZXJzID0ge307IC8vdGVtcG9yYXJ5IG9iamVjdCB0byBzdG9yZSBwYXJhbSBkYXRhXHJcblx0XHJcblx0ICAgICAgcGFyYW1zLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpeyAvL2ZpbGwgcGFyYW0gb2JqZWN0IHdpdGggcmVxdWlyZWQgZGF0YVxyXG5cdCAgICAgICAgdmFyIHRoYXQgPSAkKHRoaXMpO1xyXG5cdCAgICAgICAgcGFyYW1ldGVyc1t0aGF0LmF0dHIoJ25hbWUnKV0gPSB7XHJcblx0ICAgICAgICAgICduYW1lJzogdGhhdC5hdHRyKCduYW1lJyksXHJcblx0ICAgICAgICAgICdyZXF1aXJlZCc6IHRoYXQuYXR0cigncmVxdWlyZWQnKSxcclxuXHQgICAgICAgICAgJ3R5cGUnOiB0aGF0LmF0dHIoJ3R5cGUnKSxcclxuXHQgICAgICAgICAgJ3N0eWxlJzogdGhhdC5hdHRyKCdzdHlsZScpLFxyXG5cdCAgICAgICAgICAnZGVmYXVsdCc6IHRoYXQuYXR0cignZGVmYXVsdCcpLFxyXG5cdCAgICAgICAgICAnZG9jJzogdGhhdC5maXJzdCgnZG9jJykudGV4dCgpLnRyaW0oKVxyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgIH0pO1xyXG5cdFxyXG5cdCAgICAgIGlmICghYmFzZVtjYXRlZ29yeV0pe1xyXG5cdCAgICAgICAgYmFzZVtjYXRlZ29yeV0gPSB7fTsgLy8gY3JlYXRlIG5ldyBBUEkgaW4gYmFzZSBvYmplY3QgaWYgdGhlcmUgaXMgbm9uZVxyXG5cdCAgICAgIH1cclxuXHQgICAgICBiYXNlW2NhdGVnb3J5XVttZXRob2QuYXR0cihcIm5hbWVcIildID0gYmFzZVtjYXRlZ29yeV1bbWV0aG9kLmF0dHIoXCJuYW1lXCIpXSB8fCB7fTtcclxuXHQgICAgICBiYXNlW2NhdGVnb3J5XS5BTEwgPSBiYXNlW2NhdGVnb3J5XS5BTEwgfHwge307XHJcblx0ICAgICAgYmFzZVtjYXRlZ29yeV0uQUxMW21ldGhvZC5hdHRyKFwiaWRcIildPSB7XHJcblx0ICAgICAgICAnaWQnIDogbWV0aG9kLmF0dHIoXCJpZFwiKSwgLy8gbWV0aG9kIGlkXHJcblx0ICAgICAgICAnbmFtZScgOiBtZXRob2QuYXR0cihcImFwaWdlZTpkaXNwbGF5TmFtZVwiKSA/IG1ldGhvZC5hdHRyKFwiYXBpZ2VlOmRpc3BsYXlOYW1lXCIpIDogbWV0aG9kLmF0dHIoXCJpZFwiKSwgLy8gbWV0aG9kIG5hbWVcclxuXHQgICAgICAgICdtZXRob2QnIDogbWV0aG9kLmF0dHIoJ25hbWUnKSwgLy8gR0VUIG9yIFBPU1RcclxuXHQgICAgICAgICdjYXRlZ29yeScgOiBjYXRlZ29yeSwgLy8gQVBJIG5hbWVcclxuXHQgICAgICAgICdwYXRoJzogbWUuYXR0cigncGF0aCcpLCAvLyBtZXRob2QgVVJMXHJcblx0ICAgICAgICAncGFyYW1ldGVycyc6IHBhcmFtZXRlcnMsIC8vIG1ldGhvZCBwYXJhbWV0ZXJzXHJcblx0ICAgICAgICAnYmFzZScgOiBtZS5wYXJlbnQoKS5hdHRyKCdiYXNlJyksIC8vIG1ldGhvZCBiYXNlIGxpbmtcclxuXHQgICAgICAgICdkb2N1bWVudGF0aW9uJyA6ICQobWV0aG9kLmZpbmQoJ2RvYycpWzBdKS5hdHRyKCdhcGlnZWU6dXJsJyksIC8vIGxpbmsgdG8gZG9jdW1lbnRhdGlvblxyXG5cdCAgICAgICAgJ2Rlc2NyaXB0aW9uJyA6ICQobWV0aG9kLmZpbmQoJ2RvYycpWzBdKS50ZXh0KCkudHJpbSgpIC8vbWV0aG9kIGRlc2NyaXB0aW9uXHJcblx0ICAgICAgfTtcclxuXHRcclxuXHQgICAgICBiYXNlW2NhdGVnb3J5XVttZXRob2QuYXR0cihcIm5hbWVcIildW21ldGhvZC5hdHRyKFwiaWRcIildID0ge1xyXG5cdCAgICAgICAgJ2lkJyA6IG1ldGhvZC5hdHRyKFwiaWRcIiksIC8vIG1ldGhvZCBpZFxyXG5cdCAgICAgICAgJ25hbWUnIDogbWV0aG9kLmF0dHIoXCJhcGlnZWU6ZGlzcGxheU5hbWVcIikgPyBtZXRob2QuYXR0cihcImFwaWdlZTpkaXNwbGF5TmFtZVwiKSA6IG1ldGhvZC5hdHRyKFwiaWRcIiksIC8vIG1ldGhvZCBuYW1lXHJcblx0ICAgICAgICAnbWV0aG9kJyA6IG1ldGhvZC5hdHRyKCduYW1lJyksIC8vIEdFVCBvciBQT1NUXHJcblx0ICAgICAgICAnY2F0ZWdvcnknIDogY2F0ZWdvcnksIC8vIEFQSSBuYW1lXHJcblx0ICAgICAgICAncGF0aCc6IG1lLmF0dHIoJ3BhdGgnKSwgLy8gbWV0aG9kIFVSTFxyXG5cdCAgICAgICAgJ3BhcmFtZXRlcnMnOiBwYXJhbWV0ZXJzLCAvLyBtZXRob2QgcGFyYW1ldGVyc1xyXG5cdCAgICAgICAgJ2Jhc2UnIDogbWUucGFyZW50KCkuYXR0cignYmFzZScpLCAvLyBtZXRob2QgYmFzZSBsaW5rXHJcblx0ICAgICAgICAnZG9jdW1lbnRhdGlvbicgOiAkKG1ldGhvZC5maW5kKCdkb2MnKVswXSkuYXR0cignYXBpZ2VlOnVybCcpLCAvLyBsaW5rIHRvIGRvY3VtZW50YXRpb25cclxuXHQgICAgICAgICdkZXNjcmlwdGlvbicgOiAkKG1ldGhvZC5maW5kKCdkb2MnKVswXSkudGV4dCgpLnRyaW0oKSAvL21ldGhvZCBkZXNjcmlwdGlvblxyXG5cdCAgICAgIH07XHJcblx0ICAgIH0pO1xyXG5cdCAgfSk7XHJcblx0fTtcclxuXHRcclxuXHQvL2dldHMgZG9jdW1lbnQgZnJvbSBXQURMIGNvbmZpZ3VyYXRpb24gZmlsZVxyXG5cdHZhciByZWFkRnJvbVdBREwgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAkLmFqYXgoe1xyXG5cdCAgICB1cmw6IENPTkZJR19VUkwsXHJcblx0ICAgIGFzeW5jIDogZmFsc2UsXHJcblx0ICAgIGRhdGFUeXBlOiAoJC5icm93c2VyLm1zaWUpID8gXCJ0ZXh0XCIgOiBcInhtbFwiLFxyXG5cdCAgICBzdWNjZXNzIDogZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG5cdCAgICAgIHZhciB4bWw7XHJcblx0XHJcblx0ICAgICAgaWYgKHR5cGVvZiByZXNwb25zZSA9PSBcInN0cmluZ1wiKXtcclxuXHQgICAgICAgIHhtbCA9IG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTERPTVwiKTtcclxuXHQgICAgICAgIHhtbC5hc3luYyA9IGZhbHNlO1xyXG5cdCAgICAgICAgeG1sLmxvYWRYTUwocmVzcG9uc2UpO1xyXG5cdCAgICAgIH0gZWxzZSB7XHJcblx0ICAgICAgICB4bWwgPSByZXNwb25zZTtcclxuXHQgICAgICB9XHJcblx0ICAgICAgcGFyc2VYTUxEb2MoeG1sKTtcclxuXHQgICAgfSxcclxuXHRcclxuXHQgICAgZXJyb3I6IGZ1bmN0aW9uKFhNTEh0dHBSZXF1ZXN0LCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bil7XHJcblx0ICAgICAgYWxlcnQoJ0RhdGEgQ291bGQgTm90IEJlIExvYWRlZCAtICcrIHRleHRTdGF0dXMpO1xyXG5cdCAgICB9XHJcblx0ICB9KTtcclxuXHR9O1xyXG5cdHJlYWRGcm9tV0FETCgpO1xyXG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZTtcclxuXG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgYXBpS2V5ID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndGstYXBpLWtleScpIHx8IFwiN2VseGRrdTlHR0c1azhqMFhtOEtXZEFORGdlY0hNVjBcIjsgLy9BUEkgS2V5XHJcblx0XHJcblx0bW9kdWxlLmV4cG9ydHMgPSB7XHJcblx0ICBuYW1lOiAnYXBpa2V5JyxcclxuXHQgIHN0eWxlOiAncXVlcnknLFxyXG5cdCAgdmFsdWU6IGtvLm9ic2VydmFibGUoYXBpS2V5KVxyXG5cdH07XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcclxuXHQgKiBBamF4IFNlcnZpY2VcclxuXHQgKiBAcGFyYW0gdXJsXHJcblx0ICogQHBhcmFtIG1ldGhvZFxyXG5cdCAqIEBwYXJhbSBjYWxsYmFja1xyXG5cdCAqL1xyXG5cdHZhciBhamF4U2VydmljZSA9IGZ1bmN0aW9uICh1cmwsIG1ldGhvZCwgY2FsbGJhY2spIHtcclxuXHQgIHZhciBlc2NhcGVkVVJMID0gZW5jb2RlVVJJKHVybCk7XHJcblx0ICBjb25zb2xlLmxvZyhlc2NhcGVkVVJMKTtcclxuXHRcclxuXHQgICQuYWpheCh7XHJcblx0ICAgIHR5cGU6IG1ldGhvZCxcclxuXHQgICAgdXJsOiBlc2NhcGVkVVJMLFxyXG5cdCAgICBhc3luYzogdHJ1ZSxcclxuXHQgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG5cdCAgICBjb21wbGV0ZTogY2FsbGJhY2tcclxuXHQgIH0pO1xyXG5cdH07XHJcblx0XHJcblx0LyoqXHJcblx0ICogRmlsdGVycyBhbmQgcHJlcGFyZXMgcGFyYW1zIHBhaXJzXHJcblx0ICogQHBhcmFtIGFyclxyXG5cdCAqIEBwYXJhbSBvYmpcclxuXHQgKiBAcGFyYW0ga29PYnNcclxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuXHQgKi9cclxuXHR2YXIgcHJlcGFyZVVybCA9IGZ1bmN0aW9uIChhcnIpIHtcclxuXHQgIHZhciByZXBsYWNlbWVudCwgdXJsLCBkb21haW4sIHBhdGgsIG1ldGhvZCwgYXBpS2V5LCBwYXJhbXM7XHJcblx0XHJcblx0ICBpZiAoIWFyciAmJiAhYXJyLmxlbmd0aCkge1xyXG5cdCAgICByZXR1cm4gZmFsc2U7XHJcblx0ICB9XHJcblx0ICBcclxuXHQgIGRvbWFpbiA9IGFyclswXS5iYXNlO1xyXG5cdCAgcGF0aCA9IGFyclswXS5wYXRoO1xyXG5cdCAgYXBpS2V5ID0gYXJyWzFdO1xyXG5cdCAgcGFyYW1zID0gYXJyWzJdLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xyXG5cdCAgICByZXR1cm4gaXRlbS5zdHlsZSA9PT0gJ3F1ZXJ5JztcclxuXHQgIH0pO1xyXG5cdFxyXG5cdCAgLy8gYXJyIG9mIHRlbXBsYXRlIG1hcmtzXHJcblx0ICByZXBsYWNlbWVudCA9IHBhdGgubWF0Y2goLyhbXntdKj8pXFx3KD89XFx9KS9nbWkpO1xyXG5cdFxyXG5cdCAgLy8gYXJyIG9mIHRlbXBsYXRlIHBhcmFtc1xyXG5cdCAgdmFyIHRlbXBsYXRlc0FyciA9IGFyclsyXS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcclxuXHQgICAgcmV0dXJuIGl0ZW0uc3R5bGUgPT09ICd0ZW1wbGF0ZSc7XHJcblx0ICB9KTtcclxuXHRcclxuXHQgIC8vIHJlcGxhY2VtZW50XHJcblx0ICByZXBsYWNlbWVudC5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHtcclxuXHQgICAgdmFyIHBhcmFtID0gdGVtcGxhdGVzQXJyLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHtcclxuXHQgICAgICByZXR1cm4gaXRlbS5uYW1lID09PSB2YWw7XHJcblx0ICAgIH0pO1xyXG5cdCAgICBwYXRoID0gcGF0aC5yZXBsYWNlKCd7JysgcGFyYW0ubmFtZSArICd9JywgcGFyYW0udmFsdWUoKSB8fCBwYXJhbS5kZWZhdWx0KTtcclxuXHQgIH0pO1xyXG5cdFxyXG5cdCAgLy8gYWRkcyBhcGlLZXkgcGFyYW1cclxuXHQgIGlmICghcGFyYW1zWzBdIHx8IHBhcmFtc1swXS5uYW1lICE9PSAnYXBpa2V5Jykge1xyXG5cdCAgICBwYXJhbXMudW5zaGlmdChhcGlLZXkpO1xyXG5cdCAgfVxyXG5cdFxyXG5cdCAgLy8gcHJlcGFyZXMgcGFyYW1zIHBhcnQgb2YgdXJsXHJcblx0ICBwYXJhbXMgPSBwYXJhbXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XHJcblx0ICAgICAgcmV0dXJuIFtpdGVtLm5hbWUsIGl0ZW0udmFsdWUoKSB8fCBpdGVtLmRlZmF1bHRdLmpvaW4oJz0nKTtcclxuXHQgICAgfSkuam9pbignJicpO1xyXG5cdFxyXG5cdCAgdXJsID0gW2RvbWFpbiwgJy8nLCBwYXRoLCAnPycsIHBhcmFtc10uam9pbignJyk7XHJcblx0XHJcblx0ICByZXR1cm4gdXJsO1xyXG5cdH07XHJcblx0XHJcblx0Ly8gc2VuZHMgcmVxdWVzdCB0byBnZXQgdGhlIHNlY29uZCBjb2x1bW5cclxuXHR2YXIgc2VuZFByaW1hcnlSZXF1ZXN0ID0gZnVuY3Rpb24gKGFycikge1xyXG5cdCAgY29uc29sZS5jbGVhcigpO1xyXG5cdCAgdmFyIHVybCA9IHByZXBhcmVVcmwoYXJyKTtcclxuXHQgIC8vIGNvbnNvbGUubG9nKHVybCk7XHJcblx0XHJcblx0ICBhamF4U2VydmljZSh1cmwsIGFyclswXS5tZXRob2QsIGZ1bmN0aW9uKHJlc3BvbnNlLCBtZXNzYWdlKSB7XHJcblx0ICAgIGlmIChtZXNzYWdlID09ICdlcnJvcicpIHtcclxuXHQgICAgICB2YXIgZXJyID0gcmVzcG9uc2UgJiYgcmVzcG9uc2UucmVzcG9uc2VKU09OICYmIHJlc3BvbnNlLnJlc3BvbnNlSlNPTi5lcnJvcnMgJiYgcmVzcG9uc2UucmVzcG9uc2VKU09OLmVycm9yc1swXTtcclxuXHQgICAgICBjb25zb2xlLndhcm4obWVzc2FnZSwgcmVzcG9uc2Uuc3RhdHVzKTtcclxuXHQgICAgICBpZiAoZXJyKSB7XHJcblx0ICAgICAgICBjb25zb2xlLndhcm4oZXJyLmNvZGUpO1xyXG5cdCAgICAgICAgY29uc29sZS53YXJuKGVyci5kZXRhaWwpO1xyXG5cdCAgICAgIH0gZWxzZSB7XHJcblx0ICAgICAgICBjb25zb2xlLndhcm4ocmVzcG9uc2UpO1xyXG5cdCAgICAgIH1cclxuXHQgICAgfSBlbHNlIHtcclxuXHQgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlLCByZXNwb25zZS5zdGF0dXMpO1xyXG5cdCAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLnJlc3BvbnNlSlNPTik7XHJcblx0ICAgIH1cclxuXHQgIH0pO1xyXG5cdH07XHJcblx0XHJcblx0XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBzZW5kUHJpbWFyeVJlcXVlc3Q7XG5cbi8qKiovIH0sXG4vKiA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaGYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xyXG5cdHZhciBzZWxmO1xyXG5cdFxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIE1lbnUgVmlldy1Nb2RlbFxyXG5cdCAqIEBwYXJhbSBiYXNlXHJcblx0ICogQHBhcmFtIGNhdGVnb3J5XHJcblx0ICogQGNvbnN0cnVjdG9yXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gTWVudVZpZXdNb2RlbChiYXNlLCBjYXRlZ29yeSkge1xyXG5cdCAgc2VsZiA9IHRoaXM7XHJcblx0ICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XHJcblx0ICB0aGlzLmNhdGVnb3JpZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoT2JqZWN0LmtleXMoYmFzZSkubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG5cdCAgICByZXR1cm4ge1xyXG5cdCAgICAgIGNoZWNrZWQ6IGtvLm9ic2VydmFibGUoIWluZGV4KSxcclxuXHQgICAgICBuYW1lOiBpdGVtLFxyXG5cdCAgICAgIGxpbms6IGZhbHNlXHJcblx0ICAgIH1cclxuXHQgIH0pKTtcclxuXHRcclxuXHQgIC8vIGluaXRpYWwgbG9hZFxyXG5cdCAgdGhpcy5zZWxlY3RDYXRlZ29yeSh0aGlzLmNhdGVnb3JpZXMoKVswXSk7XHJcblx0fVxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIE1lbnUgVmlldy1Nb2RlbCBtZXRob2RcclxuXHQgKiBAcGFyYW0gY2F0ZWdvcnlcclxuXHQgKi9cclxuXHRNZW51Vmlld01vZGVsLnByb3RvdHlwZS5zZWxlY3RDYXRlZ29yeSA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG5cdCAgdmFyIGNhdGVnb3J5TmFtZSA9IGNhdGVnb3J5Lm5hbWU7XHJcblx0ICBzZWxmLmNhdGVnb3J5KGNhdGVnb3J5TmFtZSk7XHJcblx0ICBoZi5jaGVja0FjdGl2ZShzZWxmLmNhdGVnb3JpZXMsIGNhdGVnb3J5TmFtZSk7XHJcblx0fTtcclxuXHRcclxuXHRtb2R1bGUuZXhwb3J0cyA9IE1lbnVWaWV3TW9kZWw7XHJcblxuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0ZXhwb3J0cy5nZXRNb2RlbEFycmF5ID0gZnVuY3Rpb24gZ2V0TW9kZWxBcnJheShwYXJhbXMpIHtcclxuXHQgICAgdmFyIG9iaiA9IHBhcmFtcy5vYmogfHwge30sXHJcblx0ICAgICAgICBhcnIgPSBwYXJhbXMuYXJyIHx8IFtdLFxyXG5cdCAgICAgICAgcHJvcCA9IHBhcmFtcy5wcm9wIHx8ICduYW1lJztcclxuXHRcclxuXHQgICAgZm9yICh2YXIgaSBpbiBvYmopIHtcclxuXHQgICAgICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGkpKSB7IGNvbnRpbnVlOyB9XHJcblx0XHJcblx0ICAgICAgICB2YXIgaXRlbSA9IGFyci5maW5kKGZ1bmN0aW9uIChtMSkge1xyXG5cdCAgICAgICAgICAgIHJldHVybiBtMS5uYW1lID09PSBvYmpbaV1bcHJvcF07XHJcblx0ICAgICAgICB9KTtcclxuXHRcclxuXHQgICAgICAgIGlmIChpdGVtKSB7IGNvbnRpbnVlOyB9XHJcblx0XHJcblx0ICAgICAgICBhcnIucHVzaCh7XHJcblx0ICAgICAgICAgICAgY2hlY2tlZDoga28ub2JzZXJ2YWJsZShmYWxzZSksXHJcblx0ICAgICAgICAgICAgbmFtZTogb2JqW2ldW3Byb3BdXHJcblx0ICAgICAgICB9KTtcclxuXHQgICAgfVxyXG5cdCAgICByZXR1cm4gYXJyO1xyXG5cdH07XHJcblx0XHJcblx0ZXhwb3J0cy5jaGVja0FjdGl2ZSA9IGZ1bmN0aW9uIGNoZWNrQWN0aXZlKGtvQXJyLCBhY3RpdmVFbGVtKSB7XHJcblx0ICAgIGlmICgha29BcnIgJiYgIWFjdGl2ZUVsZW0pIHtyZXR1cm4gZmFsc2U7fVxyXG5cdFxyXG5cdCAgICBrb0Fycihrb0FycigpLm1hcChmdW5jdGlvbiAob2JqKSB7XHJcblx0ICAgICAgICBpZiAob2JqLm5hbWUgPT09IGFjdGl2ZUVsZW0pIHtcclxuXHQgICAgICAgICAgICBvYmouY2hlY2tlZCh0cnVlKTtcclxuXHQgICAgICAgIH0gZWxzZSB7XHJcblx0ICAgICAgICAgICAgb2JqLmNoZWNrZWQoZmFsc2UpO1xyXG5cdCAgICAgICAgfVxyXG5cdCAgICAgICAgcmV0dXJuIG9iajtcclxuXHQgICAgfSkpO1xyXG5cdH07XHJcblx0XHJcblxuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIHNlbGY7XHJcblx0dmFyIGJhc2U7XHJcblx0XHJcblx0LyoqXHJcblx0ICogUGFyYW1zIFZpZXctTW9kZWxcclxuXHQgKiBAcGFyYW0gcmF3XHJcblx0ICogQHBhcmFtIG1ldGhvZFxyXG5cdCAqIEBwYXJhbSBwYXJhbXNcclxuXHQgKiBAY29uc3RydWN0b3JcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBQYXJhbXNWaWV3TW9kZWwocmF3LCBtZXRob2QsIHBhcmFtcykge1xyXG5cdCAgYmFzZSA9IHJhdztcclxuXHQgIHNlbGYgPSB0aGlzO1xyXG5cdCAgdGhpcy5hbmltYXRpb25TcGVlZCA9IDIwMDtcclxuXHRcclxuXHQgIC8vIG9ic2VydmFibGVzXHJcblx0ICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcclxuXHQgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG5cdCAgdGhpcy5pc0hpZGRlbiA9IGtvLm9ic2VydmFibGUodHJ1ZSk7XHJcblx0ICB0aGlzLnBhcmFtSW5Gb2N1cyA9IGtvLm9ic2VydmFibGUoJycpO1xyXG5cdFxyXG5cdCAgLy8gY29tcHV0ZWRcclxuXHQgIHRoaXMucGFyYW1zTW9kZWwgPSBrby5jb21wdXRlZCh0aGlzLnVwZGF0ZVBhcmFtc01vZGVsLCB0aGlzKTtcclxuXHQgIHRoaXMucGFyYW1JbkZvY3VzKHRoaXMucGFyYW1zTW9kZWwoKVswXSk7XHJcblx0ICB0aGlzLmlzRGlydHkgPSBrby5jb21wdXRlZCh0aGlzLmNoZWNrRGlydHksIHRoaXMpO1xyXG5cdH1cclxuXHRcclxuXHRQYXJhbXNWaWV3TW9kZWwucHJvdG90eXBlLmNoZWNrRGlydHkgPSBmdW5jdGlvbiAoKSB7XHJcblx0ICB2YXIgZGlydHkgPSB0aGlzLnBhcmFtc01vZGVsKCkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XHJcblx0ICAgIHJldHVybiBpdGVtLmlzRGlydHkoKSA9PT0gdHJ1ZTtcclxuXHQgIH0pO1xyXG5cdCAgcmV0dXJuIGRpcnR5Lmxlbmd0aCA+IDA7XHJcblx0fTtcclxuXHRcclxuXHQvKipcclxuXHQgKiBJbml0aWFsIGJ1aWxkIG9mIFNlbGVjdCBNb2RlbFxyXG5cdCAqL1xyXG5cdFBhcmFtc1ZpZXdNb2RlbC5wcm90b3R5cGUudXBkYXRlUGFyYW1zTW9kZWwgPSBmdW5jdGlvbiAoYSxiKSB7XHJcblx0ICB2YXIgb2JqID0gdGhpcy5tZXRob2QoKS5wYXJhbWV0ZXJzIHx8IHt9LFxyXG5cdCAgICBhcnIgPSBbXTtcclxuXHRcclxuXHQgIGZvciAodmFyIGkgaW4gb2JqKSB7XHJcblx0ICAgIHZhciB2YWx1ZSA9IG9ialtpXTtcclxuXHRcclxuXHQgICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoaSkpIHtcclxuXHQgICAgICBjb250aW51ZTtcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YWx1ZS52YWx1ZSA9IHZhbHVlLnZhbHVlIHx8IGtvLm9ic2VydmFibGUoJycpO1xyXG5cdFxyXG5cdCAgICAvLyAnZGlydHknIGZsYWcgd2F0Y2hlciBmb3IgY3VycmVudCBmaWVsZFxyXG5cdCAgICB2YWx1ZS5pc0RpcnR5ID0ga28ucHVyZUNvbXB1dGVkKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICByZXR1cm4gISF0aGlzLnZhbHVlKCkudHJpbSgpLmxlbmd0aDtcclxuXHQgICAgfSwgdmFsdWUpO1xyXG5cdFxyXG5cdCAgICAvLyBhZGQgY2FsZW5kYXIgYnRuIGZvciBjdXJyZW50IGZpZWxkXHJcblx0ICAgIHZhbHVlLmhhc0NhbGVuZGFyID0gaS5zZWFyY2goLyhkYXRlfHRpbWUpL2dtaSkgIT0gLTE7XHJcblx0XHJcblx0ICAgIC8vIGFkZCBwb3AtdXAgYnRuIGZvciBjdXJyZW50IGZpZWxkXHJcblx0ICAgIHZhbHVlLmhhc1BvcFVwID0gaS5zZWFyY2goLyhhdHRyYWN0aW9uSWR8dmVudWVJZCkvZ21pKSAhPSAtMTtcclxuXHRcclxuXHQgICAgYXJyLnB1c2godmFsdWUpO1xyXG5cdCAgfVxyXG5cdFxyXG5cdCAgLy8gcHJlcGFyZSBvdXRwdXQgZm9yIHJlcXVlc3RcclxuXHQgIHRoaXMucHJlcGFyZVVybFBhaXJzKGFyciwgdGhpcy5wYXJhbXMpO1xyXG5cdFxyXG5cdCAgLy8gY2F0Y2ggcGFyYW1zIGZvY3VzIGZvciBhYm91dCBzZWN0aW9uXHJcblx0ICB0aGlzLnBhcmFtSW5Gb2N1cyhhcnJbMF0pO1xyXG5cdCAgLy8gdGhpcy5vbkVudGVyS2V5RG93bigpXHJcblx0ICByZXR1cm4gYXJyO1xyXG5cdH07XHJcblx0XHJcblx0LyoqXHJcblx0ICogRW50ZXIga2V5IGhhbmRsZXJcclxuXHQgKiBAcGFyYW0gbW9kZWxcclxuXHQgKiBAcGFyYW0gZXZlbnRcclxuXHQgKi9cclxuXHRQYXJhbXNWaWV3TW9kZWwucHJvdG90eXBlLm9uRW50ZXJLZXlEb3duID0gZnVuY3Rpb24gKG1vZGVsLCBldmVudCkge1xyXG5cdCAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XHJcblx0ICAgICQoJyNhcGktZXhwLWdldC1idG4nKS50cmlnZ2VyKCdjbGljaycpO1xyXG5cdCAgfSBlbHNlIHtcclxuXHQgICAgcmV0dXJuIHRydWU7XHJcblx0ICB9XHJcblx0fTtcclxuXHRcclxuXHQvKipcclxuXHQgKiBTbGlkZSB0b2dnbGUgZm9yIHBhcmFtcyBjb250YWluZXIgbWV0aG9kXHJcblx0ICogQHBhcmFtIHZpZXdNb2RlbFxyXG5cdCAqIEBwYXJhbSBldmVudFxyXG5cdCAqL1xyXG5cdFBhcmFtc1ZpZXdNb2RlbC5wcm90b3R5cGUuc2xpZGVUb2dnbGUgPSBmdW5jdGlvbiAodmlld01vZGVsLCBldmVudCkge1xyXG5cdCAgJChldmVudC5jdXJyZW50VGFyZ2V0KVxyXG5cdCAgICAucGFyZW50cygnLmpzLXNsaWRlLWNvbnRyb2wnKVxyXG5cdCAgICAuZmluZCgnLmpzLXNsaWRlLXdyYXBwZXInKVxyXG5cdCAgICAuc2xpZGVUb2dnbGUodmlld01vZGVsLmFuaW1hdGlvblNwZWVkLCBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgdmlld01vZGVsLmlzSGlkZGVuKCF2aWV3TW9kZWwuaXNIaWRkZW4oKSk7XHJcblx0ICAgIH0pO1xyXG5cdH07XHJcblx0XHJcblx0LyoqXHJcblx0ICogTWFjaGVzIGZvY3VzZWQgcGFyYW1cclxuXHQgKiBAcGFyYW0gaXRlbVxyXG5cdCAqL1xyXG5cdFBhcmFtc1ZpZXdNb2RlbC5wcm90b3R5cGUub25Gb2N1cyA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcblx0ICBzZWxmLnBhcmFtSW5Gb2N1cyhpdGVtKTtcclxuXHR9O1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZpbHRlcnMgcGFyYW1zIGJ5IGRlZmluZWQgdmFsdWVcclxuXHQgKiBAcGFyYW0gYXJyXHJcblx0ICogQHBhcmFtIGtvT2JzXHJcblx0ICogQHJldHVybnMge2Jvb2xlYW59XHJcblx0ICovXHJcblx0UGFyYW1zVmlld01vZGVsLnByb3RvdHlwZS5wcmVwYXJlVXJsUGFpcnMgPSBmdW5jdGlvbiAoYXJyLCBrb09icykge1xyXG5cdCAgaWYgKCFhcnIgJiYgIWtvT2JzKSB7XHJcblx0ICAgIHJldHVybiBmYWxzZTtcclxuXHQgIH1cclxuXHRcclxuXHQgIHJldHVybiBrb09icyhhcnIuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XHJcblx0ICAgIHJldHVybiAoaXRlbS52YWx1ZSgpIHx8IGl0ZW0uZGVmYXVsdCk7XHJcblx0ICB9KSk7XHJcblx0fTtcclxuXHRcclxuXHRtb2R1bGUuZXhwb3J0cyA9IFBhcmFtc1ZpZXdNb2RlbDtcclxuXG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XHJcblx0XHJcblx0dmFyIGhmID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcclxuXHR2YXIgc2VsZjtcclxuXHR2YXIgYmFzZTtcclxuXHR2YXIgY2F0ZWdvcnk7XHJcblx0XHJcblx0LyoqXHJcblx0ICogTWV0aG9kcyBWaWV3LU1vZGVsXHJcblx0ICogQHBhcmFtIHJhd1xyXG5cdCAqIEBwYXJhbSBjYXRlZ29yeVxyXG5cdCAqIEBwYXJhbSBtZXRob2RcclxuXHQgKiBAY29uc3RydWN0b3JcclxuXHQgKi9cclxuXHRmdW5jdGlvbiBNZXRob2RzVmlld01vZGVsKHJhdywgY2F0ZWdvcnksIG1ldGhvZCkge1xyXG5cdCAgc2VsZiA9IHRoaXM7XHJcblx0ICBiYXNlID0gcmF3O1xyXG5cdFxyXG5cdCAgLy8gb2JzZXJ2YWJsZXNcclxuXHQgIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcclxuXHQgIHRoaXMubWV0aG9kID0gbWV0aG9kO1xyXG5cdCAgdGhpcy50b2dnbGVQb3BVcCA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xyXG5cdCAgdGhpcy5yYWRpb3NNb2RlbCA9IGtvLm9ic2VydmFibGVBcnJheShbXSk7XHJcblx0ICB0aGlzLnNlbGVjdE1vZGVsID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuXHQgIHRoaXMudXBkYXRlTW9kZWwodGhpcy5jYXRlZ29yeSgpKTtcclxuXHQgIHRoaXMuY2F0ZWdvcnkuc3Vic2NyaWJlKHRoaXMudXBkYXRlTW9kZWwpO1xyXG5cdH1cclxuXHRcclxuXHQvKipcclxuXHQgKiBPbiBjYXRlZ29yeSBjaGFuZ2UgaGFuZGxlclxyXG5cdCAqIE1ldGhvZHMgVmlldy1Nb2RlbCBtZXRob2RcclxuXHQgKiBAcGFyYW0gY2F0ZWdvcnlcclxuXHQgKi9cclxuXHRNZXRob2RzVmlld01vZGVsLnByb3RvdHlwZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG5cdCAgLy8gaW5pdGlhbCByYWRpb3MgbW9kZWxcclxuXHQgIHNlbGYudXBkYXRlUmFkaW9zTW9kZWwoYmFzZVtjYXRlZ29yeV0pO1xyXG5cdCAgLy8gaW5pdGlhbCBzZWxlY3QgbW9kZWwgKGZpcnN0IG1ldGhvZCBpbiBmaXJzdCBzZWN0aW9uIGZvciBzdGFydClcclxuXHQgIHNlbGYudXBkYXRlU2VsZWN0KHNlbGYucmFkaW9zTW9kZWwoKVswXSk7XHJcblx0fTtcclxuXHRcclxuXHQvKipcclxuXHQgKiBPbmNoYW5nZSBoYW5kbGVyIGZvciBSYWRpbyBidXR0b25zXHJcblx0ICogQHBhcmFtIGl0ZW1cclxuXHQgKi9cclxuXHRNZXRob2RzVmlld01vZGVsLnByb3RvdHlwZS5vbmNoYW5nZVJhZGlvcyA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcblx0ICAvL3VwZGF0ZSBSYWRpb3MgTW9kZWxcclxuXHQgIGhmLmNoZWNrQWN0aXZlKHNlbGYucmFkaW9zTW9kZWwsIGl0ZW0ubmFtZSk7XHJcblx0ICAvL3VwZGF0ZSBTZWxlY3QgTW9kZWxcclxuXHQgIHNlbGYudXBkYXRlU2VsZWN0KGl0ZW0pO1xyXG5cdH07XHJcblx0XHJcblx0LyoqXHJcblx0ICogSW5pdGlhbCBidWlsZCBvZiBSYWRpb3MgTW9kZWxcclxuXHQgKiBAcGFyYW0gcGFyYW1cclxuXHQgKiBAcmV0dXJucyB7QXJyYXl9XHJcblx0ICovXHJcblx0TWV0aG9kc1ZpZXdNb2RlbC5wcm90b3R5cGUudXBkYXRlUmFkaW9zTW9kZWwgPSBmdW5jdGlvbiAocGFyYW0pIHtcclxuXHQgIHZhciBvYmogPSBwYXJhbSB8fCB7fSxcclxuXHQgICAgYXJyID0gW107XHJcblx0XHJcblx0ICBmb3IgKHZhciBpIGluIG9iaikge1xyXG5cdCAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShpKSkgeyBjb250aW51ZTsgfVxyXG5cdCAgICB2YXIgaXRlbSA9IHtcclxuXHQgICAgICBjaGVja2VkOiBrby5vYnNlcnZhYmxlKGkgPT09ICdBTEwnKSxcclxuXHQgICAgICBuYW1lOiBpXHJcblx0ICAgIH07XHJcblx0XHJcblx0ICAgIGlmIChpID09PSAnQUxMJykge1xyXG5cdCAgICAgIGFyci51bnNoaWZ0KGl0ZW0pXHJcblx0ICAgIH0gZWxzZSB7XHJcblx0ICAgICAgYXJyLnB1c2goaXRlbSk7XHJcblx0ICAgIH1cclxuXHQgIH1cclxuXHQgIHRoaXMucmFkaW9zTW9kZWwoYXJyKTtcclxuXHQgIHJldHVybiBhcnI7XHJcblx0fTtcclxuXHRcclxuXHQvKipcclxuXHQgKiBJbml0aWFsIGJ1aWxkIG9mIFNlbGVjdCBNb2RlbFxyXG5cdCAqIEBwYXJhbSBpdGVtXHJcblx0ICovXHJcblx0TWV0aG9kc1ZpZXdNb2RlbC5wcm90b3R5cGUudXBkYXRlU2VsZWN0ID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuXHQgIHZhciBvYmogPSBiYXNlW3NlbGYuY2F0ZWdvcnkoKV1baXRlbS5uYW1lXXx8IHt9LFxyXG5cdCAgICBhcnIgPSBbXSxcclxuXHQgICAgY291bnQgPSAwO1xyXG5cdFxyXG5cdCAgZm9yICh2YXIgaSBpbiBvYmopIHtcclxuXHQgICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoaSkpIHsgY29udGludWU7IH1cclxuXHQgICAgdmFyIHByb3BlcnR5ID0gb2JqW2ldO1xyXG5cdCAgICBhcnIucHVzaCh7XHJcblx0ICAgICAgY2hlY2tlZDoga28ub2JzZXJ2YWJsZSghY291bnQpLFxyXG5cdCAgICAgIG5hbWU6IHByb3BlcnR5Lm5hbWUsXHJcblx0ICAgICAgaWQ6IHByb3BlcnR5LmlkLFxyXG5cdCAgICAgIGxpbms6IHByb3BlcnR5LmRvY3VtZW50YXRpb24sXHJcblx0ICAgICAgYWJvdXQ6IHByb3BlcnR5LmRlc2NyaXB0aW9uLFxyXG5cdCAgICAgIGNhdGVnb3J5OiBwcm9wZXJ0eS5jYXRlZ29yeSxcclxuXHQgICAgICBtZXRob2Q6IHByb3BlcnR5Lm1ldGhvZFxyXG5cdCAgICB9KTtcclxuXHRcclxuXHQgICAgLy8gLy8gc2V0IGdsb2JhbCBvYnNlcnZhYmxlXHJcblx0ICAgICFjb3VudCAmJiB0aGlzLm1ldGhvZChiYXNlW3Byb3BlcnR5LmNhdGVnb3J5XVtwcm9wZXJ0eS5tZXRob2RdW3Byb3BlcnR5LmlkXSk7XHJcblx0XHJcblx0ICAgIGNvdW50Kys7XHJcblx0ICB9XHJcblx0ICBzZWxmLnNlbGVjdE1vZGVsKGFycik7XHJcblx0fTtcclxuXHRcclxuXHRNZXRob2RzVmlld01vZGVsLnByb3RvdHlwZS5vblNlbGVjdE1ldGhvZCA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcblx0ICBoZi5jaGVja0FjdGl2ZShzZWxmLnNlbGVjdE1vZGVsLCBpdGVtLm5hbWUpO1xyXG5cdCAgc2VsZi5tZXRob2QoYmFzZVtpdGVtLmNhdGVnb3J5XVtpdGVtLm1ldGhvZF1baXRlbS5pZF0pO1xyXG5cdH07XHJcblx0XHJcblx0TWV0aG9kc1ZpZXdNb2RlbC5wcm90b3R5cGUub25BYm91dENsaWNrID0gZnVuY3Rpb24gKG1vZGVsLCBldmVudCkge1xyXG5cdCAgbW9kZWwudG9nZ2xlUG9wVXAoIW1vZGVsLnRvZ2dsZVBvcFVwKCkpO1xyXG5cdH07XHJcblx0XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBNZXRob2RzVmlld01vZGVsO1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXHJcblx0ICogQ3VzdG9tIFNlbGVjdCBjb21wb25lbnRcclxuXHQgKi9cclxuXHR2YXIgc2VsZjtcclxuXHRcclxuXHQvKipcclxuXHQgKiBDdXN0b20gU2VsZWN0IFZpZXctTW9kZWxcclxuXHQgKiBAcGFyYW0gcGFyYW1zXHJcblx0ICogQGNvbnN0cnVjdG9yXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gQ3VzdG9tU2VsZWN0KHBhcmFtcykge1xyXG5cdCAgc2VsZiA9IHRoaXM7XHJcblx0XHJcblx0ICB0aGlzLmFuaW1hdGlvblNwZWVkID0gcGFyYW1zLmFuaW1hdGlvblNwZWVkIHx8IDIwMDtcclxuXHRcclxuXHQgIC8vb2JzZXJ2YWJsZXNcclxuXHQgIHRoaXMuc2VsZWN0TW9kZWwgPSBwYXJhbXMub3B0aW9ucyB8fCBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG5cdCAgdGhpcy5wbGFjZWhvbGRlciA9IGtvLm9ic2VydmFibGUocGFyYW1zLnBsYWNlaG9sZGVyIHx8ICcnKTtcclxuXHQgIHRoaXMub25zZWxlY3QgPSBwYXJhbXMub25zZWxlY3QgfHwgZnVuY3Rpb24gKGl0ZW0pIHsgY29uc29sZS5sb2coaXRlbSArJ3NlbGVjdGVkIScpfTtcclxuXHQgIHRoaXMuc2VsZWN0ZWQgPSBrby5vYnNlcnZhYmxlKHRoaXMuc2VsZWN0TW9kZWwoKVswXSk7XHJcblx0ICB0aGlzLmlzT25lT3B0aW9uID0ga28ucHVyZUNvbXB1dGVkKGZ1bmN0aW9uICgpIHtcclxuXHQgICAgcmV0dXJuIHRoaXMuc2VsZWN0TW9kZWwoKS5sZW5ndGggPCAyOyAvLyBtb3JlIHRoYW4gb25lIG9wdGlvblxyXG5cdCAgfSwgdGhpcyk7XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGZpbmRFbGVtZW50KGV2ZW50KSB7XHJcblx0ICB2YXIgcGFyZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuanMtY3VzdG9tLXNlbGVjdCcpO1xyXG5cdCAgcmV0dXJuIHtcclxuXHQgICAgd3JhcHBlcjogcGFyZW50LmZpbmQoJy5qcy1jdXN0b20tc2VsZWN0LXdyYXBwZXInKSxcclxuXHQgICAgbGF5ZXI6IHBhcmVudC5maW5kKCcuanMtY3VzdG9tLXNlbGVjdC1sYXllcicpXHJcblx0ICB9XHJcblx0fVxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEN1c3RvbSBTZWxlY3QgVmlldy1Nb2RlbCBtZXRob2RcclxuXHQgKiBAcGFyYW0gdmlld01vZGVsXHJcblx0ICogQHBhcmFtIGV2ZW50XHJcblx0ICovXHJcblx0Q3VzdG9tU2VsZWN0LnByb3RvdHlwZS5zbGlkZVRvZ2dsZSA9IGZ1bmN0aW9uKHZpZXdNb2RlbCwgZXZlbnQpIHtcclxuXHQgIGlmICh2aWV3TW9kZWwuaXNPbmVPcHRpb24oKSkge3JldHVybiBmYWxzZTt9XHJcblx0ICB2YXIgZWwgPSBmaW5kRWxlbWVudChldmVudCk7XHJcblx0ICAgIGVsLndyYXBwZXIuc2xpZGVUb2dnbGUodmlld01vZGVsLmFuaW1hdGlvblNwZWVkKTtcclxuXHQgICAgZWwubGF5ZXIudG9nZ2xlQ2xhc3MoJ2hpZGRlbicpO1xyXG5cdH07XHJcblx0XHJcblx0LyoqXHJcblx0ICogQ3VzdG9tIFNlbGVjdCBWaWV3LU1vZGVsIG1ldGhvZFxyXG5cdCAqIEBwYXJhbSBpdGVtXHJcblx0ICogQHBhcmFtIGV2ZW50XHJcblx0ICovXHJcblx0Q3VzdG9tU2VsZWN0LnByb3RvdHlwZS5zZWxlY3RJdGVtID0gZnVuY3Rpb24gKGl0ZW0sIGV2ZW50KSB7XHJcblx0ICB2YXIgc2VsZiA9IHRoaXM7XHJcblx0ICB0aGlzLnNlbGVjdGVkKGl0ZW0pO1xyXG5cdCAgLy8gcnVuIGhhbmRsZXJcclxuXHQgIHRoaXMub25zZWxlY3QoaXRlbSk7XHJcblx0ICAvLyBzbGlkZSB1cFxyXG5cdCAgdGhpcy5zbGlkZVRvZ2dsZShzZWxmLCBldmVudCk7XHJcblx0fTtcclxuXHRcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGtvLmNvbXBvbmVudHMucmVnaXN0ZXIoJ2N1c3RvbS1zZWxlY3QnLCB7XHJcblx0ICB2aWV3TW9kZWw6IEN1c3RvbVNlbGVjdCxcclxuXHQgIHRlbXBsYXRlOiAoW1xyXG5cdCAgICAnPGRpdiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdCBqcy1jdXN0b20tc2VsZWN0XCI+JyxcclxuXHQgICAgICAnPGRpdiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdC13cmFwcGVyXCI+JyxcclxuXHQgICAgICAgICc8c2VsZWN0IGRhdGEtYmluZD1cIm9wdGlvbnM6IHNlbGVjdE1vZGVsLCBvcHRpb25zVGV4dDogXFwnbmFtZVxcJywgdmFsdWU6IHNlbGVjdGVkXCIgY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3RfX2ZpZWxkXCIgbmFtZT1cImFwaS1leHAtbWV0aG9kXCI+PC9zZWxlY3Q+JyxcclxuXHQgICAgICAgICc8c3BhbiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdF9fcGxhY2Vob2xkZXJcIj4nLFxyXG5cdCAgICAgICAgICAnPGlucHV0IGRhdGEtYmluZD1cImV2ZW50OiB7Y2xpY2s6IHNsaWRlVG9nZ2xlfSwgYXR0cjoge3ZhbHVlOiBzZWxlY3RlZCgpLm5hbWUsIGRpc2FibGVkOiBpc09uZU9wdGlvbn1cIiB0eXBlPVwidGV4dFwiIHZhbHVlPVwiXCIgcmVhZG9ubHk9XCJcIj4nLFxyXG5cdCAgICAgICAgICAnPGIgZGF0YS1iaW5kPVwiY3NzOiB7aGlkZGVuOiBpc09uZU9wdGlvbn1cIiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdF9fY2hldnJvblwiPiZuYnNwOzwvYj4nLFxyXG5cdCAgICAgICAgJzwvc3Bhbj4nLFxyXG5cdCAgICAgICAgJzx1bCBkYXRhLWJpbmQ9XCJmb3JlYWNoOiBzZWxlY3RNb2RlbFwiIGNsYXNzPVwiYXBpLWV4cC1jdXN0b20tc2VsZWN0X19saXN0IGpzLWN1c3RvbS1zZWxlY3Qtd3JhcHBlclwiPicsXHJcblx0ICAgICAgICAgICc8bGkgZGF0YS1iaW5kPVwiY3NzOiB7XFwnYWN0aXZlXFwnOiBjaGVja2VkfVwiIGNsYXNzPVwiYXBpLWV4cC1jdXN0b20tc2VsZWN0X19pdGVtXCI+JyxcclxuXHQgICAgICAgICAgICAnPGJ1dHRvbiBkYXRhLWJpbmQ9XCJldmVudDoge2NsaWNrOiAkcGFyZW50LnNlbGVjdEl0ZW0uYmluZCgkcGFyZW50KX0sIHRleHQ6IG5hbWUsIGNzczoge1xcJ2FjdGl2ZVxcJzogY2hlY2tlZCgpfSwgYXR0cjoge1xcJ2RhdGEtdmFsdWVcXCc6IG5hbWV9XCIgIGNsYXNzPVwiYXBpLWV4cC1jdXN0b20tc2VsZWN0X19pdGVtLWxhYmVsXCIgaHJlZj1cIiNcIj48L2J1dHRvbj4nLFxyXG5cdCAgICAgICAgICAgICc8YSBkYXRhLWJpbmQ9XCJhdHRyOiB7aHJlZjogbGlua30sIGNzczoge1xcJ2hpZGRlblxcJzogIWxpbmt9XCIgY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3RfX2l0ZW0tbGlua1wiIHRhcmdldD1cIl9ibGFua1wiPiZuYnNwOzwvYT4nLFxyXG5cdCAgICAgICAgICAnPC9saT4nLFxyXG5cdCAgICAgICAgJzwvdWw+JyxcclxuXHQgICAgICAnPC9kaXY+JyxcclxuXHQgICAgICAnPGRpdiBkYXRhLWJpbmQ9XCJjbGljazogc2xpZGVUb2dnbGVcIiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdC1sYXllciBqcy1jdXN0b20tc2VsZWN0LWxheWVyIGhpZGRlblwiPjwvZGl2PicsXHJcblx0ICAgICc8L2Rpdj4nXHJcblx0ICBdKS5qb2luKCcnKVxyXG5cdH0pO1xyXG5cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc2NyaXB0LmpzXG4gKiovIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCBlNmNhNmQ0NDYxM2NiOWI4YmMwOFxuICoqLyIsIi8qKlxyXG4gKiBNYWluIGZpbGUgZm9yIEFwaSBFeHBscmVyIHYyLjBcclxuICogRm9yIGRldmVsb3BtZW50IHBsZWFzZSB1c2UgV2VicGFjayB0byBidW5kbGUgYWxsIG1vZHVsZXNcclxuICogSXQgY2FuIGJlIG1hZGUgdXNpbmcgbnBtIHNjcmlwdHMgY21kIC0gJ3dlYnBhY2snXHJcbiAqL1xyXG4vLyBDb21wb25lbnRzXHJcbnZhciBiYXNlID0gcmVxdWlyZSgnLi8uLi9jb21wb25lbnRzL2NvbmZpZycpO1xyXG52YXIgYXBpS2V5ID0gcmVxdWlyZSgnLi8uLi9jb21wb25lbnRzL2FwaWtleScpO1xyXG52YXIgYWpheFNlcnZpY2UgPSByZXF1aXJlKCcuLy4uL2NvbXBvbmVudHMvYWpheFNlcnZpY2UnKTtcclxuXHJcbi8vIFZpZXcgTW9kZWxzXHJcbnZhciBNZW51Vmlld01vZGVsID0gcmVxdWlyZSgnLi8uLi9WaWV3TW9kZWxzL21lbnVWaWV3TW9kZWwnKTtcclxudmFyIFBhcmFtc1ZpZXdNb2RlbCA9IHJlcXVpcmUoJy4vcGFyYW1zVmlld01vZGVsJyk7XHJcbnZhciBNZXRob2RzVmlld01vZGVsID0gcmVxdWlyZSgnLi9tZXRob2RzVmlld01vZGVsJyk7XHJcblxyXG4vLyBNb2R1bGVzXHJcbnZhciBjdXN0b21TZWxlY3QgPSByZXF1aXJlKCcuLy4uL2NvbXBvbmVudHMvY3VzdG9tU2VsZWN0Jyk7XHJcblxyXG4vKipcclxuICogTWFpbiBhcHBsaWNhdGlvbiB2aWV3LW1vZGVsXHJcbiAqIEBwYXJhbSBvYmoge29iamVjdH0gZ2xvYmFsIGRhdGEgb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBBcHBWaWV3TW9kZWwob2JqKSB7XHJcbiAgdmFyIGJhc2UgPSBvYmogfHwge307XHJcbiAgc2VsZiA9IHRoaXM7XHJcbiAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XHJcblxyXG4gIC8vIG9ic2VydmFibGVzXHJcbiAgdGhpcy5zZWxlY3RlZENhdGVnb3J5ID0ga28ub2JzZXJ2YWJsZSgnJyk7XHJcbiAgdGhpcy5zZWxlY3RlZE1ldGhvZCA9IGtvLm9ic2VydmFibGUoJycpO1xyXG4gIHRoaXMuc2VsZWN0ZWRQYXJhbXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG5cclxuICAvLyBzdWItbW9kZWxzXHJcbiAgdGhpcy5tZW51ID0gbmV3IE1lbnVWaWV3TW9kZWwoYmFzZSwgdGhpcy5zZWxlY3RlZENhdGVnb3J5KTtcclxuICB0aGlzLm1ldGhvZHMgPSBuZXcgTWV0aG9kc1ZpZXdNb2RlbChiYXNlLCB0aGlzLnNlbGVjdGVkQ2F0ZWdvcnksIHRoaXMuc2VsZWN0ZWRNZXRob2QpO1xyXG4gIHRoaXMucGFyYW1zID0gbmV3IFBhcmFtc1ZpZXdNb2RlbChiYXNlLCB0aGlzLnNlbGVjdGVkTWV0aG9kLCB0aGlzLnNlbGVjdGVkUGFyYW1zKTtcclxuXHJcbiAgLy8gY29tcHV0ZWRcclxuICB0aGlzLnNlbmRCdXR0b25UZXh0ID0ga28ucHVyZUNvbXB1dGVkKHRoaXMuZ2V0TWV0aG9kTmFtZSwgdGhpcyk7XHJcbiAgXHJcbiAgdGhpcy5VUkwgPSBrby5jb21wdXRlZCh0aGlzLmdldFVybCwgdGhpcyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZW5kIHJlcXVlc3QgbWV0aG9kXHJcbiAqL1xyXG5BcHBWaWV3TW9kZWwucHJvdG90eXBlLm9uQ2xpY2tTZW5kQnRuID0gZnVuY3Rpb24gKCkge1xyXG4gIGFqYXhTZXJ2aWNlKHRoaXMuVVJMKCkpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldHMgY3VycmVudCBtZXRob2QgbmFtZVxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gKi9cclxuQXBwVmlld01vZGVsLnByb3RvdHlwZS5nZXRNZXRob2ROYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiB0aGlzLnNlbGVjdGVkTWV0aG9kKCkubWV0aG9kLnRvTG93ZXJDYXNlKCk7XHJcbn07XHJcblxyXG4vKipcclxuICogR2V0cyByYXcgdXJsIGRhdGEgYXJyYXlcclxuICogQHJldHVybnMgeypbXX1cclxuICovXHJcbkFwcFZpZXdNb2RlbC5wcm90b3R5cGUuZ2V0VXJsID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiBbXHJcbiAgICB0aGlzLnNlbGVjdGVkTWV0aG9kKCksXHJcbiAgICB0aGlzLmFwaUtleSxcclxuICAgIHRoaXMuc2VsZWN0ZWRQYXJhbXMoKVxyXG4gIF07XHJcbn07XHJcblxyXG4vKipcclxuICogQWN0aXZhdGVzIGtub2Nrb3V0LmpzXHJcbiAqL1xyXG5rby5hcHBseUJpbmRpbmdzKG5ldyBBcHBWaWV3TW9kZWwoYmFzZSkpO1xyXG5cclxuLyoqXHJcbiAqIGV4cG9ydHMgZ2xvYmFsIHZhcmlhYmxlXHJcbiAqL1xyXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2U7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NjcmlwdHMvYXBpLWV4cGxvcmVyL3YyL1ZpZXdNb2RlbHMvbWFpbi5qc1xuICoqIG1vZHVsZSBpZCA9IDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlID0ge307XHJcbnZhciBDT05GSUdfVVJMID0gJy4uLy4uL2FwaWRlc2NyaXB0aW9uLnhtbCc7XHJcblxyXG4vL2dldHMgaW1wb3J0YW50IGVsZW1lbnRzIGZyb20gV0FETCBkb2N1bWVudCBhbmQgd3JpdGVzIHRoZW0gaW50byBnbG9iYWwgdmFyaWFibGVzXHJcbnZhciBwYXJzZVhNTERvYyA9IGZ1bmN0aW9uICh4bWwpIHtcclxuICAvL2dldCBhbGwgQVBJc1xyXG4gIHZhciBBUElzID0gJCh4bWwpLmZpbmQoXCJyZXNvdXJjZXNcIiksXHJcbiAgICBpc0ZpcnN0TWV0aG9kID0gdHJ1ZTsgLy92YXJpYWJsZSB0byBzdG9yZSB0aGUgdmVyeSBmaXJzdCBtZXRob2QgZm91bmRcclxuXHJcbiAgQVBJcy5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAvL2dldCBhbGwgbWV0aG9kcyBpbiB0aGUgQVBJXHJcbiAgICB2YXIgbWV0aG9kcyA9ICQodGhpcykuZmluZCgncmVzb3VyY2UnKTtcclxuXHJcbiAgICBtZXRob2RzLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpe1xyXG4gICAgICB2YXIgbWUgPSAkKGVsZW1lbnQpLCAvL21ldGhvZFxyXG4gICAgICAgIG1ldGhvZCA9ICQobWUuZmluZCgnbWV0aG9kJylbMF0pLCAvL2dldCBtZXRob2QgZGV0YWlscyBvYmplY3RcclxuICAgICAgICBjYXRlZ29yeSA9IG1ldGhvZC5maW5kKCdbcHJpbWFyeT1cInRydWVcIl0nKS50ZXh0KCksIC8vZ2V0IEFQSSBuYW1lXHJcbiAgICAgICAgcGFyYW1zID0gbWUuZmluZCgncGFyYW0nKSwgLy9tZXRob2QgcGFyYW1zXHJcbiAgICAgICAgcGFyYW1ldGVycyA9IHt9OyAvL3RlbXBvcmFyeSBvYmplY3QgdG8gc3RvcmUgcGFyYW0gZGF0YVxyXG5cclxuICAgICAgcGFyYW1zLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpeyAvL2ZpbGwgcGFyYW0gb2JqZWN0IHdpdGggcmVxdWlyZWQgZGF0YVxyXG4gICAgICAgIHZhciB0aGF0ID0gJCh0aGlzKTtcclxuICAgICAgICBwYXJhbWV0ZXJzW3RoYXQuYXR0cignbmFtZScpXSA9IHtcclxuICAgICAgICAgICduYW1lJzogdGhhdC5hdHRyKCduYW1lJyksXHJcbiAgICAgICAgICAncmVxdWlyZWQnOiB0aGF0LmF0dHIoJ3JlcXVpcmVkJyksXHJcbiAgICAgICAgICAndHlwZSc6IHRoYXQuYXR0cigndHlwZScpLFxyXG4gICAgICAgICAgJ3N0eWxlJzogdGhhdC5hdHRyKCdzdHlsZScpLFxyXG4gICAgICAgICAgJ2RlZmF1bHQnOiB0aGF0LmF0dHIoJ2RlZmF1bHQnKSxcclxuICAgICAgICAgICdkb2MnOiB0aGF0LmZpcnN0KCdkb2MnKS50ZXh0KCkudHJpbSgpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghYmFzZVtjYXRlZ29yeV0pe1xyXG4gICAgICAgIGJhc2VbY2F0ZWdvcnldID0ge307IC8vIGNyZWF0ZSBuZXcgQVBJIGluIGJhc2Ugb2JqZWN0IGlmIHRoZXJlIGlzIG5vbmVcclxuICAgICAgfVxyXG4gICAgICBiYXNlW2NhdGVnb3J5XVttZXRob2QuYXR0cihcIm5hbWVcIildID0gYmFzZVtjYXRlZ29yeV1bbWV0aG9kLmF0dHIoXCJuYW1lXCIpXSB8fCB7fTtcclxuICAgICAgYmFzZVtjYXRlZ29yeV0uQUxMID0gYmFzZVtjYXRlZ29yeV0uQUxMIHx8IHt9O1xyXG4gICAgICBiYXNlW2NhdGVnb3J5XS5BTExbbWV0aG9kLmF0dHIoXCJpZFwiKV09IHtcclxuICAgICAgICAnaWQnIDogbWV0aG9kLmF0dHIoXCJpZFwiKSwgLy8gbWV0aG9kIGlkXHJcbiAgICAgICAgJ25hbWUnIDogbWV0aG9kLmF0dHIoXCJhcGlnZWU6ZGlzcGxheU5hbWVcIikgPyBtZXRob2QuYXR0cihcImFwaWdlZTpkaXNwbGF5TmFtZVwiKSA6IG1ldGhvZC5hdHRyKFwiaWRcIiksIC8vIG1ldGhvZCBuYW1lXHJcbiAgICAgICAgJ21ldGhvZCcgOiBtZXRob2QuYXR0cignbmFtZScpLCAvLyBHRVQgb3IgUE9TVFxyXG4gICAgICAgICdjYXRlZ29yeScgOiBjYXRlZ29yeSwgLy8gQVBJIG5hbWVcclxuICAgICAgICAncGF0aCc6IG1lLmF0dHIoJ3BhdGgnKSwgLy8gbWV0aG9kIFVSTFxyXG4gICAgICAgICdwYXJhbWV0ZXJzJzogcGFyYW1ldGVycywgLy8gbWV0aG9kIHBhcmFtZXRlcnNcclxuICAgICAgICAnYmFzZScgOiBtZS5wYXJlbnQoKS5hdHRyKCdiYXNlJyksIC8vIG1ldGhvZCBiYXNlIGxpbmtcclxuICAgICAgICAnZG9jdW1lbnRhdGlvbicgOiAkKG1ldGhvZC5maW5kKCdkb2MnKVswXSkuYXR0cignYXBpZ2VlOnVybCcpLCAvLyBsaW5rIHRvIGRvY3VtZW50YXRpb25cclxuICAgICAgICAnZGVzY3JpcHRpb24nIDogJChtZXRob2QuZmluZCgnZG9jJylbMF0pLnRleHQoKS50cmltKCkgLy9tZXRob2QgZGVzY3JpcHRpb25cclxuICAgICAgfTtcclxuXHJcbiAgICAgIGJhc2VbY2F0ZWdvcnldW21ldGhvZC5hdHRyKFwibmFtZVwiKV1bbWV0aG9kLmF0dHIoXCJpZFwiKV0gPSB7XHJcbiAgICAgICAgJ2lkJyA6IG1ldGhvZC5hdHRyKFwiaWRcIiksIC8vIG1ldGhvZCBpZFxyXG4gICAgICAgICduYW1lJyA6IG1ldGhvZC5hdHRyKFwiYXBpZ2VlOmRpc3BsYXlOYW1lXCIpID8gbWV0aG9kLmF0dHIoXCJhcGlnZWU6ZGlzcGxheU5hbWVcIikgOiBtZXRob2QuYXR0cihcImlkXCIpLCAvLyBtZXRob2QgbmFtZVxyXG4gICAgICAgICdtZXRob2QnIDogbWV0aG9kLmF0dHIoJ25hbWUnKSwgLy8gR0VUIG9yIFBPU1RcclxuICAgICAgICAnY2F0ZWdvcnknIDogY2F0ZWdvcnksIC8vIEFQSSBuYW1lXHJcbiAgICAgICAgJ3BhdGgnOiBtZS5hdHRyKCdwYXRoJyksIC8vIG1ldGhvZCBVUkxcclxuICAgICAgICAncGFyYW1ldGVycyc6IHBhcmFtZXRlcnMsIC8vIG1ldGhvZCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgJ2Jhc2UnIDogbWUucGFyZW50KCkuYXR0cignYmFzZScpLCAvLyBtZXRob2QgYmFzZSBsaW5rXHJcbiAgICAgICAgJ2RvY3VtZW50YXRpb24nIDogJChtZXRob2QuZmluZCgnZG9jJylbMF0pLmF0dHIoJ2FwaWdlZTp1cmwnKSwgLy8gbGluayB0byBkb2N1bWVudGF0aW9uXHJcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJyA6ICQobWV0aG9kLmZpbmQoJ2RvYycpWzBdKS50ZXh0KCkudHJpbSgpIC8vbWV0aG9kIGRlc2NyaXB0aW9uXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9KTtcclxufTtcclxuXHJcbi8vZ2V0cyBkb2N1bWVudCBmcm9tIFdBREwgY29uZmlndXJhdGlvbiBmaWxlXHJcbnZhciByZWFkRnJvbVdBREwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgJC5hamF4KHtcclxuICAgIHVybDogQ09ORklHX1VSTCxcclxuICAgIGFzeW5jIDogZmFsc2UsXHJcbiAgICBkYXRhVHlwZTogKCQuYnJvd3Nlci5tc2llKSA/IFwidGV4dFwiIDogXCJ4bWxcIixcclxuICAgIHN1Y2Nlc3MgOiBmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgIHZhciB4bWw7XHJcblxyXG4gICAgICBpZiAodHlwZW9mIHJlc3BvbnNlID09IFwic3RyaW5nXCIpe1xyXG4gICAgICAgIHhtbCA9IG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTERPTVwiKTtcclxuICAgICAgICB4bWwuYXN5bmMgPSBmYWxzZTtcclxuICAgICAgICB4bWwubG9hZFhNTChyZXNwb25zZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgeG1sID0gcmVzcG9uc2U7XHJcbiAgICAgIH1cclxuICAgICAgcGFyc2VYTUxEb2MoeG1sKTtcclxuICAgIH0sXHJcblxyXG4gICAgZXJyb3I6IGZ1bmN0aW9uKFhNTEh0dHBSZXF1ZXN0LCB0ZXh0U3RhdHVzLCBlcnJvclRocm93bil7XHJcbiAgICAgIGFsZXJ0KCdEYXRhIENvdWxkIE5vdCBCZSBMb2FkZWQgLSAnKyB0ZXh0U3RhdHVzKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxucmVhZEZyb21XQURMKCk7XHJcbm1vZHVsZS5leHBvcnRzID0gYmFzZTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NjcmlwdHMvYXBpLWV4cGxvcmVyL3YyL2NvbXBvbmVudHMvY29uZmlnLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGFwaUtleSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3RrLWFwaS1rZXknKSB8fCBcIjdlbHhka3U5R0dHNWs4ajBYbThLV2RBTkRnZWNITVYwXCI7IC8vQVBJIEtleVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgbmFtZTogJ2FwaWtleScsXHJcbiAgc3R5bGU6ICdxdWVyeScsXHJcbiAgdmFsdWU6IGtvLm9ic2VydmFibGUoYXBpS2V5KVxyXG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9jb21wb25lbnRzL2FwaWtleS5qc1xuICoqIG1vZHVsZSBpZCA9IDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxyXG4gKiBBamF4IFNlcnZpY2VcclxuICogQHBhcmFtIHVybFxyXG4gKiBAcGFyYW0gbWV0aG9kXHJcbiAqIEBwYXJhbSBjYWxsYmFja1xyXG4gKi9cclxudmFyIGFqYXhTZXJ2aWNlID0gZnVuY3Rpb24gKHVybCwgbWV0aG9kLCBjYWxsYmFjaykge1xyXG4gIHZhciBlc2NhcGVkVVJMID0gZW5jb2RlVVJJKHVybCk7XHJcbiAgY29uc29sZS5sb2coZXNjYXBlZFVSTCk7XHJcblxyXG4gICQuYWpheCh7XHJcbiAgICB0eXBlOiBtZXRob2QsXHJcbiAgICB1cmw6IGVzY2FwZWRVUkwsXHJcbiAgICBhc3luYzogdHJ1ZSxcclxuICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgIGNvbXBsZXRlOiBjYWxsYmFja1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEZpbHRlcnMgYW5kIHByZXBhcmVzIHBhcmFtcyBwYWlyc1xyXG4gKiBAcGFyYW0gYXJyXHJcbiAqIEBwYXJhbSBvYmpcclxuICogQHBhcmFtIGtvT2JzXHJcbiAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gKi9cclxudmFyIHByZXBhcmVVcmwgPSBmdW5jdGlvbiAoYXJyKSB7XHJcbiAgdmFyIHJlcGxhY2VtZW50LCB1cmwsIGRvbWFpbiwgcGF0aCwgbWV0aG9kLCBhcGlLZXksIHBhcmFtcztcclxuXHJcbiAgaWYgKCFhcnIgJiYgIWFyci5sZW5ndGgpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgXHJcbiAgZG9tYWluID0gYXJyWzBdLmJhc2U7XHJcbiAgcGF0aCA9IGFyclswXS5wYXRoO1xyXG4gIGFwaUtleSA9IGFyclsxXTtcclxuICBwYXJhbXMgPSBhcnJbMl0uZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICByZXR1cm4gaXRlbS5zdHlsZSA9PT0gJ3F1ZXJ5JztcclxuICB9KTtcclxuXHJcbiAgLy8gYXJyIG9mIHRlbXBsYXRlIG1hcmtzXHJcbiAgcmVwbGFjZW1lbnQgPSBwYXRoLm1hdGNoKC8oW157XSo/KVxcdyg/PVxcfSkvZ21pKTtcclxuXHJcbiAgLy8gYXJyIG9mIHRlbXBsYXRlIHBhcmFtc1xyXG4gIHZhciB0ZW1wbGF0ZXNBcnIgPSBhcnJbMl0uZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICByZXR1cm4gaXRlbS5zdHlsZSA9PT0gJ3RlbXBsYXRlJztcclxuICB9KTtcclxuXHJcbiAgLy8gcmVwbGFjZW1lbnRcclxuICByZXBsYWNlbWVudC5mb3JFYWNoKGZ1bmN0aW9uICh2YWwpIHtcclxuICAgIHZhciBwYXJhbSA9IHRlbXBsYXRlc0Fyci5maW5kKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbDtcclxuICAgIH0pO1xyXG4gICAgcGF0aCA9IHBhdGgucmVwbGFjZSgneycrIHBhcmFtLm5hbWUgKyAnfScsIHBhcmFtLnZhbHVlKCkgfHwgcGFyYW0uZGVmYXVsdCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIGFkZHMgYXBpS2V5IHBhcmFtXHJcbiAgaWYgKCFwYXJhbXNbMF0gfHwgcGFyYW1zWzBdLm5hbWUgIT09ICdhcGlrZXknKSB7XHJcbiAgICBwYXJhbXMudW5zaGlmdChhcGlLZXkpO1xyXG4gIH1cclxuXHJcbiAgLy8gcHJlcGFyZXMgcGFyYW1zIHBhcnQgb2YgdXJsXHJcbiAgcGFyYW1zID0gcGFyYW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICByZXR1cm4gW2l0ZW0ubmFtZSwgaXRlbS52YWx1ZSgpIHx8IGl0ZW0uZGVmYXVsdF0uam9pbignPScpO1xyXG4gICAgfSkuam9pbignJicpO1xyXG5cclxuICB1cmwgPSBbZG9tYWluLCAnLycsIHBhdGgsICc/JywgcGFyYW1zXS5qb2luKCcnKTtcclxuXHJcbiAgcmV0dXJuIHVybDtcclxufTtcclxuXHJcbi8vIHNlbmRzIHJlcXVlc3QgdG8gZ2V0IHRoZSBzZWNvbmQgY29sdW1uXHJcbnZhciBzZW5kUHJpbWFyeVJlcXVlc3QgPSBmdW5jdGlvbiAoYXJyKSB7XHJcbiAgY29uc29sZS5jbGVhcigpO1xyXG4gIHZhciB1cmwgPSBwcmVwYXJlVXJsKGFycik7XHJcbiAgLy8gY29uc29sZS5sb2codXJsKTtcclxuXHJcbiAgYWpheFNlcnZpY2UodXJsLCBhcnJbMF0ubWV0aG9kLCBmdW5jdGlvbihyZXNwb25zZSwgbWVzc2FnZSkge1xyXG4gICAgaWYgKG1lc3NhZ2UgPT0gJ2Vycm9yJykge1xyXG4gICAgICB2YXIgZXJyID0gcmVzcG9uc2UgJiYgcmVzcG9uc2UucmVzcG9uc2VKU09OICYmIHJlc3BvbnNlLnJlc3BvbnNlSlNPTi5lcnJvcnMgJiYgcmVzcG9uc2UucmVzcG9uc2VKU09OLmVycm9yc1swXTtcclxuICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UsIHJlc3BvbnNlLnN0YXR1cyk7XHJcbiAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oZXJyLmNvZGUpO1xyXG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuZGV0YWlsKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLndhcm4ocmVzcG9uc2UpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhtZXNzYWdlLCByZXNwb25zZS5zdGF0dXMpO1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5yZXNwb25zZUpTT04pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc2VuZFByaW1hcnlSZXF1ZXN0O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9jb21wb25lbnRzL2FqYXhTZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGhmID0gcmVxdWlyZSgnLi4vY29tcG9uZW50cy9oZWxwZXJGdW5jJyk7XHJcbnZhciBzZWxmO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBNZW51IFZpZXctTW9kZWxcclxuICogQHBhcmFtIGJhc2VcclxuICogQHBhcmFtIGNhdGVnb3J5XHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxuZnVuY3Rpb24gTWVudVZpZXdNb2RlbChiYXNlLCBjYXRlZ29yeSkge1xyXG4gIHNlbGYgPSB0aGlzO1xyXG4gIHRoaXMuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcclxuICB0aGlzLmNhdGVnb3JpZXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoT2JqZWN0LmtleXMoYmFzZSkubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgY2hlY2tlZDoga28ub2JzZXJ2YWJsZSghaW5kZXgpLFxyXG4gICAgICBuYW1lOiBpdGVtLFxyXG4gICAgICBsaW5rOiBmYWxzZVxyXG4gICAgfVxyXG4gIH0pKTtcclxuXHJcbiAgLy8gaW5pdGlhbCBsb2FkXHJcbiAgdGhpcy5zZWxlY3RDYXRlZ29yeSh0aGlzLmNhdGVnb3JpZXMoKVswXSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNZW51IFZpZXctTW9kZWwgbWV0aG9kXHJcbiAqIEBwYXJhbSBjYXRlZ29yeVxyXG4gKi9cclxuTWVudVZpZXdNb2RlbC5wcm90b3R5cGUuc2VsZWN0Q2F0ZWdvcnkgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcclxuICB2YXIgY2F0ZWdvcnlOYW1lID0gY2F0ZWdvcnkubmFtZTtcclxuICBzZWxmLmNhdGVnb3J5KGNhdGVnb3J5TmFtZSk7XHJcbiAgaGYuY2hlY2tBY3RpdmUoc2VsZi5jYXRlZ29yaWVzLCBjYXRlZ29yeU5hbWUpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNZW51Vmlld01vZGVsO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvVmlld01vZGVscy9tZW51Vmlld01vZGVsLmpzXG4gKiogbW9kdWxlIGlkID0gNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cy5nZXRNb2RlbEFycmF5ID0gZnVuY3Rpb24gZ2V0TW9kZWxBcnJheShwYXJhbXMpIHtcclxuICAgIHZhciBvYmogPSBwYXJhbXMub2JqIHx8IHt9LFxyXG4gICAgICAgIGFyciA9IHBhcmFtcy5hcnIgfHwgW10sXHJcbiAgICAgICAgcHJvcCA9IHBhcmFtcy5wcm9wIHx8ICduYW1lJztcclxuXHJcbiAgICBmb3IgKHZhciBpIGluIG9iaikge1xyXG4gICAgICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGkpKSB7IGNvbnRpbnVlOyB9XHJcblxyXG4gICAgICAgIHZhciBpdGVtID0gYXJyLmZpbmQoZnVuY3Rpb24gKG0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtMS5uYW1lID09PSBvYmpbaV1bcHJvcF07XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChpdGVtKSB7IGNvbnRpbnVlOyB9XHJcblxyXG4gICAgICAgIGFyci5wdXNoKHtcclxuICAgICAgICAgICAgY2hlY2tlZDoga28ub2JzZXJ2YWJsZShmYWxzZSksXHJcbiAgICAgICAgICAgIG5hbWU6IG9ialtpXVtwcm9wXVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFycjtcclxufTtcclxuXHJcbmV4cG9ydHMuY2hlY2tBY3RpdmUgPSBmdW5jdGlvbiBjaGVja0FjdGl2ZShrb0FyciwgYWN0aXZlRWxlbSkge1xyXG4gICAgaWYgKCFrb0FyciAmJiAhYWN0aXZlRWxlbSkge3JldHVybiBmYWxzZTt9XHJcblxyXG4gICAga29BcnIoa29BcnIoKS5tYXAoZnVuY3Rpb24gKG9iaikge1xyXG4gICAgICAgIGlmIChvYmoubmFtZSA9PT0gYWN0aXZlRWxlbSkge1xyXG4gICAgICAgICAgICBvYmouY2hlY2tlZCh0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBvYmouY2hlY2tlZChmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9KSk7XHJcbn07XHJcblxyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9oZWxwZXJGdW5jLmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIHNlbGY7XHJcbnZhciBiYXNlO1xyXG5cclxuLyoqXHJcbiAqIFBhcmFtcyBWaWV3LU1vZGVsXHJcbiAqIEBwYXJhbSByYXdcclxuICogQHBhcmFtIG1ldGhvZFxyXG4gKiBAcGFyYW0gcGFyYW1zXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxuZnVuY3Rpb24gUGFyYW1zVmlld01vZGVsKHJhdywgbWV0aG9kLCBwYXJhbXMpIHtcclxuICBiYXNlID0gcmF3O1xyXG4gIHNlbGYgPSB0aGlzO1xyXG4gIHRoaXMuYW5pbWF0aW9uU3BlZWQgPSAyMDA7XHJcblxyXG4gIC8vIG9ic2VydmFibGVzXHJcbiAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XHJcbiAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgdGhpcy5pc0hpZGRlbiA9IGtvLm9ic2VydmFibGUodHJ1ZSk7XHJcbiAgdGhpcy5wYXJhbUluRm9jdXMgPSBrby5vYnNlcnZhYmxlKCcnKTtcclxuXHJcbiAgLy8gY29tcHV0ZWRcclxuICB0aGlzLnBhcmFtc01vZGVsID0ga28uY29tcHV0ZWQodGhpcy51cGRhdGVQYXJhbXNNb2RlbCwgdGhpcyk7XHJcbiAgdGhpcy5wYXJhbUluRm9jdXModGhpcy5wYXJhbXNNb2RlbCgpWzBdKTtcclxuICB0aGlzLmlzRGlydHkgPSBrby5jb21wdXRlZCh0aGlzLmNoZWNrRGlydHksIHRoaXMpO1xyXG59XHJcblxyXG5QYXJhbXNWaWV3TW9kZWwucHJvdG90eXBlLmNoZWNrRGlydHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIGRpcnR5ID0gdGhpcy5wYXJhbXNNb2RlbCgpLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgcmV0dXJuIGl0ZW0uaXNEaXJ0eSgpID09PSB0cnVlO1xyXG4gIH0pO1xyXG4gIHJldHVybiBkaXJ0eS5sZW5ndGggPiAwO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWwgYnVpbGQgb2YgU2VsZWN0IE1vZGVsXHJcbiAqL1xyXG5QYXJhbXNWaWV3TW9kZWwucHJvdG90eXBlLnVwZGF0ZVBhcmFtc01vZGVsID0gZnVuY3Rpb24gKGEsYikge1xyXG4gIHZhciBvYmogPSB0aGlzLm1ldGhvZCgpLnBhcmFtZXRlcnMgfHwge30sXHJcbiAgICBhcnIgPSBbXTtcclxuXHJcbiAgZm9yICh2YXIgaSBpbiBvYmopIHtcclxuICAgIHZhciB2YWx1ZSA9IG9ialtpXTtcclxuXHJcbiAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuXHJcbiAgICB2YWx1ZS52YWx1ZSA9IHZhbHVlLnZhbHVlIHx8IGtvLm9ic2VydmFibGUoJycpO1xyXG5cclxuICAgIC8vICdkaXJ0eScgZmxhZyB3YXRjaGVyIGZvciBjdXJyZW50IGZpZWxkXHJcbiAgICB2YWx1ZS5pc0RpcnR5ID0ga28ucHVyZUNvbXB1dGVkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgcmV0dXJuICEhdGhpcy52YWx1ZSgpLnRyaW0oKS5sZW5ndGg7XHJcbiAgICB9LCB2YWx1ZSk7XHJcblxyXG4gICAgLy8gYWRkIGNhbGVuZGFyIGJ0biBmb3IgY3VycmVudCBmaWVsZFxyXG4gICAgdmFsdWUuaGFzQ2FsZW5kYXIgPSBpLnNlYXJjaCgvKGRhdGV8dGltZSkvZ21pKSAhPSAtMTtcclxuXHJcbiAgICAvLyBhZGQgcG9wLXVwIGJ0biBmb3IgY3VycmVudCBmaWVsZFxyXG4gICAgdmFsdWUuaGFzUG9wVXAgPSBpLnNlYXJjaCgvKGF0dHJhY3Rpb25JZHx2ZW51ZUlkKS9nbWkpICE9IC0xO1xyXG5cclxuICAgIGFyci5wdXNoKHZhbHVlKTtcclxuICB9XHJcblxyXG4gIC8vIHByZXBhcmUgb3V0cHV0IGZvciByZXF1ZXN0XHJcbiAgdGhpcy5wcmVwYXJlVXJsUGFpcnMoYXJyLCB0aGlzLnBhcmFtcyk7XHJcblxyXG4gIC8vIGNhdGNoIHBhcmFtcyBmb2N1cyBmb3IgYWJvdXQgc2VjdGlvblxyXG4gIHRoaXMucGFyYW1JbkZvY3VzKGFyclswXSk7XHJcbiAgLy8gdGhpcy5vbkVudGVyS2V5RG93bigpXHJcbiAgcmV0dXJuIGFycjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBFbnRlciBrZXkgaGFuZGxlclxyXG4gKiBAcGFyYW0gbW9kZWxcclxuICogQHBhcmFtIGV2ZW50XHJcbiAqL1xyXG5QYXJhbXNWaWV3TW9kZWwucHJvdG90eXBlLm9uRW50ZXJLZXlEb3duID0gZnVuY3Rpb24gKG1vZGVsLCBldmVudCkge1xyXG4gIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgJCgnI2FwaS1leHAtZ2V0LWJ0bicpLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBTbGlkZSB0b2dnbGUgZm9yIHBhcmFtcyBjb250YWluZXIgbWV0aG9kXHJcbiAqIEBwYXJhbSB2aWV3TW9kZWxcclxuICogQHBhcmFtIGV2ZW50XHJcbiAqL1xyXG5QYXJhbXNWaWV3TW9kZWwucHJvdG90eXBlLnNsaWRlVG9nZ2xlID0gZnVuY3Rpb24gKHZpZXdNb2RlbCwgZXZlbnQpIHtcclxuICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXHJcbiAgICAucGFyZW50cygnLmpzLXNsaWRlLWNvbnRyb2wnKVxyXG4gICAgLmZpbmQoJy5qcy1zbGlkZS13cmFwcGVyJylcclxuICAgIC5zbGlkZVRvZ2dsZSh2aWV3TW9kZWwuYW5pbWF0aW9uU3BlZWQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgdmlld01vZGVsLmlzSGlkZGVuKCF2aWV3TW9kZWwuaXNIaWRkZW4oKSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBNYWNoZXMgZm9jdXNlZCBwYXJhbVxyXG4gKiBAcGFyYW0gaXRlbVxyXG4gKi9cclxuUGFyYW1zVmlld01vZGVsLnByb3RvdHlwZS5vbkZvY3VzID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICBzZWxmLnBhcmFtSW5Gb2N1cyhpdGVtKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGaWx0ZXJzIHBhcmFtcyBieSBkZWZpbmVkIHZhbHVlXHJcbiAqIEBwYXJhbSBhcnJcclxuICogQHBhcmFtIGtvT2JzXHJcbiAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gKi9cclxuUGFyYW1zVmlld01vZGVsLnByb3RvdHlwZS5wcmVwYXJlVXJsUGFpcnMgPSBmdW5jdGlvbiAoYXJyLCBrb09icykge1xyXG4gIGlmICghYXJyICYmICFrb09icykge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGtvT2JzKGFyci5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgIHJldHVybiAoaXRlbS52YWx1ZSgpIHx8IGl0ZW0uZGVmYXVsdCk7XHJcbiAgfSkpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQYXJhbXNWaWV3TW9kZWw7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9WaWV3TW9kZWxzL3BhcmFtc1ZpZXdNb2RlbC5qc1xuICoqIG1vZHVsZSBpZCA9IDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbnZhciBoZiA9IHJlcXVpcmUoJy4uL2NvbXBvbmVudHMvaGVscGVyRnVuYycpO1xyXG52YXIgc2VsZjtcclxudmFyIGJhc2U7XHJcbnZhciBjYXRlZ29yeTtcclxuXHJcbi8qKlxyXG4gKiBNZXRob2RzIFZpZXctTW9kZWxcclxuICogQHBhcmFtIHJhd1xyXG4gKiBAcGFyYW0gY2F0ZWdvcnlcclxuICogQHBhcmFtIG1ldGhvZFxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIE1ldGhvZHNWaWV3TW9kZWwocmF3LCBjYXRlZ29yeSwgbWV0aG9kKSB7XHJcbiAgc2VsZiA9IHRoaXM7XHJcbiAgYmFzZSA9IHJhdztcclxuXHJcbiAgLy8gb2JzZXJ2YWJsZXNcclxuICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XHJcbiAgdGhpcy5tZXRob2QgPSBtZXRob2Q7XHJcbiAgdGhpcy50b2dnbGVQb3BVcCA9IGtvLm9ic2VydmFibGUoZmFsc2UpO1xyXG4gIHRoaXMucmFkaW9zTW9kZWwgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gIHRoaXMuc2VsZWN0TW9kZWwgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gIHRoaXMudXBkYXRlTW9kZWwodGhpcy5jYXRlZ29yeSgpKTtcclxuICB0aGlzLmNhdGVnb3J5LnN1YnNjcmliZSh0aGlzLnVwZGF0ZU1vZGVsKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9uIGNhdGVnb3J5IGNoYW5nZSBoYW5kbGVyXHJcbiAqIE1ldGhvZHMgVmlldy1Nb2RlbCBtZXRob2RcclxuICogQHBhcmFtIGNhdGVnb3J5XHJcbiAqL1xyXG5NZXRob2RzVmlld01vZGVsLnByb3RvdHlwZS51cGRhdGVNb2RlbCA9IGZ1bmN0aW9uIChjYXRlZ29yeSkge1xyXG4gIC8vIGluaXRpYWwgcmFkaW9zIG1vZGVsXHJcbiAgc2VsZi51cGRhdGVSYWRpb3NNb2RlbChiYXNlW2NhdGVnb3J5XSk7XHJcbiAgLy8gaW5pdGlhbCBzZWxlY3QgbW9kZWwgKGZpcnN0IG1ldGhvZCBpbiBmaXJzdCBzZWN0aW9uIGZvciBzdGFydClcclxuICBzZWxmLnVwZGF0ZVNlbGVjdChzZWxmLnJhZGlvc01vZGVsKClbMF0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIE9uY2hhbmdlIGhhbmRsZXIgZm9yIFJhZGlvIGJ1dHRvbnNcclxuICogQHBhcmFtIGl0ZW1cclxuICovXHJcbk1ldGhvZHNWaWV3TW9kZWwucHJvdG90eXBlLm9uY2hhbmdlUmFkaW9zID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAvL3VwZGF0ZSBSYWRpb3MgTW9kZWxcclxuICBoZi5jaGVja0FjdGl2ZShzZWxmLnJhZGlvc01vZGVsLCBpdGVtLm5hbWUpO1xyXG4gIC8vdXBkYXRlIFNlbGVjdCBNb2RlbFxyXG4gIHNlbGYudXBkYXRlU2VsZWN0KGl0ZW0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWwgYnVpbGQgb2YgUmFkaW9zIE1vZGVsXHJcbiAqIEBwYXJhbSBwYXJhbVxyXG4gKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAqL1xyXG5NZXRob2RzVmlld01vZGVsLnByb3RvdHlwZS51cGRhdGVSYWRpb3NNb2RlbCA9IGZ1bmN0aW9uIChwYXJhbSkge1xyXG4gIHZhciBvYmogPSBwYXJhbSB8fCB7fSxcclxuICAgIGFyciA9IFtdO1xyXG5cclxuICBmb3IgKHZhciBpIGluIG9iaikge1xyXG4gICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoaSkpIHsgY29udGludWU7IH1cclxuICAgIHZhciBpdGVtID0ge1xyXG4gICAgICBjaGVja2VkOiBrby5vYnNlcnZhYmxlKGkgPT09ICdBTEwnKSxcclxuICAgICAgbmFtZTogaVxyXG4gICAgfTtcclxuXHJcbiAgICBpZiAoaSA9PT0gJ0FMTCcpIHtcclxuICAgICAgYXJyLnVuc2hpZnQoaXRlbSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFyci5wdXNoKGl0ZW0pO1xyXG4gICAgfVxyXG4gIH1cclxuICB0aGlzLnJhZGlvc01vZGVsKGFycik7XHJcbiAgcmV0dXJuIGFycjtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsIGJ1aWxkIG9mIFNlbGVjdCBNb2RlbFxyXG4gKiBAcGFyYW0gaXRlbVxyXG4gKi9cclxuTWV0aG9kc1ZpZXdNb2RlbC5wcm90b3R5cGUudXBkYXRlU2VsZWN0ID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICB2YXIgb2JqID0gYmFzZVtzZWxmLmNhdGVnb3J5KCldW2l0ZW0ubmFtZV18fCB7fSxcclxuICAgIGFyciA9IFtdLFxyXG4gICAgY291bnQgPSAwO1xyXG5cclxuICBmb3IgKHZhciBpIGluIG9iaikge1xyXG4gICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoaSkpIHsgY29udGludWU7IH1cclxuICAgIHZhciBwcm9wZXJ0eSA9IG9ialtpXTtcclxuICAgIGFyci5wdXNoKHtcclxuICAgICAgY2hlY2tlZDoga28ub2JzZXJ2YWJsZSghY291bnQpLFxyXG4gICAgICBuYW1lOiBwcm9wZXJ0eS5uYW1lLFxyXG4gICAgICBpZDogcHJvcGVydHkuaWQsXHJcbiAgICAgIGxpbms6IHByb3BlcnR5LmRvY3VtZW50YXRpb24sXHJcbiAgICAgIGFib3V0OiBwcm9wZXJ0eS5kZXNjcmlwdGlvbixcclxuICAgICAgY2F0ZWdvcnk6IHByb3BlcnR5LmNhdGVnb3J5LFxyXG4gICAgICBtZXRob2Q6IHByb3BlcnR5Lm1ldGhvZFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gLy8gc2V0IGdsb2JhbCBvYnNlcnZhYmxlXHJcbiAgICAhY291bnQgJiYgdGhpcy5tZXRob2QoYmFzZVtwcm9wZXJ0eS5jYXRlZ29yeV1bcHJvcGVydHkubWV0aG9kXVtwcm9wZXJ0eS5pZF0pO1xyXG5cclxuICAgIGNvdW50Kys7XHJcbiAgfVxyXG4gIHNlbGYuc2VsZWN0TW9kZWwoYXJyKTtcclxufTtcclxuXHJcbk1ldGhvZHNWaWV3TW9kZWwucHJvdG90eXBlLm9uU2VsZWN0TWV0aG9kID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICBoZi5jaGVja0FjdGl2ZShzZWxmLnNlbGVjdE1vZGVsLCBpdGVtLm5hbWUpO1xyXG4gIHNlbGYubWV0aG9kKGJhc2VbaXRlbS5jYXRlZ29yeV1baXRlbS5tZXRob2RdW2l0ZW0uaWRdKTtcclxufTtcclxuXHJcbk1ldGhvZHNWaWV3TW9kZWwucHJvdG90eXBlLm9uQWJvdXRDbGljayA9IGZ1bmN0aW9uIChtb2RlbCwgZXZlbnQpIHtcclxuICBtb2RlbC50b2dnbGVQb3BVcCghbW9kZWwudG9nZ2xlUG9wVXAoKSk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1ldGhvZHNWaWV3TW9kZWw7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NjcmlwdHMvYXBpLWV4cGxvcmVyL3YyL1ZpZXdNb2RlbHMvbWV0aG9kc1ZpZXdNb2RlbC5qc1xuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxyXG4gKiBDdXN0b20gU2VsZWN0IGNvbXBvbmVudFxyXG4gKi9cclxudmFyIHNlbGY7XHJcblxyXG4vKipcclxuICogQ3VzdG9tIFNlbGVjdCBWaWV3LU1vZGVsXHJcbiAqIEBwYXJhbSBwYXJhbXNcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBDdXN0b21TZWxlY3QocGFyYW1zKSB7XHJcbiAgc2VsZiA9IHRoaXM7XHJcblxyXG4gIHRoaXMuYW5pbWF0aW9uU3BlZWQgPSBwYXJhbXMuYW5pbWF0aW9uU3BlZWQgfHwgMjAwO1xyXG5cclxuICAvL29ic2VydmFibGVzXHJcbiAgdGhpcy5zZWxlY3RNb2RlbCA9IHBhcmFtcy5vcHRpb25zIHx8IGtvLm9ic2VydmFibGVBcnJheShbXSk7XHJcbiAgdGhpcy5wbGFjZWhvbGRlciA9IGtvLm9ic2VydmFibGUocGFyYW1zLnBsYWNlaG9sZGVyIHx8ICcnKTtcclxuICB0aGlzLm9uc2VsZWN0ID0gcGFyYW1zLm9uc2VsZWN0IHx8IGZ1bmN0aW9uIChpdGVtKSB7IGNvbnNvbGUubG9nKGl0ZW0gKydzZWxlY3RlZCEnKX07XHJcbiAgdGhpcy5zZWxlY3RlZCA9IGtvLm9ic2VydmFibGUodGhpcy5zZWxlY3RNb2RlbCgpWzBdKTtcclxuICB0aGlzLmlzT25lT3B0aW9uID0ga28ucHVyZUNvbXB1dGVkKGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLnNlbGVjdE1vZGVsKCkubGVuZ3RoIDwgMjsgLy8gbW9yZSB0aGFuIG9uZSBvcHRpb25cclxuICB9LCB0aGlzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmluZEVsZW1lbnQoZXZlbnQpIHtcclxuICB2YXIgcGFyZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuanMtY3VzdG9tLXNlbGVjdCcpO1xyXG4gIHJldHVybiB7XHJcbiAgICB3cmFwcGVyOiBwYXJlbnQuZmluZCgnLmpzLWN1c3RvbS1zZWxlY3Qtd3JhcHBlcicpLFxyXG4gICAgbGF5ZXI6IHBhcmVudC5maW5kKCcuanMtY3VzdG9tLXNlbGVjdC1sYXllcicpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3VzdG9tIFNlbGVjdCBWaWV3LU1vZGVsIG1ldGhvZFxyXG4gKiBAcGFyYW0gdmlld01vZGVsXHJcbiAqIEBwYXJhbSBldmVudFxyXG4gKi9cclxuQ3VzdG9tU2VsZWN0LnByb3RvdHlwZS5zbGlkZVRvZ2dsZSA9IGZ1bmN0aW9uKHZpZXdNb2RlbCwgZXZlbnQpIHtcclxuICBpZiAodmlld01vZGVsLmlzT25lT3B0aW9uKCkpIHtyZXR1cm4gZmFsc2U7fVxyXG4gIHZhciBlbCA9IGZpbmRFbGVtZW50KGV2ZW50KTtcclxuICAgIGVsLndyYXBwZXIuc2xpZGVUb2dnbGUodmlld01vZGVsLmFuaW1hdGlvblNwZWVkKTtcclxuICAgIGVsLmxheWVyLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDdXN0b20gU2VsZWN0IFZpZXctTW9kZWwgbWV0aG9kXHJcbiAqIEBwYXJhbSBpdGVtXHJcbiAqIEBwYXJhbSBldmVudFxyXG4gKi9cclxuQ3VzdG9tU2VsZWN0LnByb3RvdHlwZS5zZWxlY3RJdGVtID0gZnVuY3Rpb24gKGl0ZW0sIGV2ZW50KSB7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gIHRoaXMuc2VsZWN0ZWQoaXRlbSk7XHJcbiAgLy8gcnVuIGhhbmRsZXJcclxuICB0aGlzLm9uc2VsZWN0KGl0ZW0pO1xyXG4gIC8vIHNsaWRlIHVwXHJcbiAgdGhpcy5zbGlkZVRvZ2dsZShzZWxmLCBldmVudCk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGtvLmNvbXBvbmVudHMucmVnaXN0ZXIoJ2N1c3RvbS1zZWxlY3QnLCB7XHJcbiAgdmlld01vZGVsOiBDdXN0b21TZWxlY3QsXHJcbiAgdGVtcGxhdGU6IChbXHJcbiAgICAnPGRpdiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdCBqcy1jdXN0b20tc2VsZWN0XCI+JyxcclxuICAgICAgJzxkaXYgY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3Qtd3JhcHBlclwiPicsXHJcbiAgICAgICAgJzxzZWxlY3QgZGF0YS1iaW5kPVwib3B0aW9uczogc2VsZWN0TW9kZWwsIG9wdGlvbnNUZXh0OiBcXCduYW1lXFwnLCB2YWx1ZTogc2VsZWN0ZWRcIiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdF9fZmllbGRcIiBuYW1lPVwiYXBpLWV4cC1tZXRob2RcIj48L3NlbGVjdD4nLFxyXG4gICAgICAgICc8c3BhbiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdF9fcGxhY2Vob2xkZXJcIj4nLFxyXG4gICAgICAgICAgJzxpbnB1dCBkYXRhLWJpbmQ9XCJldmVudDoge2NsaWNrOiBzbGlkZVRvZ2dsZX0sIGF0dHI6IHt2YWx1ZTogc2VsZWN0ZWQoKS5uYW1lLCBkaXNhYmxlZDogaXNPbmVPcHRpb259XCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIlwiIHJlYWRvbmx5PVwiXCI+JyxcclxuICAgICAgICAgICc8YiBkYXRhLWJpbmQ9XCJjc3M6IHtoaWRkZW46IGlzT25lT3B0aW9ufVwiIGNsYXNzPVwiYXBpLWV4cC1jdXN0b20tc2VsZWN0X19jaGV2cm9uXCI+Jm5ic3A7PC9iPicsXHJcbiAgICAgICAgJzwvc3Bhbj4nLFxyXG4gICAgICAgICc8dWwgZGF0YS1iaW5kPVwiZm9yZWFjaDogc2VsZWN0TW9kZWxcIiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdF9fbGlzdCBqcy1jdXN0b20tc2VsZWN0LXdyYXBwZXJcIj4nLFxyXG4gICAgICAgICAgJzxsaSBkYXRhLWJpbmQ9XCJjc3M6IHtcXCdhY3RpdmVcXCc6IGNoZWNrZWR9XCIgY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3RfX2l0ZW1cIj4nLFxyXG4gICAgICAgICAgICAnPGJ1dHRvbiBkYXRhLWJpbmQ9XCJldmVudDoge2NsaWNrOiAkcGFyZW50LnNlbGVjdEl0ZW0uYmluZCgkcGFyZW50KX0sIHRleHQ6IG5hbWUsIGNzczoge1xcJ2FjdGl2ZVxcJzogY2hlY2tlZCgpfSwgYXR0cjoge1xcJ2RhdGEtdmFsdWVcXCc6IG5hbWV9XCIgIGNsYXNzPVwiYXBpLWV4cC1jdXN0b20tc2VsZWN0X19pdGVtLWxhYmVsXCIgaHJlZj1cIiNcIj48L2J1dHRvbj4nLFxyXG4gICAgICAgICAgICAnPGEgZGF0YS1iaW5kPVwiYXR0cjoge2hyZWY6IGxpbmt9LCBjc3M6IHtcXCdoaWRkZW5cXCc6ICFsaW5rfVwiIGNsYXNzPVwiYXBpLWV4cC1jdXN0b20tc2VsZWN0X19pdGVtLWxpbmtcIiB0YXJnZXQ9XCJfYmxhbmtcIj4mbmJzcDs8L2E+JyxcclxuICAgICAgICAgICc8L2xpPicsXHJcbiAgICAgICAgJzwvdWw+JyxcclxuICAgICAgJzwvZGl2PicsXHJcbiAgICAgICc8ZGl2IGRhdGEtYmluZD1cImNsaWNrOiBzbGlkZVRvZ2dsZVwiIGNsYXNzPVwiYXBpLWV4cC1jdXN0b20tc2VsZWN0LWxheWVyIGpzLWN1c3RvbS1zZWxlY3QtbGF5ZXIgaGlkZGVuXCI+PC9kaXY+JyxcclxuICAgICc8L2Rpdj4nXHJcbiAgXSkuam9pbignJylcclxufSk7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9jb21wb25lbnRzL2N1c3RvbVNlbGVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=