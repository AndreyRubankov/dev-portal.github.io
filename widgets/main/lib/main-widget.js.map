{"version":3,"sources":["../src/main-widget.es6"],"names":[],"mappings":"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","file":"main-widget.js","sourcesContent":["class TicketmasterWidget {\r\n\r\n  set config(attrs) { this.widgetConfig = this.loadConfig(attrs); }\r\n  get config() { return this.widgetConfig; }\r\n  set events(responce){ this.eventsList = this.parseEvents(responce);}\r\n  get events(){ return this.eventsList;}\r\n  get eventUrl(){ return \"http://www.ticketmaster.com/event/\"; }\r\n  get apiUrl(){ return \"https://app.ticketmaster.com/discovery/v2/events.json\"; }\r\n  get themeUrl() { return \"http://localhost:4000/widgets/main/theme/\"; }\r\n  //get themeUrl() { return \"http://ticketmaster-api-staging.github.io/widgets/main/theme/\"; }\r\n  get logoUrl() { return \"http://developer.ticketmaster.com/\"; }\r\n  get updateExceptions() { return [\"width\",\"border\",\"borderradius\",\"colorscheme\",\"Layout\"]}\r\n\r\n\r\n  isConfigAttrEmpty(attr) {\r\n    if( !this.config.hasOwnProperty(attr) || this.config[attr] === \"undefined\"){\r\n      return false; }\r\n    else if( this.config[attr] === \"\"){\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  get eventReqAttrs(){\r\n    let attrs = {};\r\n\r\n    if(this.isConfigAttrEmpty(\"tmapikey\"))\r\n      attrs.apikey = this.config.tmapikey;\r\n    if(this.isConfigAttrEmpty(\"keyword\"))\r\n      attrs.keyword = this.config.keyword;\r\n    if(this.isConfigAttrEmpty(\"radius\"))\r\n      attrs.radius = this.config.radius;\r\n    if(this.isConfigAttrEmpty(\"postalcode\"))\r\n      attrs.postalcode = this.config.postalcode;\r\n    if(this.isConfigAttrEmpty(\"attractionid\"))\r\n      attrs.attractionid = this.config.attractionid;\r\n    if(this.isConfigAttrEmpty(\"promoterid\"))\r\n      attrs.promoterid = this.config.promoterid;\r\n\r\n    return attrs;\r\n  }\r\n\r\n  //https://app.ticketmaster.com/discovery/v1/events/10004F84CD1C5395/images.json?apikey=KRUnjq8y8Sg5eDpP90dNzOK70d4WiUst\r\n\r\n  constructor(selector) {\r\n    this.sliderSpeed = 5000;\r\n    this.widgetRoot = document.querySelector(\"div[w-tm-api-key]\");\r\n    this.eventsRoot = document.createElement(\"ul\");\r\n    this.eventsRoot.classList.add(\"events-root\");\r\n    this.widgetRoot.appendChild(this.eventsRoot);\r\n\r\n    this.config = this.widgetRoot.attributes;\r\n\r\n    if(this.config.theme !== null){\r\n      this.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.theme + \".css\" );\r\n    }\r\n\r\n    this.widgetRoot.classList.remove(\"border\");\r\n    if(this.config.border){\r\n      this.widgetRoot.classList.add(\"border\");\r\n    }\r\n\r\n    this.widgetRoot.style.height = `${this.config.height}px`;\r\n    this.widgetRoot.style.width  = `${this.config.width}px`;\r\n    this.widgetRoot.style.borderRadius =  `${this.config.borderradius}px`;\r\n\r\n    this.clear();\r\n\r\n    this.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\r\n\r\n    this.addWidgetRootLinks();\r\n  }\r\n\r\n  addWidgetRootLinks(){\r\n    var legalNoticeContent = document.createTextNode('Legal Notice'),\r\n        legalNotice = document.createElement(\"div\");\r\n    legalNotice.classList.add(\"legal-notice\");\r\n    legalNotice.appendChild(legalNoticeContent);\r\n\r\n    var logo = document.createElement('a');\r\n    logo.classList.add(\"event-logo\");\r\n    logo.target = '_blank';\r\n    logo.href = this.logoUrl;\r\n\r\n    this.widgetRoot.appendChild(legalNotice);\r\n    this.widgetRoot.appendChild(logo);\r\n  }\r\n\r\n  initSlider(){\r\n    if(this.sliderInterval) clearInterval(this.sliderInterval);\r\n    var eventCount = this.eventsRoot.getElementsByClassName(\"event-wrapper\").length;\r\n    this.eventsRoot.style.marginLeft = '0%';\r\n    this.eventsRoot.style.width = `${eventCount * 100}%`;\r\n    if(eventCount > 1){\r\n      var currentEvent = 1;\r\n      this.sliderInterval = setInterval(()=> {\r\n        this.eventsRoot.style.marginLeft = `-${currentEvent * 100}%`;\r\n        if(eventCount - 1 > currentEvent){\r\n          currentEvent ++;\r\n        }else{\r\n          currentEvent = 0;\r\n        }\r\n      }, this.sliderSpeed);\r\n    }\r\n  }\r\n\r\n  formatDate(date) {\r\n    var result = '';\r\n    if(!date.day) return result; // Day is required\r\n\r\n    function LZ(x) {\r\n      return (x < 0 || x > 9 ? \"\" : \"0\") + x\r\n    }\r\n    var MONTH_NAMES = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],\r\n        DAY_NAMES = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],\r\n        dayArray = date.day.split('-'),\r\n        d = parseInt(dayArray[2]),\r\n        M = parseInt(dayArray[1]);\r\n\r\n    var E = new Date(date.day).getDay();\r\n    result = DAY_NAMES[E] + ', ' + MONTH_NAMES[M - 1] + ' ' + d + ', ' + dayArray[0];\r\n\r\n    if(!date.time) return result;\r\n\r\n    var timeArray = date.time.split(':'),\r\n      H = parseInt(timeArray[0]),\r\n      m = timeArray[1],\r\n      a = \"AM\";\r\n\r\n    if (H > 11) a = \"PM\";\r\n    if (H == 0) {\r\n      H = 12;\r\n    } else if (H > 12) {\r\n      H = H - 12;\r\n    }\r\n\r\n    return result + ' ' + LZ(H) + ':' + m + ' ' + a;\r\n  }\r\n\r\n  clear(){\r\n    this.eventsRoot.innerHTML = \"\";\r\n  }\r\n\r\n  update() {\r\n\r\n    let oldTheme = this.config.constructor();\r\n    for (let attr in this.config) {\r\n      if (this.config.hasOwnProperty(attr)) oldTheme[attr] = this.config[attr];\r\n    }\r\n\r\n    /*let oldTheme = {\r\n      keyword: this.config.keyword,\r\n      theme: this.config.theme,\r\n      radius: this.config.radius,\r\n      postalcode: this.config.postalcode,\r\n      attractionid: this.config.attractionid,\r\n      promoterid: this.config.attractionid\r\n    };*/\r\n\r\n    this.config = this.widgetRoot.attributes;\r\n\r\n    /*if(this.config.theme !== null){\r\n      this.makeRequest( this.styleLoadingHandler, this.themeUrl + this.config.theme + \".css\" );\r\n    }*/\r\n\r\n    this.widgetRoot.style.height = `${this.config.height}px`;\r\n    this.widgetRoot.style.width  = `${this.config.width}px`;\r\n    this.widgetRoot.style.borderRadius =  `${this.config.borderradius}px`;\r\n\r\n    this.widgetRoot.classList.remove(\"border\");\r\n    if( this.config.hasOwnProperty(\"border\") ){\r\n      this.widgetRoot.classList.add(\"border\");\r\n    }\r\n\r\n    /*var newTheme = this.config;\r\n    Object.keys(newTheme).map(function(key){\r\n      console.log([key,newTheme[key]]);\r\n      return newTheme[key] === oldTheme[key] ;\r\n    }).indexOf(false) === -1*/\r\n\r\n    if(this.needToUpdate(this.config, oldTheme, this.updateExceptions)){\r\n      this.clear();\r\n      this.makeRequest( this.eventsLoadingHandler, this.apiUrl, this.eventReqAttrs );\r\n    }\r\n    else{\r\n      var events = document.getElementsByClassName(\"event-wrapper\");\r\n      for(event in events){\r\n        if(events.hasOwnProperty(event) && events[event].style !== undefined){\r\n          events[event].style.width = `${this.config.width}px`;\r\n          events[event].style.height = `${this.config.height}px`;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  needToUpdate(newTheme, oldTheme, forCheck = []){\r\n    return Object.keys(newTheme).map(function(key){\r\n      if(forCheck.indexOf(key) > -1) return true;\r\n      //console.warn([key, newTheme[key], oldTheme[key], newTheme[key] === oldTheme[key]])\r\n      return newTheme[key] === oldTheme[key] ;\r\n    }).indexOf(false) > -1\r\n  }\r\n\r\n  loadConfig(NamedNodeMap){\r\n      var config = {};\r\n      Object.keys(NamedNodeMap).map(function(value){\r\n        if( typeof(NamedNodeMap[value].name) !== \"undefined\" && NamedNodeMap[value].name.indexOf(\"w-\") !== -1){\r\n          config[ NamedNodeMap[value].name.replace(/w-/g, \"\").replace(/-/g, \"\") ] = NamedNodeMap[value].value;\r\n        }\r\n      });\r\n      return config;\r\n  }\r\n\r\n  styleLoadingHandler(){\r\n    if (this && this.readyState == XMLHttpRequest.DONE ) {\r\n      if(this.status == 200){\r\n        var style = document.createElement(\"style\");\r\n        style.setAttribute(\"type\",\"text/css\");\r\n        style.textContent = this.responseText;\r\n        document.getElementsByTagName(\"head\")[0].appendChild(style);\r\n      }\r\n      else {\r\n        alert(\"theme wasn't loaded\")\r\n      }\r\n    }\r\n  }\r\n\r\n  eventsLoadingHandler(){\r\n    if (this && this.readyState == XMLHttpRequest.DONE ) {\r\n      if(this.status == 200){\r\n        let widget = this.widget;\r\n\r\n        widget.events = JSON.parse(this.responseText);\r\n        widget.events.map(function(event){\r\n          widget.publishEvent(event);\r\n        });\r\n\r\n        widget.initSlider();\r\n      }\r\n      else if(this.status == 400) {\r\n        alert('There was an error 400')\r\n      }\r\n      else {\r\n        alert('something else other than 200 was returned')\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  publishEvent(event){\r\n    let DOMElement = this.createDOMItem(event);\r\n    this.eventsRoot.appendChild(DOMElement);\r\n  }\r\n\r\n  getEventByID(id){\r\n    for(let index in this.events){\r\n      if(this.events.hasOwnProperty(index) && this.events[index].id === id){\r\n        return this.events[index]\r\n      }\r\n    }\r\n  }\r\n\r\n  getImageForEvent(images){\r\n    var width = this.config.width,\r\n      height = this.config.height;\r\n\r\n    images.sort(function(a,b) {\r\n      if (a.width < b.width)\r\n        return -1;\r\n      else if (a.width > b.width)\r\n        return 1;\r\n      else\r\n        return 0;\r\n    });\r\n\r\n    var myImg = \"\";\r\n    images.forEach(function(element){\r\n      if(element.width >= width && element.height >= height && !myImg){\r\n        myImg = element.url;\r\n      }\r\n    });\r\n    return myImg;\r\n  }\r\n\r\n  parseEvents(eventsSet){\r\n    if(!eventsSet._embedded){\r\n      if(typeof($widgetModalNoCode) !== \"undefined\"){\r\n        $widgetModalNoCode.modal();\r\n      }\r\n      return [];\r\n    }\r\n    eventsSet = eventsSet._embedded.events;\r\n    var tmpEventSet = [];\r\n    for(var key in eventsSet){\r\n      if(eventsSet.hasOwnProperty(key)){\r\n        let currentEvent = {};\r\n\r\n        currentEvent.id = eventsSet[key].id;\r\n        currentEvent.url = eventsSet[key].eventUrl ? eventsSet[key].eventUrl : this.eventUrl + currentEvent.id;\r\n        currentEvent.name = eventsSet[key].name;\r\n\r\n        currentEvent.date = {\r\n          day: eventsSet[key].dates.start.localDate,\r\n          time: eventsSet[key].dates.start.localTime\r\n        };\r\n\r\n        if(eventsSet[key]._embedded.venues[0].address){\r\n          currentEvent.address = eventsSet[key]._embedded.venues[0].address;\r\n        }\r\n\r\n        if(eventsSet[key]._embedded.hasOwnProperty('categories')){\r\n          currentEvent.categories = [];\r\n          let eventCategories = eventsSet[key]._embedded.categories;\r\n          currentEvent.categories = Object.keys(eventCategories).map(function(category){\r\n            return eventCategories[category].name\r\n          });\r\n        }\r\n\r\n        currentEvent.img = this.getImageForEvent(eventsSet[key].images);\r\n\r\n        tmpEventSet.push(currentEvent);\r\n\r\n      }\r\n    }\r\n    return tmpEventSet;\r\n  }\r\n\r\n\r\n  makeRequest(handler, url=this.apiUrl, attrs={}, method=\"GET\"){\r\n    attrs = Object.keys(attrs).map(function(key){\r\n      return `${key}=${attrs[key]}`;\r\n    }).join(\"&\");\r\n\r\n    url = [url,attrs].join(\"?\");\r\n\r\n    this.xmlHTTP = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    if(method == \"POST\") {\r\n      this.xmlHTTP.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\r\n    }\r\n    this.xmlHTTP.widget = this;\r\n    this.xmlHTTP.onreadystatechange = handler;\r\n    this.xmlHTTP.open(method, url, true);\r\n    this.xmlHTTP.send();\r\n  }\r\n\r\n  createDOMItem(itemConfig){\r\n\r\n    var medWrapper = document.createElement(\"a\");\r\n    medWrapper.classList.add(\"event-content-wraper\");\r\n    medWrapper.target = '_blank';\r\n    medWrapper.href = itemConfig.url;\r\n\r\n    var event = document.createElement(\"li\");\r\n    event.classList.add(\"event-wrapper\");\r\n    event.style.backgroundImage = `url('${itemConfig.img}')`;\r\n    event.style.height = `${this.config.height}px`;\r\n    event.style.width  = `${this.config.width}px`;\r\n\r\n    var nameContent = document.createTextNode(itemConfig.name),\r\n    name =  document.createElement(\"span\");\r\n    name.classList.add(\"event-name\");\r\n    name.appendChild(nameContent);\r\n    medWrapper.appendChild(name);\r\n\r\n\r\n\r\n    var dateTimeContent = document.createTextNode(this.formatDate(itemConfig.date)),\r\n    dateTime = document.createElement(\"span\");\r\n    dateTime.classList.add(\"event-date\");\r\n    dateTime.appendChild(dateTimeContent);\r\n\r\n    var dateWraper = document.createElement(\"span\");\r\n    dateWraper.classList.add(\"event-date-wraper\");\r\n    dateWraper.appendChild(dateTime);\r\n    medWrapper.appendChild(dateWraper);\r\n\r\n    if(itemConfig.hasOwnProperty(\"address\")){\r\n      var addressWrapper = document.createElement(\"span\");\r\n      addressWrapper.classList.add(\"address-wrapper\");\r\n\r\n      if( itemConfig.address.hasOwnProperty(\"line1\") ){\r\n        var addressOneText = document.createTextNode(itemConfig.address.line1),\r\n        addressOne =  document.createElement(\"span\");\r\n        addressOne.classList.add(\"event-address\");\r\n        addressOne.appendChild(addressOneText);\r\n        addressWrapper.appendChild(addressOne);\r\n      }\r\n\r\n      if( itemConfig.address.hasOwnProperty(\"line2\") ){\r\n        var addressTwoText = document.createTextNode(itemConfig.address.line2),\r\n        addressTwo =  document.createElement(\"span\");\r\n        addressTwo.classList.add(\"event-address\");\r\n        addressTwo.appendChild(addressTwoText);\r\n        addressWrapper.appendChild(addressTwo);\r\n      }\r\n\r\n      medWrapper.appendChild(addressWrapper);\r\n    }\r\n\r\n    if(itemConfig.hasOwnProperty(\"categories\")) {\r\n      var categoriesWrapper = document.createElement(\"span\");\r\n      categoriesWrapper.classList.add(\"category-wrapper\");\r\n\r\n      itemConfig.categories.forEach(function (element) {\r\n        var categoryText = document.createTextNode(element),\r\n          category = document.createElement(\"span\");\r\n        category.classList.add(\"event-category\");\r\n        category.appendChild(categoryText);\r\n        categoriesWrapper.appendChild(category);\r\n      });\r\n      medWrapper.appendChild(categoriesWrapper);\r\n    }\r\n\r\n    event.appendChild(medWrapper);\r\n    return event;\r\n  }\r\n\r\n\r\n\r\n  makeImageUrl(id){\r\n    return `https://app.ticketmaster.com/discovery/v2/events/${id}/images.json`;\r\n  }\r\n\r\n\r\n  /*\r\n   * Config block\r\n   */\r\n\r\n  decConfig(config){\r\n    return JSON.parse(window.atob(config));\r\n  }\r\n\r\n  encConfig(config){\r\n    return window.btoa(config);\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\nconst widget = new TicketmasterWidget(\"#ticketmaster-config\");\r\n"]}