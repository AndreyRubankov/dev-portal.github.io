var base=function(e){function t(o){if(a[o])return a[o].exports;var r=a[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){function o(e){var t=e||{};self=this,this.apiKey=s,this.selectedCategory=ko.observable(""),this.selectedMethod=ko.observable(""),this.selectedParams=ko.observableArray([]),this.menu=new i(t,this.selectedCategory),this.methods=new l(t,this.selectedCategory,this.selectedMethod),this.params=new c(t,this.selectedMethod,this.selectedParams),this.sendButtonText=ko.pureComputed(function(){return this.selectedMethod().method.toLowerCase()},this),this.URL=ko.computed(function(){return[this.selectedMethod(),this.apiKey,this.selectedParams()]},this)}var r=a(2),s=a(3),n=a(4),i=a(5),c=a(7),l=a(8);a(9);o.prototype.onClickSendBtn=function(){n(this.URL())},ko.applyBindings(new o(r)),e.exports=r},function(e,t){var a={},o="../../apidescription.xml",r=function(e){var t=$(e).find("resources");t.each(function(){var e=$(this).find("resource");e.each(function(e,t){var o=$(t),r=$(o.find("method")[0]),s=r.find('[primary="true"]').text(),n=o.find("param"),i={};n.each(function(e,t){var a=$(this);i[a.attr("name")]={name:a.attr("name"),required:a.attr("required"),type:a.attr("type"),style:a.attr("style"),"default":a.attr("default"),doc:a.first("doc").text().trim()}}),a[s]||(a[s]={}),a[s][r.attr("name")]=a[s][r.attr("name")]||{},a[s].ALL=a[s].ALL||{},a[s].ALL[r.attr("id")]={id:r.attr("id"),name:r.attr("apigee:displayName")?r.attr("apigee:displayName"):r.attr("id"),method:r.attr("name"),category:s,path:o.attr("path"),parameters:i,base:o.parent().attr("base"),documentation:$(r.find("doc")[0]).attr("apigee:url"),description:$(r.find("doc")[0]).text().trim()},a[s][r.attr("name")][r.attr("id")]={id:r.attr("id"),name:r.attr("apigee:displayName")?r.attr("apigee:displayName"):r.attr("id"),method:r.attr("name"),category:s,path:o.attr("path"),parameters:i,base:o.parent().attr("base"),documentation:$(r.find("doc")[0]).attr("apigee:url"),description:$(r.find("doc")[0]).text().trim()}})})},s=function(){$.ajax({url:o,async:!1,dataType:$.browser.msie?"text":"xml",success:function(e){var t;"string"==typeof e?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e)):t=e,r(t)},error:function(e,t,a){alert("Data Could Not Be Loaded - "+t)}})};s(),e.exports=a},function(e,t){var a=sessionStorage.getItem("tk-api-key")||"7elxdku9GGG5k8j0Xm8KWdANDgecHMV0";e.exports={name:"apikey",style:"query",value:ko.observable(a)}},function(e,t){var a=function(e,t,a){var o=encodeURI(e);console.log(o),$.ajax({type:t,url:o,async:!0,dataType:"json",complete:a})},o=function(e){var t,a,o,r,s,n;if(!e&&!e.length)return!1;o=e[0].base,r=e[0].path,s=e[1],n=e[2].filter(function(e){return"query"===e.style}),t=r.match(/([^{]*?)\w(?=\})/gim);var i=e[2].filter(function(e){return"template"===e.style});return t.forEach(function(e){var t=i.find(function(t){return t.name===e});r=r.replace("{"+t.name+"}",t.value()||t["default"])}),n[0]&&"apikey"===n[0].name||n.unshift(s),n=n.map(function(e){return[e.name,e.value()||e["default"]].join("=")}).join("&"),a=[o,"/",r,"?",n].join("")},r=function(e){console.clear();var t=o(e);a(t,e[0].method,function(e,t){if("error"==t){var a=e&&e.responseJSON&&e.responseJSON.errors&&e.responseJSON.errors[0];console.warn(t,e.status),a?(console.warn(a.code),console.warn(a.detail)):console.warn(e)}else console.log(t,e.status),console.log(e.responseJSON)})};e.exports=r},function(e,t,a){function o(e,t){r=this,this.category=t,this.categories=ko.observableArray(Object.keys(e).map(function(e,t){return{checked:ko.observable(!t),name:e,link:!1}})),this.selectCategory(this.categories()[0])}var r,s=a(6);o.prototype.selectCategory=function(e){var t=e.name;r.category(t),s.checkActive(r.categories,t)},e.exports=o},function(e,t){t.getModelArray=function(e){var t=e.obj||{},a=e.arr||[],o=e.prop||"name";for(var r in t)if(t.hasOwnProperty(r)){var s=a.find(function(e){return e.name===t[r][o]});s||a.push({checked:ko.observable(!1),name:t[r][o]})}return a},t.checkActive=function(e,t){return!(!e&&!t)&&void e(e().map(function(e){return e.name===t?e.checked(!0):e.checked(!1),e}))}},function(e,t){function a(e,t,a){r=e,o=this,this.method=t,this.params=a,this.animationSpeed=200,this.isHidden=ko.observable(!0),this.paramInFocus=ko.observable(""),this.paramsModel=ko.computed(o.updateParamsModel),this.paramInFocus(this.paramsModel()[0]),this.isDirty=ko.computed(function(){var e=this.paramsModel().filter(function(e){return e.isDirty()===!0});return e.length>0},this)}var o,r;a.prototype.updateParamsModel=function(){var e=o.method().parameters||{},t=[];for(var a in e){var r=e[a];e.hasOwnProperty(a)&&(r.value=r.value||ko.observable(""),r.isDirty=ko.pureComputed(function(){return!!this.value().trim().length},r),r.hasCalendar=a.search(/(date|time)/gim)!=-1,r.hasPopUp=a.search(/(attractionId|venueId)/gim)!=-1,t.push(r))}return o.prepareUrlPairs(t,o.params),o.paramInFocus(t[0]),t},a.prototype.slideToggle=function(e,t){$(t.currentTarget).parents(".js-slide-control").find(".js-slide-wrapper").slideToggle(e.animationSpeed,function(){e.isHidden(!e.isHidden())})},a.prototype.onFocus=function(e){o.paramInFocus(e)},a.prototype.prepareUrlPairs=function(e,t){return!(!e&&!t)&&t(e.filter(function(e){return e.value()||e["default"]}))},e.exports=a},function(e,t,a){"use strict";function o(e,t,a){r=this,s=e,this.category=t,this.method=a,this.togglePopUp=ko.observable(!1),this.radiosModel=ko.observableArray([]),this.selectModel=ko.observableArray([]),this.updateModel(this.category()),this.category.subscribe(this.updateModel)}var r,s,n=a(6);o.prototype.updateModel=function(e){r.updateRadiosModel(s[e]),r.updateSelect(r.radiosModel()[0])},o.prototype.onchangeRadios=function(e){n.checkActive(r.radiosModel,e.name),r.updateSelect(e)},o.prototype.updateRadiosModel=function(e){var t=e||{},a=[];for(var o in t)if(t.hasOwnProperty(o)){var r={checked:ko.observable("ALL"===o),name:o};"ALL"===o?a.unshift(r):a.push(r)}return this.radiosModel(a),a},o.prototype.updateSelect=function(e){var t=s[r.category()][e.name]||{},a=[],o=0;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];a.push({checked:ko.observable(!o),name:i.name,id:i.id,link:i.documentation,about:i.description,category:i.category,method:i.method}),!o&&this.method(s[i.category][i.method][i.id]),o++}r.selectModel(a)},o.prototype.onSelectMethod=function(e){n.checkActive(r.selectModel,e.name),r.method(s[e.category][e.method][e.id])},o.prototype.onAboutClick=function(e,t){e.togglePopUp(!e.togglePopUp())},e.exports=o},function(e,t){function a(e){r=this,this.animationSpeed=e.animationSpeed||200,this.selectModel=e.options||ko.observableArray([]),this.placeholder=ko.observable(e.placeholder||""),this.onselect=e.onselect||function(e){console.log(e+"selected!")},this.selected=ko.observable(this.selectModel()[0]),this.isOneOption=ko.pureComputed(function(){return this.selectModel().length<2},this)}function o(e){var t=$(e.currentTarget).parents(".js-custom-select");return{wrapper:t.find(".js-custom-select-wrapper"),layer:t.find(".js-custom-select-layer")}}var r;a.prototype.slideToggle=function(e,t){if(e.isOneOption())return!1;var a=o(t);a.wrapper.slideToggle(e.animationSpeed),a.layer.toggleClass("hidden")},a.prototype.selectItem=function(e,t){var a=this;this.selected(e),this.onselect(e),this.slideToggle(a,t)},e.exports=ko.components.register("custom-select",{viewModel:a,template:['<div class="api-exp-custom-select js-custom-select">','<div class="api-exp-custom-select-wrapper">','<select data-bind="options: selectModel, optionsText: \'name\', value: selected" class="api-exp-custom-select__field" name="api-exp-method"></select>','<span class="api-exp-custom-select__placeholder">','<input data-bind="event: {click: slideToggle}, attr: {value: selected().name, disabled: isOneOption}" type="text" value="" readonly="">','<b data-bind="css: {hidden: isOneOption}" class="api-exp-custom-select__chevron">&nbsp;</b>',"</span>",'<ul data-bind="foreach: selectModel" class="api-exp-custom-select__list js-custom-select-wrapper">','<li data-bind="css: {\'active\': checked}" class="api-exp-custom-select__item">','<button data-bind="event: {click: $parent.selectItem.bind($parent)}, text: name, css: {\'active\': checked()}, attr: {\'data-value\': name}"  class="api-exp-custom-select__item-label" href="#"></button>','<a data-bind="attr: {href: link}, css: {\'hidden\': !link}" class="api-exp-custom-select__item-link" target="_blank">&nbsp;</a>',"</li>","</ul>","</div>",'<div data-bind="click: slideToggle" class="api-exp-custom-select-layer js-custom-select-layer hidden"></div>',"</div>"].join("")})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2NyaXB0LmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBiYzEwN2Q0ZTlhNTJmMmY4ZTJiZCIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9WaWV3TW9kZWxzL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9hcGlrZXkuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9hamF4U2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9WaWV3TW9kZWxzL21lbnVWaWV3TW9kZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9oZWxwZXJGdW5jLmpzIiwid2VicGFjazovLy8uL3NjcmlwdHMvYXBpLWV4cGxvcmVyL3YyL1ZpZXdNb2RlbHMvcGFyYW1zVmlld01vZGVsLmpzIiwid2VicGFjazovLy8uL3NjcmlwdHMvYXBpLWV4cGxvcmVyL3YyL1ZpZXdNb2RlbHMvbWV0aG9kc1ZpZXdNb2RlbC5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9jb21wb25lbnRzL2N1c3RvbVNlbGVjdC5qcyJdLCJuYW1lcyI6WyJiYXNlIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiQXBwVmlld01vZGVsIiwib2JqIiwic2VsZiIsInRoaXMiLCJhcGlLZXkiLCJzZWxlY3RlZENhdGVnb3J5Iiwia28iLCJvYnNlcnZhYmxlIiwic2VsZWN0ZWRNZXRob2QiLCJzZWxlY3RlZFBhcmFtcyIsIm9ic2VydmFibGVBcnJheSIsIm1lbnUiLCJNZW51Vmlld01vZGVsIiwibWV0aG9kcyIsIk1ldGhvZHNWaWV3TW9kZWwiLCJwYXJhbXMiLCJQYXJhbXNWaWV3TW9kZWwiLCJzZW5kQnV0dG9uVGV4dCIsInB1cmVDb21wdXRlZCIsIm1ldGhvZCIsInRvTG93ZXJDYXNlIiwiVVJMIiwiY29tcHV0ZWQiLCJhamF4U2VydmljZSIsInByb3RvdHlwZSIsIm9uQ2xpY2tTZW5kQnRuIiwiYXBwbHlCaW5kaW5ncyIsIkNPTkZJR19VUkwiLCJwYXJzZVhNTERvYyIsInhtbCIsIkFQSXMiLCIkIiwiZmluZCIsImVhY2giLCJpbmRleCIsImVsZW1lbnQiLCJtZSIsImNhdGVnb3J5IiwidGV4dCIsInBhcmFtZXRlcnMiLCJ0aGF0IiwiYXR0ciIsIm5hbWUiLCJyZXF1aXJlZCIsInR5cGUiLCJzdHlsZSIsImRlZmF1bHQiLCJkb2MiLCJmaXJzdCIsInRyaW0iLCJBTEwiLCJwYXRoIiwicGFyZW50IiwiZG9jdW1lbnRhdGlvbiIsImRlc2NyaXB0aW9uIiwicmVhZEZyb21XQURMIiwiYWpheCIsInVybCIsImFzeW5jIiwiZGF0YVR5cGUiLCJicm93c2VyIiwic3VjY2VzcyIsInJlc3BvbnNlIiwiQWN0aXZlWE9iamVjdCIsImxvYWRYTUwiLCJlcnJvciIsIlhNTEh0dHBSZXF1ZXN0IiwidGV4dFN0YXR1cyIsImVycm9yVGhyb3duIiwiYWxlcnQiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJ2YWx1ZSIsImNhbGxiYWNrIiwiZXNjYXBlZFVSTCIsImVuY29kZVVSSSIsImNvbnNvbGUiLCJsb2ciLCJjb21wbGV0ZSIsInByZXBhcmVVcmwiLCJhcnIiLCJyZXBsYWNlbWVudCIsImRvbWFpbiIsImxlbmd0aCIsImZpbHRlciIsIml0ZW0iLCJtYXRjaCIsInRlbXBsYXRlc0FyciIsImZvckVhY2giLCJ2YWwiLCJwYXJhbSIsInJlcGxhY2UiLCJ1bnNoaWZ0IiwibWFwIiwiam9pbiIsInNlbmRQcmltYXJ5UmVxdWVzdCIsImNsZWFyIiwibWVzc2FnZSIsImVyciIsInJlc3BvbnNlSlNPTiIsImVycm9ycyIsIndhcm4iLCJzdGF0dXMiLCJjb2RlIiwiZGV0YWlsIiwiY2F0ZWdvcmllcyIsIk9iamVjdCIsImtleXMiLCJjaGVja2VkIiwibGluayIsInNlbGVjdENhdGVnb3J5IiwiaGYiLCJjYXRlZ29yeU5hbWUiLCJjaGVja0FjdGl2ZSIsImdldE1vZGVsQXJyYXkiLCJwcm9wIiwiaSIsImhhc093blByb3BlcnR5IiwibTEiLCJwdXNoIiwia29BcnIiLCJhY3RpdmVFbGVtIiwicmF3IiwiYW5pbWF0aW9uU3BlZWQiLCJpc0hpZGRlbiIsInBhcmFtSW5Gb2N1cyIsInBhcmFtc01vZGVsIiwidXBkYXRlUGFyYW1zTW9kZWwiLCJpc0RpcnR5IiwiZGlydHkiLCJoYXNDYWxlbmRhciIsInNlYXJjaCIsImhhc1BvcFVwIiwicHJlcGFyZVVybFBhaXJzIiwic2xpZGVUb2dnbGUiLCJ2aWV3TW9kZWwiLCJldmVudCIsImN1cnJlbnRUYXJnZXQiLCJwYXJlbnRzIiwib25Gb2N1cyIsImtvT2JzIiwidG9nZ2xlUG9wVXAiLCJyYWRpb3NNb2RlbCIsInNlbGVjdE1vZGVsIiwidXBkYXRlTW9kZWwiLCJzdWJzY3JpYmUiLCJ1cGRhdGVSYWRpb3NNb2RlbCIsInVwZGF0ZVNlbGVjdCIsIm9uY2hhbmdlUmFkaW9zIiwiY291bnQiLCJwcm9wZXJ0eSIsImFib3V0Iiwib25TZWxlY3RNZXRob2QiLCJvbkFib3V0Q2xpY2siLCJtb2RlbCIsIkN1c3RvbVNlbGVjdCIsIm9wdGlvbnMiLCJwbGFjZWhvbGRlciIsIm9uc2VsZWN0Iiwic2VsZWN0ZWQiLCJpc09uZU9wdGlvbiIsImZpbmRFbGVtZW50Iiwid3JhcHBlciIsImxheWVyIiwiZWwiLCJ0b2dnbGVDbGFzcyIsInNlbGVjdEl0ZW0iLCJjb21wb25lbnRzIiwicmVnaXN0ZXIiLCJ0ZW1wbGF0ZSJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsTUFDSyxT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Q0EsMElBQ0EsOEZBQ0EsVUFDQSxxR0FDQSxrRkFDQSw2TUFDQSxrSUFDQSxRQUNBLFFBQ0EsU0FDQSwrR0FDQSxVQUNBM0UsS0FBQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYmFzZSA9XG4vKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXHJcblx0ICogTWFpbiBmaWxlIGZvciBBcGkgRXhwbHJlciB2Mi4wXHJcblx0ICogRm9yIGRldmVsb3BtZW50IHBsZWFzZSB1c2UgV2VicGFjayB0byBidW5kbGUgYWxsIG1vZHVsZXNcclxuXHQgKiBJdCBjYW4gYmUgbWFkZSB1c2luZyBucG0gc2NyaXB0cyBjbWQgLSAnd2VicGFjaydcclxuXHQgKi9cclxuXHQvLyBDb21wb25lbnRzXHJcblx0dmFyIGJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xyXG5cdHZhciBhcGlLZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xyXG5cdHZhciBhamF4U2VydmljZSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XHJcblx0XHJcblx0Ly8gVmlldyBNb2RlbHNcclxuXHR2YXIgTWVudVZpZXdNb2RlbCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XHJcblx0dmFyIFBhcmFtc1ZpZXdNb2RlbCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XHJcblx0dmFyIE1ldGhvZHNWaWV3TW9kZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xyXG5cdFxyXG5cdC8vIE1vZHVsZXNcclxuXHR2YXIgY3VzdG9tU2VsZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcclxuXHRcclxuXHQvKipcclxuXHQgKiBBcHBWaWV3TW9kZWxcclxuXHQgKiBAcGFyYW0gb2JqIHtvYmplY3R9IGdsb2JhbCBkYXRhIG9iamVjdFxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIEFwcFZpZXdNb2RlbChvYmopIHtcclxuXHQgIHZhciBiYXNlID0gb2JqIHx8IHt9O1xyXG5cdCAgc2VsZiA9IHRoaXM7XHJcblx0ICB0aGlzLmFwaUtleSA9IGFwaUtleTtcclxuXHRcclxuXHQgIC8vIG9ic2VydmFibGVzXHJcblx0ICB0aGlzLnNlbGVjdGVkQ2F0ZWdvcnkgPSBrby5vYnNlcnZhYmxlKCcnKTtcclxuXHQgIHRoaXMuc2VsZWN0ZWRNZXRob2QgPSBrby5vYnNlcnZhYmxlKCcnKTtcclxuXHQgIHRoaXMuc2VsZWN0ZWRQYXJhbXMgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG5cdCAgLy8gc3ViLW1vZGVsc1xyXG5cdCAgdGhpcy5tZW51ID0gbmV3IE1lbnVWaWV3TW9kZWwoYmFzZSwgdGhpcy5zZWxlY3RlZENhdGVnb3J5KTtcclxuXHQgIHRoaXMubWV0aG9kcyA9IG5ldyBNZXRob2RzVmlld01vZGVsKGJhc2UsIHRoaXMuc2VsZWN0ZWRDYXRlZ29yeSwgdGhpcy5zZWxlY3RlZE1ldGhvZCk7XHJcblx0ICB0aGlzLnBhcmFtcyA9IG5ldyBQYXJhbXNWaWV3TW9kZWwoYmFzZSwgdGhpcy5zZWxlY3RlZE1ldGhvZCwgdGhpcy5zZWxlY3RlZFBhcmFtcyk7XHJcblx0XHJcblx0ICAvLyBjb21wdXRlZFxyXG5cdCAgdGhpcy5zZW5kQnV0dG9uVGV4dCA9IGtvLnB1cmVDb21wdXRlZChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIHJldHVybiB0aGlzLnNlbGVjdGVkTWV0aG9kKCkubWV0aG9kLnRvTG93ZXJDYXNlKCk7XHJcblx0ICB9LCB0aGlzKTtcclxuXHQgIHRoaXMuVVJMID0ga28uY29tcHV0ZWQoZnVuY3Rpb24gKCkge1xyXG5cdCAgICByZXR1cm4gW1xyXG5cdCAgICAgIHRoaXMuc2VsZWN0ZWRNZXRob2QoKSxcclxuXHQgICAgICB0aGlzLmFwaUtleSxcclxuXHQgICAgICB0aGlzLnNlbGVjdGVkUGFyYW1zKClcclxuXHQgICAgXTtcclxuXHQgIH0sIHRoaXMpO1xyXG5cdH1cclxuXHRcclxuXHRBcHBWaWV3TW9kZWwucHJvdG90eXBlLm9uQ2xpY2tTZW5kQnRuID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgYWpheFNlcnZpY2UodGhpcy5VUkwoKSk7XHJcblx0fTtcclxuXHRcclxuXHQvLyBBY3RpdmF0ZXMga25vY2tvdXQuanNcclxuXHRrby5hcHBseUJpbmRpbmdzKG5ldyBBcHBWaWV3TW9kZWwoYmFzZSkpO1xyXG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBiYXNlID0ge307XHJcblx0dmFyIENPTkZJR19VUkwgPSAnLi4vLi4vYXBpZGVzY3JpcHRpb24ueG1sJztcclxuXHRcclxuXHQvL2dldHMgaW1wb3J0YW50IGVsZW1lbnRzIGZyb20gV0FETCBkb2N1bWVudCBhbmQgd3JpdGVzIHRoZW0gaW50byBnbG9iYWwgdmFyaWFibGVzXHJcblx0dmFyIHBhcnNlWE1MRG9jID0gZnVuY3Rpb24gKHhtbCkge1xyXG5cdCAgLy9nZXQgYWxsIEFQSXNcclxuXHQgIHZhciBBUElzID0gJCh4bWwpLmZpbmQoXCJyZXNvdXJjZXNcIiksXHJcblx0ICAgIGlzRmlyc3RNZXRob2QgPSB0cnVlOyAvL3ZhcmlhYmxlIHRvIHN0b3JlIHRoZSB2ZXJ5IGZpcnN0IG1ldGhvZCBmb3VuZFxyXG5cdFxyXG5cdCAgQVBJcy5lYWNoKGZ1bmN0aW9uKCl7XHJcblx0ICAgIC8vZ2V0IGFsbCBtZXRob2RzIGluIHRoZSBBUElcclxuXHQgICAgdmFyIG1ldGhvZHMgPSAkKHRoaXMpLmZpbmQoJ3Jlc291cmNlJyk7XHJcblx0XHJcblx0ICAgIG1ldGhvZHMuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCl7XHJcblx0ICAgICAgdmFyIG1lID0gJChlbGVtZW50KSwgLy9tZXRob2RcclxuXHQgICAgICAgIG1ldGhvZCA9ICQobWUuZmluZCgnbWV0aG9kJylbMF0pLCAvL2dldCBtZXRob2QgZGV0YWlscyBvYmplY3RcclxuXHQgICAgICAgIGNhdGVnb3J5ID0gbWV0aG9kLmZpbmQoJ1twcmltYXJ5PVwidHJ1ZVwiXScpLnRleHQoKSwgLy9nZXQgQVBJIG5hbWVcclxuXHQgICAgICAgIHBhcmFtcyA9IG1lLmZpbmQoJ3BhcmFtJyksIC8vbWV0aG9kIHBhcmFtc1xyXG5cdCAgICAgICAgcGFyYW1ldGVycyA9IHt9OyAvL3RlbXBvcmFyeSBvYmplY3QgdG8gc3RvcmUgcGFyYW0gZGF0YVxyXG5cdFxyXG5cdCAgICAgIHBhcmFtcy5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KXsgLy9maWxsIHBhcmFtIG9iamVjdCB3aXRoIHJlcXVpcmVkIGRhdGFcclxuXHQgICAgICAgIHZhciB0aGF0ID0gJCh0aGlzKTtcclxuXHQgICAgICAgIHBhcmFtZXRlcnNbdGhhdC5hdHRyKCduYW1lJyldID0ge1xyXG5cdCAgICAgICAgICAnbmFtZSc6IHRoYXQuYXR0cignbmFtZScpLFxyXG5cdCAgICAgICAgICAncmVxdWlyZWQnOiB0aGF0LmF0dHIoJ3JlcXVpcmVkJyksXHJcblx0ICAgICAgICAgICd0eXBlJzogdGhhdC5hdHRyKCd0eXBlJyksXHJcblx0ICAgICAgICAgICdzdHlsZSc6IHRoYXQuYXR0cignc3R5bGUnKSxcclxuXHQgICAgICAgICAgJ2RlZmF1bHQnOiB0aGF0LmF0dHIoJ2RlZmF1bHQnKSxcclxuXHQgICAgICAgICAgJ2RvYyc6IHRoYXQuZmlyc3QoJ2RvYycpLnRleHQoKS50cmltKClcclxuXHQgICAgICAgIH1cclxuXHQgICAgICB9KTtcclxuXHRcclxuXHQgICAgICBpZiAoIWJhc2VbY2F0ZWdvcnldKXtcclxuXHQgICAgICAgIGJhc2VbY2F0ZWdvcnldID0ge307IC8vIGNyZWF0ZSBuZXcgQVBJIGluIGJhc2Ugb2JqZWN0IGlmIHRoZXJlIGlzIG5vbmVcclxuXHQgICAgICB9XHJcblx0ICAgICAgYmFzZVtjYXRlZ29yeV1bbWV0aG9kLmF0dHIoXCJuYW1lXCIpXSA9IGJhc2VbY2F0ZWdvcnldW21ldGhvZC5hdHRyKFwibmFtZVwiKV0gfHwge307XHJcblx0ICAgICAgYmFzZVtjYXRlZ29yeV0uQUxMID0gYmFzZVtjYXRlZ29yeV0uQUxMIHx8IHt9O1xyXG5cdCAgICAgIGJhc2VbY2F0ZWdvcnldLkFMTFttZXRob2QuYXR0cihcImlkXCIpXT0ge1xyXG5cdCAgICAgICAgJ2lkJyA6IG1ldGhvZC5hdHRyKFwiaWRcIiksIC8vIG1ldGhvZCBpZFxyXG5cdCAgICAgICAgJ25hbWUnIDogbWV0aG9kLmF0dHIoXCJhcGlnZWU6ZGlzcGxheU5hbWVcIikgPyBtZXRob2QuYXR0cihcImFwaWdlZTpkaXNwbGF5TmFtZVwiKSA6IG1ldGhvZC5hdHRyKFwiaWRcIiksIC8vIG1ldGhvZCBuYW1lXHJcblx0ICAgICAgICAnbWV0aG9kJyA6IG1ldGhvZC5hdHRyKCduYW1lJyksIC8vIEdFVCBvciBQT1NUXHJcblx0ICAgICAgICAnY2F0ZWdvcnknIDogY2F0ZWdvcnksIC8vIEFQSSBuYW1lXHJcblx0ICAgICAgICAncGF0aCc6IG1lLmF0dHIoJ3BhdGgnKSwgLy8gbWV0aG9kIFVSTFxyXG5cdCAgICAgICAgJ3BhcmFtZXRlcnMnOiBwYXJhbWV0ZXJzLCAvLyBtZXRob2QgcGFyYW1ldGVyc1xyXG5cdCAgICAgICAgJ2Jhc2UnIDogbWUucGFyZW50KCkuYXR0cignYmFzZScpLCAvLyBtZXRob2QgYmFzZSBsaW5rXHJcblx0ICAgICAgICAnZG9jdW1lbnRhdGlvbicgOiAkKG1ldGhvZC5maW5kKCdkb2MnKVswXSkuYXR0cignYXBpZ2VlOnVybCcpLCAvLyBsaW5rIHRvIGRvY3VtZW50YXRpb25cclxuXHQgICAgICAgICdkZXNjcmlwdGlvbicgOiAkKG1ldGhvZC5maW5kKCdkb2MnKVswXSkudGV4dCgpLnRyaW0oKSAvL21ldGhvZCBkZXNjcmlwdGlvblxyXG5cdCAgICAgIH07XHJcblx0XHJcblx0ICAgICAgYmFzZVtjYXRlZ29yeV1bbWV0aG9kLmF0dHIoXCJuYW1lXCIpXVttZXRob2QuYXR0cihcImlkXCIpXSA9IHtcclxuXHQgICAgICAgICdpZCcgOiBtZXRob2QuYXR0cihcImlkXCIpLCAvLyBtZXRob2QgaWRcclxuXHQgICAgICAgICduYW1lJyA6IG1ldGhvZC5hdHRyKFwiYXBpZ2VlOmRpc3BsYXlOYW1lXCIpID8gbWV0aG9kLmF0dHIoXCJhcGlnZWU6ZGlzcGxheU5hbWVcIikgOiBtZXRob2QuYXR0cihcImlkXCIpLCAvLyBtZXRob2QgbmFtZVxyXG5cdCAgICAgICAgJ21ldGhvZCcgOiBtZXRob2QuYXR0cignbmFtZScpLCAvLyBHRVQgb3IgUE9TVFxyXG5cdCAgICAgICAgJ2NhdGVnb3J5JyA6IGNhdGVnb3J5LCAvLyBBUEkgbmFtZVxyXG5cdCAgICAgICAgJ3BhdGgnOiBtZS5hdHRyKCdwYXRoJyksIC8vIG1ldGhvZCBVUkxcclxuXHQgICAgICAgICdwYXJhbWV0ZXJzJzogcGFyYW1ldGVycywgLy8gbWV0aG9kIHBhcmFtZXRlcnNcclxuXHQgICAgICAgICdiYXNlJyA6IG1lLnBhcmVudCgpLmF0dHIoJ2Jhc2UnKSwgLy8gbWV0aG9kIGJhc2UgbGlua1xyXG5cdCAgICAgICAgJ2RvY3VtZW50YXRpb24nIDogJChtZXRob2QuZmluZCgnZG9jJylbMF0pLmF0dHIoJ2FwaWdlZTp1cmwnKSwgLy8gbGluayB0byBkb2N1bWVudGF0aW9uXHJcblx0ICAgICAgICAnZGVzY3JpcHRpb24nIDogJChtZXRob2QuZmluZCgnZG9jJylbMF0pLnRleHQoKS50cmltKCkgLy9tZXRob2QgZGVzY3JpcHRpb25cclxuXHQgICAgICB9O1xyXG5cdCAgICB9KTtcclxuXHQgIH0pO1xyXG5cdH07XHJcblx0XHJcblx0Ly9nZXRzIGRvY3VtZW50IGZyb20gV0FETCBjb25maWd1cmF0aW9uIGZpbGVcclxuXHR2YXIgcmVhZEZyb21XQURMID0gZnVuY3Rpb24gKCkge1xyXG5cdCAgJC5hamF4KHtcclxuXHQgICAgdXJsOiBDT05GSUdfVVJMLFxyXG5cdCAgICBhc3luYyA6IGZhbHNlLFxyXG5cdCAgICBkYXRhVHlwZTogKCQuYnJvd3Nlci5tc2llKSA/IFwidGV4dFwiIDogXCJ4bWxcIixcclxuXHQgICAgc3VjY2VzcyA6IGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuXHQgICAgICB2YXIgeG1sO1xyXG5cdFxyXG5cdCAgICAgIGlmICh0eXBlb2YgcmVzcG9uc2UgPT0gXCJzdHJpbmdcIil7XHJcblx0ICAgICAgICB4bWwgPSBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxET01cIik7XHJcblx0ICAgICAgICB4bWwuYXN5bmMgPSBmYWxzZTtcclxuXHQgICAgICAgIHhtbC5sb2FkWE1MKHJlc3BvbnNlKTtcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgeG1sID0gcmVzcG9uc2U7XHJcblx0ICAgICAgfVxyXG5cdCAgICAgIHBhcnNlWE1MRG9jKHhtbCk7XHJcblx0ICAgIH0sXHJcblx0XHJcblx0ICAgIGVycm9yOiBmdW5jdGlvbihYTUxIdHRwUmVxdWVzdCwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pe1xyXG5cdCAgICAgIGFsZXJ0KCdEYXRhIENvdWxkIE5vdCBCZSBMb2FkZWQgLSAnKyB0ZXh0U3RhdHVzKTtcclxuXHQgICAgfVxyXG5cdCAgfSk7XHJcblx0fTtcclxuXHRyZWFkRnJvbVdBREwoKTtcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2U7XHJcblxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIGFwaUtleSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3RrLWFwaS1rZXknKSB8fCBcIjdlbHhka3U5R0dHNWs4ajBYbThLV2RBTkRnZWNITVYwXCI7IC8vQVBJIEtleVxyXG5cdFxyXG5cdG1vZHVsZS5leHBvcnRzID0ge1xyXG5cdCAgbmFtZTogJ2FwaWtleScsXHJcblx0ICBzdHlsZTogJ3F1ZXJ5JyxcclxuXHQgIHZhbHVlOiBrby5vYnNlcnZhYmxlKGFwaUtleSlcclxuXHR9O1xuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXHJcblx0ICogQWpheCBTZXJ2aWNlXHJcblx0ICogQHBhcmFtIHVybFxyXG5cdCAqIEBwYXJhbSBtZXRob2RcclxuXHQgKiBAcGFyYW0gY2FsbGJhY2tcclxuXHQgKi9cclxuXHR2YXIgYWpheFNlcnZpY2UgPSBmdW5jdGlvbiAodXJsLCBtZXRob2QsIGNhbGxiYWNrKSB7XHJcblx0ICB2YXIgZXNjYXBlZFVSTCA9IGVuY29kZVVSSSh1cmwpO1xyXG5cdCAgY29uc29sZS5sb2coZXNjYXBlZFVSTCk7XHJcblx0XHJcblx0ICAkLmFqYXgoe1xyXG5cdCAgICB0eXBlOiBtZXRob2QsXHJcblx0ICAgIHVybDogZXNjYXBlZFVSTCxcclxuXHQgICAgYXN5bmM6IHRydWUsXHJcblx0ICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuXHQgICAgY29tcGxldGU6IGNhbGxiYWNrXHJcblx0ICB9KTtcclxuXHR9O1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEZpbHRlcnMgYW5kIHByZXBhcmVzIHBhcmFtcyBwYWlyc1xyXG5cdCAqIEBwYXJhbSBhcnJcclxuXHQgKiBAcGFyYW0gb2JqXHJcblx0ICogQHBhcmFtIGtvT2JzXHJcblx0ICogQHJldHVybnMge2Jvb2xlYW59XHJcblx0ICovXHJcblx0dmFyIHByZXBhcmVVcmwgPSBmdW5jdGlvbiAoYXJyKSB7XHJcblx0ICB2YXIgcmVwbGFjZW1lbnQsIHVybCwgZG9tYWluLCBwYXRoLCBtZXRob2QsIGFwaUtleSwgcGFyYW1zO1xyXG5cdFxyXG5cdCAgaWYgKCFhcnIgJiYgIWFyci5sZW5ndGgpIHtcclxuXHQgICAgcmV0dXJuIGZhbHNlO1xyXG5cdCAgfVxyXG5cdCAgXHJcblx0ICBkb21haW4gPSBhcnJbMF0uYmFzZTtcclxuXHQgIHBhdGggPSBhcnJbMF0ucGF0aDtcclxuXHQgIGFwaUtleSA9IGFyclsxXTtcclxuXHQgIHBhcmFtcyA9IGFyclsyXS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcclxuXHQgICAgcmV0dXJuIGl0ZW0uc3R5bGUgPT09ICdxdWVyeSc7XHJcblx0ICB9KTtcclxuXHRcclxuXHQgIC8vIGFyciBvZiB0ZW1wbGF0ZSBtYXJrc1xyXG5cdCAgcmVwbGFjZW1lbnQgPSBwYXRoLm1hdGNoKC8oW157XSo/KVxcdyg/PVxcfSkvZ21pKTtcclxuXHRcclxuXHQgIC8vIGFyciBvZiB0ZW1wbGF0ZSBwYXJhbXNcclxuXHQgIHZhciB0ZW1wbGF0ZXNBcnIgPSBhcnJbMl0uZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XHJcblx0ICAgIHJldHVybiBpdGVtLnN0eWxlID09PSAndGVtcGxhdGUnO1xyXG5cdCAgfSk7XHJcblx0XHJcblx0ICAvLyByZXBsYWNlbWVudFxyXG5cdCAgcmVwbGFjZW1lbnQuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7XHJcblx0ICAgIHZhciBwYXJhbSA9IHRlbXBsYXRlc0Fyci5maW5kKGZ1bmN0aW9uIChpdGVtKSB7XHJcblx0ICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdmFsO1xyXG5cdCAgICB9KTtcclxuXHQgICAgcGF0aCA9IHBhdGgucmVwbGFjZSgneycrIHBhcmFtLm5hbWUgKyAnfScsIHBhcmFtLnZhbHVlKCkgfHwgcGFyYW0uZGVmYXVsdCk7XHJcblx0ICB9KTtcclxuXHRcclxuXHQgIC8vIGFkZHMgYXBpS2V5IHBhcmFtXHJcblx0ICBpZiAoIXBhcmFtc1swXSB8fCBwYXJhbXNbMF0ubmFtZSAhPT0gJ2FwaWtleScpIHtcclxuXHQgICAgcGFyYW1zLnVuc2hpZnQoYXBpS2V5KTtcclxuXHQgIH1cclxuXHRcclxuXHQgIC8vIHByZXBhcmVzIHBhcmFtcyBwYXJ0IG9mIHVybFxyXG5cdCAgcGFyYW1zID0gcGFyYW1zLm1hcChmdW5jdGlvbiAoaXRlbSkge1xyXG5cdCAgICAgIHJldHVybiBbaXRlbS5uYW1lLCBpdGVtLnZhbHVlKCkgfHwgaXRlbS5kZWZhdWx0XS5qb2luKCc9Jyk7XHJcblx0ICAgIH0pLmpvaW4oJyYnKTtcclxuXHRcclxuXHQgIHVybCA9IFtkb21haW4sICcvJywgcGF0aCwgJz8nLCBwYXJhbXNdLmpvaW4oJycpO1xyXG5cdFxyXG5cdCAgcmV0dXJuIHVybDtcclxuXHR9O1xyXG5cdFxyXG5cdC8vIHNlbmRzIHJlcXVlc3QgdG8gZ2V0IHRoZSBzZWNvbmQgY29sdW1uXHJcblx0dmFyIHNlbmRQcmltYXJ5UmVxdWVzdCA9IGZ1bmN0aW9uIChhcnIpIHtcclxuXHQgIGNvbnNvbGUuY2xlYXIoKTtcclxuXHQgIHZhciB1cmwgPSBwcmVwYXJlVXJsKGFycik7XHJcblx0ICAvLyBjb25zb2xlLmxvZyh1cmwpO1xyXG5cdFxyXG5cdCAgYWpheFNlcnZpY2UodXJsLCBhcnJbMF0ubWV0aG9kLCBmdW5jdGlvbihyZXNwb25zZSwgbWVzc2FnZSkge1xyXG5cdCAgICBpZiAobWVzc2FnZSA9PSAnZXJyb3InKSB7XHJcblx0ICAgICAgdmFyIGVyciA9IHJlc3BvbnNlICYmIHJlc3BvbnNlLnJlc3BvbnNlSlNPTiAmJiByZXNwb25zZS5yZXNwb25zZUpTT04uZXJyb3JzICYmIHJlc3BvbnNlLnJlc3BvbnNlSlNPTi5lcnJvcnNbMF07XHJcblx0ICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UsIHJlc3BvbnNlLnN0YXR1cyk7XHJcblx0ICAgICAgaWYgKGVycikge1xyXG5cdCAgICAgICAgY29uc29sZS53YXJuKGVyci5jb2RlKTtcclxuXHQgICAgICAgIGNvbnNvbGUud2FybihlcnIuZGV0YWlsKTtcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgY29uc29sZS53YXJuKHJlc3BvbnNlKTtcclxuXHQgICAgICB9XHJcblx0ICAgIH0gZWxzZSB7XHJcblx0ICAgICAgY29uc29sZS5sb2cobWVzc2FnZSwgcmVzcG9uc2Uuc3RhdHVzKTtcclxuXHQgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5yZXNwb25zZUpTT04pO1xyXG5cdCAgICB9XHJcblx0ICB9KTtcclxuXHR9O1xyXG5cdFxyXG5cdFxyXG5cdG1vZHVsZS5leHBvcnRzID0gc2VuZFByaW1hcnlSZXF1ZXN0O1xuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGhmID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcclxuXHR2YXIgc2VsZjtcclxuXHRcclxuXHRcclxuXHQvKipcclxuXHQgKiBNZW51IFZpZXctTW9kZWxcclxuXHQgKiBAcGFyYW0gYmFzZVxyXG5cdCAqIEBwYXJhbSBjYXRlZ29yeVxyXG5cdCAqIEBjb25zdHJ1Y3RvclxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIE1lbnVWaWV3TW9kZWwoYmFzZSwgY2F0ZWdvcnkpIHtcclxuXHQgIHNlbGYgPSB0aGlzO1xyXG5cdCAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xyXG5cdCAgdGhpcy5jYXRlZ29yaWVzID0ga28ub2JzZXJ2YWJsZUFycmF5KE9iamVjdC5rZXlzKGJhc2UpLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcclxuXHQgICAgcmV0dXJuIHtcclxuXHQgICAgICBjaGVja2VkOiBrby5vYnNlcnZhYmxlKCFpbmRleCksXHJcblx0ICAgICAgbmFtZTogaXRlbSxcclxuXHQgICAgICBsaW5rOiBmYWxzZVxyXG5cdCAgICB9XHJcblx0ICB9KSk7XHJcblx0XHJcblx0ICAvLyBpbml0aWFsIGxvYWRcclxuXHQgIHRoaXMuc2VsZWN0Q2F0ZWdvcnkodGhpcy5jYXRlZ29yaWVzKClbMF0pO1xyXG5cdH1cclxuXHRcclxuXHQvKipcclxuXHQgKiBNZW51IFZpZXctTW9kZWwgbWV0aG9kXHJcblx0ICogQHBhcmFtIGNhdGVnb3J5XHJcblx0ICovXHJcblx0TWVudVZpZXdNb2RlbC5wcm90b3R5cGUuc2VsZWN0Q2F0ZWdvcnkgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcclxuXHQgIHZhciBjYXRlZ29yeU5hbWUgPSBjYXRlZ29yeS5uYW1lO1xyXG5cdCAgc2VsZi5jYXRlZ29yeShjYXRlZ29yeU5hbWUpO1xyXG5cdCAgaGYuY2hlY2tBY3RpdmUoc2VsZi5jYXRlZ29yaWVzLCBjYXRlZ29yeU5hbWUpO1xyXG5cdH07XHJcblx0XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBNZW51Vmlld01vZGVsO1xyXG5cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdGV4cG9ydHMuZ2V0TW9kZWxBcnJheSA9IGZ1bmN0aW9uIGdldE1vZGVsQXJyYXkocGFyYW1zKSB7XHJcblx0ICAgIHZhciBvYmogPSBwYXJhbXMub2JqIHx8IHt9LFxyXG5cdCAgICAgICAgYXJyID0gcGFyYW1zLmFyciB8fCBbXSxcclxuXHQgICAgICAgIHByb3AgPSBwYXJhbXMucHJvcCB8fCAnbmFtZSc7XHJcblx0XHJcblx0ICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XHJcblx0ICAgICAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShpKSkgeyBjb250aW51ZTsgfVxyXG5cdFxyXG5cdCAgICAgICAgdmFyIGl0ZW0gPSBhcnIuZmluZChmdW5jdGlvbiAobTEpIHtcclxuXHQgICAgICAgICAgICByZXR1cm4gbTEubmFtZSA9PT0gb2JqW2ldW3Byb3BdO1xyXG5cdCAgICAgICAgfSk7XHJcblx0XHJcblx0ICAgICAgICBpZiAoaXRlbSkgeyBjb250aW51ZTsgfVxyXG5cdFxyXG5cdCAgICAgICAgYXJyLnB1c2goe1xyXG5cdCAgICAgICAgICAgIGNoZWNrZWQ6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxyXG5cdCAgICAgICAgICAgIG5hbWU6IG9ialtpXVtwcm9wXVxyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgIH1cclxuXHQgICAgcmV0dXJuIGFycjtcclxuXHR9O1xyXG5cdFxyXG5cdGV4cG9ydHMuY2hlY2tBY3RpdmUgPSBmdW5jdGlvbiBjaGVja0FjdGl2ZShrb0FyciwgYWN0aXZlRWxlbSkge1xyXG5cdCAgICBpZiAoIWtvQXJyICYmICFhY3RpdmVFbGVtKSB7cmV0dXJuIGZhbHNlO31cclxuXHRcclxuXHQgICAga29BcnIoa29BcnIoKS5tYXAoZnVuY3Rpb24gKG9iaikge1xyXG5cdCAgICAgICAgaWYgKG9iai5uYW1lID09PSBhY3RpdmVFbGVtKSB7XHJcblx0ICAgICAgICAgICAgb2JqLmNoZWNrZWQodHJ1ZSk7XHJcblx0ICAgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgICAgIG9iai5jaGVja2VkKGZhbHNlKTtcclxuXHQgICAgICAgIH1cclxuXHQgICAgICAgIHJldHVybiBvYmo7XHJcblx0ICAgIH0pKTtcclxuXHR9O1xyXG5cdFxyXG5cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBzZWxmO1xyXG5cdHZhciBiYXNlO1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFBhcmFtcyBWaWV3LU1vZGVsXHJcblx0ICogQHBhcmFtIHJhd1xyXG5cdCAqIEBwYXJhbSBtZXRob2RcclxuXHQgKiBAcGFyYW0gcGFyYW1zXHJcblx0ICogQGNvbnN0cnVjdG9yXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gUGFyYW1zVmlld01vZGVsKHJhdywgbWV0aG9kLCBwYXJhbXMpIHtcclxuXHQgIGJhc2UgPSByYXc7XHJcblx0ICBzZWxmID0gdGhpcztcclxuXHQgIHRoaXMubWV0aG9kID0gbWV0aG9kO1xyXG5cdCAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcblx0ICBcclxuXHQgIHRoaXMuYW5pbWF0aW9uU3BlZWQgPSAyMDA7XHJcblx0ICB0aGlzLmlzSGlkZGVuID0ga28ub2JzZXJ2YWJsZSh0cnVlKTtcclxuXHQgIHRoaXMucGFyYW1JbkZvY3VzID0ga28ub2JzZXJ2YWJsZSgnJyk7XHJcblx0ICB0aGlzLnBhcmFtc01vZGVsID0ga28uY29tcHV0ZWQoc2VsZi51cGRhdGVQYXJhbXNNb2RlbCk7XHJcblx0ICB0aGlzLnBhcmFtSW5Gb2N1cyh0aGlzLnBhcmFtc01vZGVsKClbMF0pO1xyXG5cdCAgdGhpcy5pc0RpcnR5ID0ga28uY29tcHV0ZWQoZnVuY3Rpb24gKCkge1xyXG5cdCAgICB2YXIgZGlydHkgPSB0aGlzLnBhcmFtc01vZGVsKCkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XHJcblx0ICAgICAgICByZXR1cm4gaXRlbS5pc0RpcnR5KCkgPT09IHRydWU7XHJcblx0ICAgICAgfSk7XHJcblx0ICAgIHJldHVybiBkaXJ0eS5sZW5ndGggPiAwO1xyXG5cdCAgfSwgdGhpcyk7XHJcblx0fVxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEluaXRpYWwgYnVpbGQgb2YgU2VsZWN0IE1vZGVsXHJcblx0ICovXHJcblx0UGFyYW1zVmlld01vZGVsLnByb3RvdHlwZS51cGRhdGVQYXJhbXNNb2RlbCA9IGZ1bmN0aW9uICgpIHtcclxuXHQgIHZhciBvYmogPSBzZWxmLm1ldGhvZCgpLnBhcmFtZXRlcnMgfHwge30sXHJcblx0ICAgIGFyciA9IFtdO1xyXG5cdFxyXG5cdCAgZm9yICh2YXIgaSBpbiBvYmopIHtcclxuXHQgICAgdmFyIHZhbHVlID0gb2JqW2ldO1xyXG5cdFxyXG5cdCAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xyXG5cdCAgICAgIGNvbnRpbnVlO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIHZhbHVlLnZhbHVlID0gdmFsdWUudmFsdWUgfHwga28ub2JzZXJ2YWJsZSgnJyk7XHJcblx0XHJcblx0ICAgIC8vICdkaXJ0eScgZmxhZyB3YXRjaGVyIGZvciBjdXJyZW50IGZpZWxkXHJcblx0ICAgIHZhbHVlLmlzRGlydHkgPSBrby5wdXJlQ29tcHV0ZWQoZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgIHJldHVybiAhIXRoaXMudmFsdWUoKS50cmltKCkubGVuZ3RoO1xyXG5cdCAgICB9LCB2YWx1ZSk7XHJcblx0XHJcblx0ICAgIC8vIGFkZCBjYWxlbmRhciBidG4gZm9yIGN1cnJlbnQgZmllbGRcclxuXHQgICAgdmFsdWUuaGFzQ2FsZW5kYXIgPSBpLnNlYXJjaCgvKGRhdGV8dGltZSkvZ21pKSAhPSAtMTtcclxuXHRcclxuXHQgICAgLy8gYWRkIHBvcC11cCBidG4gZm9yIGN1cnJlbnQgZmllbGRcclxuXHQgICAgdmFsdWUuaGFzUG9wVXAgPSBpLnNlYXJjaCgvKGF0dHJhY3Rpb25JZHx2ZW51ZUlkKS9nbWkpICE9IC0xO1xyXG5cdFxyXG5cdCAgICBhcnIucHVzaCh2YWx1ZSk7XHJcblx0ICB9XHJcblx0XHJcblx0ICAvLyBwcmVwYXJlIG91dHB1dCBmb3IgcmVxdWVzdFxyXG5cdCAgc2VsZi5wcmVwYXJlVXJsUGFpcnMoYXJyLCBzZWxmLnBhcmFtcyk7XHJcblx0XHJcblx0ICAvLyBjYXRjaCBwYXJhbXMgZm9jdXMgZm9yIGFib3V0IHNlY3Rpb25cclxuXHQgIHNlbGYucGFyYW1JbkZvY3VzKGFyclswXSk7XHJcblx0XHJcblx0ICByZXR1cm4gYXJyO1xyXG5cdH07XHJcblx0XHJcblx0LyoqXHJcblx0ICogU2xpZGUgdG9nZ2xlIGZvciBwYXJhbXMgY29udGFpbmVyIG1ldGhvZFxyXG5cdCAqIEBwYXJhbSB2aWV3TW9kZWxcclxuXHQgKiBAcGFyYW0gZXZlbnRcclxuXHQgKi9cclxuXHRQYXJhbXNWaWV3TW9kZWwucHJvdG90eXBlLnNsaWRlVG9nZ2xlID0gZnVuY3Rpb24gKHZpZXdNb2RlbCwgZXZlbnQpIHtcclxuXHQgICQoZXZlbnQuY3VycmVudFRhcmdldClcclxuXHQgICAgLnBhcmVudHMoJy5qcy1zbGlkZS1jb250cm9sJylcclxuXHQgICAgLmZpbmQoJy5qcy1zbGlkZS13cmFwcGVyJylcclxuXHQgICAgLnNsaWRlVG9nZ2xlKHZpZXdNb2RlbC5hbmltYXRpb25TcGVlZCwgZnVuY3Rpb24gKCkge1xyXG5cdCAgICAgIHZpZXdNb2RlbC5pc0hpZGRlbighdmlld01vZGVsLmlzSGlkZGVuKCkpO1xyXG5cdCAgICB9KTtcclxuXHR9O1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIE1hY2hlcyBmb2N1c2VkIHBhcmFtXHJcblx0ICogQHBhcmFtIGl0ZW1cclxuXHQgKi9cclxuXHRQYXJhbXNWaWV3TW9kZWwucHJvdG90eXBlLm9uRm9jdXMgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG5cdCAgc2VsZi5wYXJhbUluRm9jdXMoaXRlbSk7XHJcblx0fTtcclxuXHRcclxuXHQvKipcclxuXHQgKiBGaWx0ZXJzIHBhcmFtcyBieSBkZWZpbmVkIHZhbHVlXHJcblx0ICogQHBhcmFtIGFyclxyXG5cdCAqIEBwYXJhbSBrb09ic1xyXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxyXG5cdCAqL1xyXG5cdFBhcmFtc1ZpZXdNb2RlbC5wcm90b3R5cGUucHJlcGFyZVVybFBhaXJzID0gZnVuY3Rpb24gKGFyciwga29PYnMpIHtcclxuXHQgIGlmICghYXJyICYmICFrb09icykge1xyXG5cdCAgICByZXR1cm4gZmFsc2U7XHJcblx0ICB9XHJcblx0XHJcblx0ICByZXR1cm4ga29PYnMoYXJyLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xyXG5cdCAgICByZXR1cm4gKGl0ZW0udmFsdWUoKSB8fCBpdGVtLmRlZmF1bHQpO1xyXG5cdCAgfSkpO1xyXG5cdH07XHJcblx0XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBQYXJhbXNWaWV3TW9kZWw7XHJcblxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xyXG5cdFxyXG5cdHZhciBoZiA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XHJcblx0dmFyIHNlbGY7XHJcblx0dmFyIGJhc2U7XHJcblx0dmFyIGNhdGVnb3J5O1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIE1ldGhvZHMgVmlldy1Nb2RlbFxyXG5cdCAqIEBwYXJhbSByYXdcclxuXHQgKiBAcGFyYW0gY2F0ZWdvcnlcclxuXHQgKiBAcGFyYW0gbWV0aG9kXHJcblx0ICogQGNvbnN0cnVjdG9yXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gTWV0aG9kc1ZpZXdNb2RlbChyYXcsIGNhdGVnb3J5LCBtZXRob2QpIHtcclxuXHQgIHNlbGYgPSB0aGlzO1xyXG5cdCAgYmFzZSA9IHJhdztcclxuXHRcclxuXHQgIC8vIG9ic2VydmFibGVzXHJcblx0ICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XHJcblx0ICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcclxuXHQgIHRoaXMudG9nZ2xlUG9wVXAgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcclxuXHQgIHRoaXMucmFkaW9zTW9kZWwgPSBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG5cdCAgdGhpcy5zZWxlY3RNb2RlbCA9IGtvLm9ic2VydmFibGVBcnJheShbXSk7XHJcblx0ICB0aGlzLnVwZGF0ZU1vZGVsKHRoaXMuY2F0ZWdvcnkoKSk7XHJcblx0ICB0aGlzLmNhdGVnb3J5LnN1YnNjcmliZSh0aGlzLnVwZGF0ZU1vZGVsKTtcclxuXHR9XHJcblx0XHJcblx0LyoqXHJcblx0ICogT24gY2F0ZWdvcnkgY2hhbmdlIGhhbmRsZXJcclxuXHQgKiBNZXRob2RzIFZpZXctTW9kZWwgbWV0aG9kXHJcblx0ICogQHBhcmFtIGNhdGVnb3J5XHJcblx0ICovXHJcblx0TWV0aG9kc1ZpZXdNb2RlbC5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcclxuXHQgIC8vIGluaXRpYWwgcmFkaW9zIG1vZGVsXHJcblx0ICBzZWxmLnVwZGF0ZVJhZGlvc01vZGVsKGJhc2VbY2F0ZWdvcnldKTtcclxuXHQgIC8vIGluaXRpYWwgc2VsZWN0IG1vZGVsIChmaXJzdCBtZXRob2QgaW4gZmlyc3Qgc2VjdGlvbiBmb3Igc3RhcnQpXHJcblx0ICBzZWxmLnVwZGF0ZVNlbGVjdChzZWxmLnJhZGlvc01vZGVsKClbMF0pO1xyXG5cdH07XHJcblx0XHJcblx0LyoqXHJcblx0ICogT25jaGFuZ2UgaGFuZGxlciBmb3IgUmFkaW8gYnV0dG9uc1xyXG5cdCAqIEBwYXJhbSBpdGVtXHJcblx0ICovXHJcblx0TWV0aG9kc1ZpZXdNb2RlbC5wcm90b3R5cGUub25jaGFuZ2VSYWRpb3MgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG5cdCAgLy91cGRhdGUgUmFkaW9zIE1vZGVsXHJcblx0ICBoZi5jaGVja0FjdGl2ZShzZWxmLnJhZGlvc01vZGVsLCBpdGVtLm5hbWUpO1xyXG5cdCAgLy91cGRhdGUgU2VsZWN0IE1vZGVsXHJcblx0ICBzZWxmLnVwZGF0ZVNlbGVjdChpdGVtKTtcclxuXHR9O1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEluaXRpYWwgYnVpbGQgb2YgUmFkaW9zIE1vZGVsXHJcblx0ICogQHBhcmFtIHBhcmFtXHJcblx0ICogQHJldHVybnMge0FycmF5fVxyXG5cdCAqL1xyXG5cdE1ldGhvZHNWaWV3TW9kZWwucHJvdG90eXBlLnVwZGF0ZVJhZGlvc01vZGVsID0gZnVuY3Rpb24gKHBhcmFtKSB7XHJcblx0ICB2YXIgb2JqID0gcGFyYW0gfHwge30sXHJcblx0ICAgIGFyciA9IFtdO1xyXG5cdFxyXG5cdCAgZm9yICh2YXIgaSBpbiBvYmopIHtcclxuXHQgICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoaSkpIHsgY29udGludWU7IH1cclxuXHQgICAgdmFyIGl0ZW0gPSB7XHJcblx0ICAgICAgY2hlY2tlZDoga28ub2JzZXJ2YWJsZShpID09PSAnQUxMJyksXHJcblx0ICAgICAgbmFtZTogaVxyXG5cdCAgICB9O1xyXG5cdFxyXG5cdCAgICBpZiAoaSA9PT0gJ0FMTCcpIHtcclxuXHQgICAgICBhcnIudW5zaGlmdChpdGVtKVxyXG5cdCAgICB9IGVsc2Uge1xyXG5cdCAgICAgIGFyci5wdXNoKGl0ZW0pO1xyXG5cdCAgICB9XHJcblx0ICB9XHJcblx0ICB0aGlzLnJhZGlvc01vZGVsKGFycik7XHJcblx0ICByZXR1cm4gYXJyO1xyXG5cdH07XHJcblx0XHJcblx0LyoqXHJcblx0ICogSW5pdGlhbCBidWlsZCBvZiBTZWxlY3QgTW9kZWxcclxuXHQgKiBAcGFyYW0gaXRlbVxyXG5cdCAqL1xyXG5cdE1ldGhvZHNWaWV3TW9kZWwucHJvdG90eXBlLnVwZGF0ZVNlbGVjdCA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcblx0ICB2YXIgb2JqID0gYmFzZVtzZWxmLmNhdGVnb3J5KCldW2l0ZW0ubmFtZV18fCB7fSxcclxuXHQgICAgYXJyID0gW10sXHJcblx0ICAgIGNvdW50ID0gMDtcclxuXHRcclxuXHQgIGZvciAodmFyIGkgaW4gb2JqKSB7XHJcblx0ICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGkpKSB7IGNvbnRpbnVlOyB9XHJcblx0ICAgIHZhciBwcm9wZXJ0eSA9IG9ialtpXTtcclxuXHQgICAgYXJyLnB1c2goe1xyXG5cdCAgICAgIGNoZWNrZWQ6IGtvLm9ic2VydmFibGUoIWNvdW50KSxcclxuXHQgICAgICBuYW1lOiBwcm9wZXJ0eS5uYW1lLFxyXG5cdCAgICAgIGlkOiBwcm9wZXJ0eS5pZCxcclxuXHQgICAgICBsaW5rOiBwcm9wZXJ0eS5kb2N1bWVudGF0aW9uLFxyXG5cdCAgICAgIGFib3V0OiBwcm9wZXJ0eS5kZXNjcmlwdGlvbixcclxuXHQgICAgICBjYXRlZ29yeTogcHJvcGVydHkuY2F0ZWdvcnksXHJcblx0ICAgICAgbWV0aG9kOiBwcm9wZXJ0eS5tZXRob2RcclxuXHQgICAgfSk7XHJcblx0XHJcblx0ICAgIC8vIC8vIHNldCBnbG9iYWwgb2JzZXJ2YWJsZVxyXG5cdCAgICAhY291bnQgJiYgdGhpcy5tZXRob2QoYmFzZVtwcm9wZXJ0eS5jYXRlZ29yeV1bcHJvcGVydHkubWV0aG9kXVtwcm9wZXJ0eS5pZF0pO1xyXG5cdFxyXG5cdCAgICBjb3VudCsrO1xyXG5cdCAgfVxyXG5cdCAgc2VsZi5zZWxlY3RNb2RlbChhcnIpO1xyXG5cdH07XHJcblx0XHJcblx0TWV0aG9kc1ZpZXdNb2RlbC5wcm90b3R5cGUub25TZWxlY3RNZXRob2QgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG5cdCAgaGYuY2hlY2tBY3RpdmUoc2VsZi5zZWxlY3RNb2RlbCwgaXRlbS5uYW1lKTtcclxuXHQgIHNlbGYubWV0aG9kKGJhc2VbaXRlbS5jYXRlZ29yeV1baXRlbS5tZXRob2RdW2l0ZW0uaWRdKTtcclxuXHR9O1xyXG5cdFxyXG5cdE1ldGhvZHNWaWV3TW9kZWwucHJvdG90eXBlLm9uQWJvdXRDbGljayA9IGZ1bmN0aW9uIChtb2RlbCwgZXZlbnQpIHtcclxuXHQgIG1vZGVsLnRvZ2dsZVBvcFVwKCFtb2RlbC50b2dnbGVQb3BVcCgpKTtcclxuXHR9O1xyXG5cdFxyXG5cdG1vZHVsZS5leHBvcnRzID0gTWV0aG9kc1ZpZXdNb2RlbDtcblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxyXG5cdCAqIEN1c3RvbSBTZWxlY3QgY29tcG9uZW50XHJcblx0ICovXHJcblx0dmFyIHNlbGY7XHJcblx0XHJcblx0LyoqXHJcblx0ICogQ3VzdG9tIFNlbGVjdCBWaWV3LU1vZGVsXHJcblx0ICogQHBhcmFtIHBhcmFtc1xyXG5cdCAqIEBjb25zdHJ1Y3RvclxyXG5cdCAqL1xyXG5cdGZ1bmN0aW9uIEN1c3RvbVNlbGVjdChwYXJhbXMpIHtcclxuXHQgIHNlbGYgPSB0aGlzO1xyXG5cdFxyXG5cdCAgdGhpcy5hbmltYXRpb25TcGVlZCA9IHBhcmFtcy5hbmltYXRpb25TcGVlZCB8fCAyMDA7XHJcblx0XHJcblx0ICAvL29ic2VydmFibGVzXHJcblx0ICB0aGlzLnNlbGVjdE1vZGVsID0gcGFyYW1zLm9wdGlvbnMgfHwga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuXHQgIHRoaXMucGxhY2Vob2xkZXIgPSBrby5vYnNlcnZhYmxlKHBhcmFtcy5wbGFjZWhvbGRlciB8fCAnJyk7XHJcblx0ICB0aGlzLm9uc2VsZWN0ID0gcGFyYW1zLm9uc2VsZWN0IHx8IGZ1bmN0aW9uIChpdGVtKSB7IGNvbnNvbGUubG9nKGl0ZW0gKydzZWxlY3RlZCEnKX07XHJcblx0ICB0aGlzLnNlbGVjdGVkID0ga28ub2JzZXJ2YWJsZSh0aGlzLnNlbGVjdE1vZGVsKClbMF0pO1xyXG5cdCAgdGhpcy5pc09uZU9wdGlvbiA9IGtvLnB1cmVDb21wdXRlZChmdW5jdGlvbiAoKSB7XHJcblx0ICAgIHJldHVybiB0aGlzLnNlbGVjdE1vZGVsKCkubGVuZ3RoIDwgMjsgLy8gbW9yZSB0aGFuIG9uZSBvcHRpb25cclxuXHQgIH0sIHRoaXMpO1xyXG5cdH1cclxuXHRcclxuXHRmdW5jdGlvbiBmaW5kRWxlbWVudChldmVudCkge1xyXG5cdCAgdmFyIHBhcmVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLmpzLWN1c3RvbS1zZWxlY3QnKTtcclxuXHQgIHJldHVybiB7XHJcblx0ICAgIHdyYXBwZXI6IHBhcmVudC5maW5kKCcuanMtY3VzdG9tLXNlbGVjdC13cmFwcGVyJyksXHJcblx0ICAgIGxheWVyOiBwYXJlbnQuZmluZCgnLmpzLWN1c3RvbS1zZWxlY3QtbGF5ZXInKVxyXG5cdCAgfVxyXG5cdH1cclxuXHRcclxuXHQvKipcclxuXHQgKiBDdXN0b20gU2VsZWN0IFZpZXctTW9kZWwgbWV0aG9kXHJcblx0ICogQHBhcmFtIHZpZXdNb2RlbFxyXG5cdCAqIEBwYXJhbSBldmVudFxyXG5cdCAqL1xyXG5cdEN1c3RvbVNlbGVjdC5wcm90b3R5cGUuc2xpZGVUb2dnbGUgPSBmdW5jdGlvbih2aWV3TW9kZWwsIGV2ZW50KSB7XHJcblx0ICBpZiAodmlld01vZGVsLmlzT25lT3B0aW9uKCkpIHtyZXR1cm4gZmFsc2U7fVxyXG5cdCAgdmFyIGVsID0gZmluZEVsZW1lbnQoZXZlbnQpO1xyXG5cdCAgICBlbC53cmFwcGVyLnNsaWRlVG9nZ2xlKHZpZXdNb2RlbC5hbmltYXRpb25TcGVlZCk7XHJcblx0ICAgIGVsLmxheWVyLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcclxuXHR9O1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEN1c3RvbSBTZWxlY3QgVmlldy1Nb2RlbCBtZXRob2RcclxuXHQgKiBAcGFyYW0gaXRlbVxyXG5cdCAqIEBwYXJhbSBldmVudFxyXG5cdCAqL1xyXG5cdEN1c3RvbVNlbGVjdC5wcm90b3R5cGUuc2VsZWN0SXRlbSA9IGZ1bmN0aW9uIChpdGVtLCBldmVudCkge1xyXG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cdCAgdGhpcy5zZWxlY3RlZChpdGVtKTtcclxuXHQgIC8vIHJ1biBoYW5kbGVyXHJcblx0ICB0aGlzLm9uc2VsZWN0KGl0ZW0pO1xyXG5cdCAgLy8gc2xpZGUgdXBcclxuXHQgIHRoaXMuc2xpZGVUb2dnbGUoc2VsZiwgZXZlbnQpO1xyXG5cdH07XHJcblx0XHJcblx0bW9kdWxlLmV4cG9ydHMgPSBrby5jb21wb25lbnRzLnJlZ2lzdGVyKCdjdXN0b20tc2VsZWN0Jywge1xyXG5cdCAgdmlld01vZGVsOiBDdXN0b21TZWxlY3QsXHJcblx0ICB0ZW1wbGF0ZTogKFtcclxuXHQgICAgJzxkaXYgY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3QganMtY3VzdG9tLXNlbGVjdFwiPicsXHJcblx0ICAgICAgJzxkaXYgY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3Qtd3JhcHBlclwiPicsXHJcblx0ICAgICAgICAnPHNlbGVjdCBkYXRhLWJpbmQ9XCJvcHRpb25zOiBzZWxlY3RNb2RlbCwgb3B0aW9uc1RleHQ6IFxcJ25hbWVcXCcsIHZhbHVlOiBzZWxlY3RlZFwiIGNsYXNzPVwiYXBpLWV4cC1jdXN0b20tc2VsZWN0X19maWVsZFwiIG5hbWU9XCJhcGktZXhwLW1ldGhvZFwiPjwvc2VsZWN0PicsXHJcblx0ICAgICAgICAnPHNwYW4gY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3RfX3BsYWNlaG9sZGVyXCI+JyxcclxuXHQgICAgICAgICAgJzxpbnB1dCBkYXRhLWJpbmQ9XCJldmVudDoge2NsaWNrOiBzbGlkZVRvZ2dsZX0sIGF0dHI6IHt2YWx1ZTogc2VsZWN0ZWQoKS5uYW1lLCBkaXNhYmxlZDogaXNPbmVPcHRpb259XCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIlwiIHJlYWRvbmx5PVwiXCI+JyxcclxuXHQgICAgICAgICAgJzxiIGRhdGEtYmluZD1cImNzczoge2hpZGRlbjogaXNPbmVPcHRpb259XCIgY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3RfX2NoZXZyb25cIj4mbmJzcDs8L2I+JyxcclxuXHQgICAgICAgICc8L3NwYW4+JyxcclxuXHQgICAgICAgICc8dWwgZGF0YS1iaW5kPVwiZm9yZWFjaDogc2VsZWN0TW9kZWxcIiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdF9fbGlzdCBqcy1jdXN0b20tc2VsZWN0LXdyYXBwZXJcIj4nLFxyXG5cdCAgICAgICAgICAnPGxpIGRhdGEtYmluZD1cImNzczoge1xcJ2FjdGl2ZVxcJzogY2hlY2tlZH1cIiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdF9faXRlbVwiPicsXHJcblx0ICAgICAgICAgICAgJzxidXR0b24gZGF0YS1iaW5kPVwiZXZlbnQ6IHtjbGljazogJHBhcmVudC5zZWxlY3RJdGVtLmJpbmQoJHBhcmVudCl9LCB0ZXh0OiBuYW1lLCBjc3M6IHtcXCdhY3RpdmVcXCc6IGNoZWNrZWQoKX0sIGF0dHI6IHtcXCdkYXRhLXZhbHVlXFwnOiBuYW1lfVwiICBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdF9faXRlbS1sYWJlbFwiIGhyZWY9XCIjXCI+PC9idXR0b24+JyxcclxuXHQgICAgICAgICAgICAnPGEgZGF0YS1iaW5kPVwiYXR0cjoge2hyZWY6IGxpbmt9LCBjc3M6IHtcXCdoaWRkZW5cXCc6ICFsaW5rfVwiIGNsYXNzPVwiYXBpLWV4cC1jdXN0b20tc2VsZWN0X19pdGVtLWxpbmtcIiB0YXJnZXQ9XCJfYmxhbmtcIj4mbmJzcDs8L2E+JyxcclxuXHQgICAgICAgICAgJzwvbGk+JyxcclxuXHQgICAgICAgICc8L3VsPicsXHJcblx0ICAgICAgJzwvZGl2PicsXHJcblx0ICAgICAgJzxkaXYgZGF0YS1iaW5kPVwiY2xpY2s6IHNsaWRlVG9nZ2xlXCIgY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3QtbGF5ZXIganMtY3VzdG9tLXNlbGVjdC1sYXllciBoaWRkZW5cIj48L2Rpdj4nLFxyXG5cdCAgICAnPC9kaXY+J1xyXG5cdCAgXSkuam9pbignJylcclxuXHR9KTtcclxuXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHNjcmlwdC5qc1xuICoqLyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgYmMxMDdkNGU5YTUyZjJmOGUyYmRcbiAqKi8iLCIvKipcclxuICogTWFpbiBmaWxlIGZvciBBcGkgRXhwbHJlciB2Mi4wXHJcbiAqIEZvciBkZXZlbG9wbWVudCBwbGVhc2UgdXNlIFdlYnBhY2sgdG8gYnVuZGxlIGFsbCBtb2R1bGVzXHJcbiAqIEl0IGNhbiBiZSBtYWRlIHVzaW5nIG5wbSBzY3JpcHRzIGNtZCAtICd3ZWJwYWNrJ1xyXG4gKi9cclxuLy8gQ29tcG9uZW50c1xyXG52YXIgYmFzZSA9IHJlcXVpcmUoJy4vLi4vY29tcG9uZW50cy9jb25maWcnKTtcclxudmFyIGFwaUtleSA9IHJlcXVpcmUoJy4vLi4vY29tcG9uZW50cy9hcGlrZXknKTtcclxudmFyIGFqYXhTZXJ2aWNlID0gcmVxdWlyZSgnLi8uLi9jb21wb25lbnRzL2FqYXhTZXJ2aWNlJyk7XHJcblxyXG4vLyBWaWV3IE1vZGVsc1xyXG52YXIgTWVudVZpZXdNb2RlbCA9IHJlcXVpcmUoJy4vLi4vVmlld01vZGVscy9tZW51Vmlld01vZGVsJyk7XHJcbnZhciBQYXJhbXNWaWV3TW9kZWwgPSByZXF1aXJlKCcuL3BhcmFtc1ZpZXdNb2RlbCcpO1xyXG52YXIgTWV0aG9kc1ZpZXdNb2RlbCA9IHJlcXVpcmUoJy4vbWV0aG9kc1ZpZXdNb2RlbCcpO1xyXG5cclxuLy8gTW9kdWxlc1xyXG52YXIgY3VzdG9tU2VsZWN0ID0gcmVxdWlyZSgnLi8uLi9jb21wb25lbnRzL2N1c3RvbVNlbGVjdCcpO1xyXG5cclxuLyoqXHJcbiAqIEFwcFZpZXdNb2RlbFxyXG4gKiBAcGFyYW0gb2JqIHtvYmplY3R9IGdsb2JhbCBkYXRhIG9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gQXBwVmlld01vZGVsKG9iaikge1xyXG4gIHZhciBiYXNlID0gb2JqIHx8IHt9O1xyXG4gIHNlbGYgPSB0aGlzO1xyXG4gIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xyXG5cclxuICAvLyBvYnNlcnZhYmxlc1xyXG4gIHRoaXMuc2VsZWN0ZWRDYXRlZ29yeSA9IGtvLm9ic2VydmFibGUoJycpO1xyXG4gIHRoaXMuc2VsZWN0ZWRNZXRob2QgPSBrby5vYnNlcnZhYmxlKCcnKTtcclxuICB0aGlzLnNlbGVjdGVkUGFyYW1zID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICAvLyBzdWItbW9kZWxzXHJcbiAgdGhpcy5tZW51ID0gbmV3IE1lbnVWaWV3TW9kZWwoYmFzZSwgdGhpcy5zZWxlY3RlZENhdGVnb3J5KTtcclxuICB0aGlzLm1ldGhvZHMgPSBuZXcgTWV0aG9kc1ZpZXdNb2RlbChiYXNlLCB0aGlzLnNlbGVjdGVkQ2F0ZWdvcnksIHRoaXMuc2VsZWN0ZWRNZXRob2QpO1xyXG4gIHRoaXMucGFyYW1zID0gbmV3IFBhcmFtc1ZpZXdNb2RlbChiYXNlLCB0aGlzLnNlbGVjdGVkTWV0aG9kLCB0aGlzLnNlbGVjdGVkUGFyYW1zKTtcclxuXHJcbiAgLy8gY29tcHV0ZWRcclxuICB0aGlzLnNlbmRCdXR0b25UZXh0ID0ga28ucHVyZUNvbXB1dGVkKGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLnNlbGVjdGVkTWV0aG9kKCkubWV0aG9kLnRvTG93ZXJDYXNlKCk7XHJcbiAgfSwgdGhpcyk7XHJcbiAgdGhpcy5VUkwgPSBrby5jb21wdXRlZChmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICB0aGlzLnNlbGVjdGVkTWV0aG9kKCksXHJcbiAgICAgIHRoaXMuYXBpS2V5LFxyXG4gICAgICB0aGlzLnNlbGVjdGVkUGFyYW1zKClcclxuICAgIF07XHJcbiAgfSwgdGhpcyk7XHJcbn1cclxuXHJcbkFwcFZpZXdNb2RlbC5wcm90b3R5cGUub25DbGlja1NlbmRCdG4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgYWpheFNlcnZpY2UodGhpcy5VUkwoKSk7XHJcbn07XHJcblxyXG4vLyBBY3RpdmF0ZXMga25vY2tvdXQuanNcclxua28uYXBwbHlCaW5kaW5ncyhuZXcgQXBwVmlld01vZGVsKGJhc2UpKTtcclxubW9kdWxlLmV4cG9ydHMgPSBiYXNlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9WaWV3TW9kZWxzL21haW4uanNcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZSA9IHt9O1xyXG52YXIgQ09ORklHX1VSTCA9ICcuLi8uLi9hcGlkZXNjcmlwdGlvbi54bWwnO1xyXG5cclxuLy9nZXRzIGltcG9ydGFudCBlbGVtZW50cyBmcm9tIFdBREwgZG9jdW1lbnQgYW5kIHdyaXRlcyB0aGVtIGludG8gZ2xvYmFsIHZhcmlhYmxlc1xyXG52YXIgcGFyc2VYTUxEb2MgPSBmdW5jdGlvbiAoeG1sKSB7XHJcbiAgLy9nZXQgYWxsIEFQSXNcclxuICB2YXIgQVBJcyA9ICQoeG1sKS5maW5kKFwicmVzb3VyY2VzXCIpLFxyXG4gICAgaXNGaXJzdE1ldGhvZCA9IHRydWU7IC8vdmFyaWFibGUgdG8gc3RvcmUgdGhlIHZlcnkgZmlyc3QgbWV0aG9kIGZvdW5kXHJcblxyXG4gIEFQSXMuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgLy9nZXQgYWxsIG1ldGhvZHMgaW4gdGhlIEFQSVxyXG4gICAgdmFyIG1ldGhvZHMgPSAkKHRoaXMpLmZpbmQoJ3Jlc291cmNlJyk7XHJcblxyXG4gICAgbWV0aG9kcy5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KXtcclxuICAgICAgdmFyIG1lID0gJChlbGVtZW50KSwgLy9tZXRob2RcclxuICAgICAgICBtZXRob2QgPSAkKG1lLmZpbmQoJ21ldGhvZCcpWzBdKSwgLy9nZXQgbWV0aG9kIGRldGFpbHMgb2JqZWN0XHJcbiAgICAgICAgY2F0ZWdvcnkgPSBtZXRob2QuZmluZCgnW3ByaW1hcnk9XCJ0cnVlXCJdJykudGV4dCgpLCAvL2dldCBBUEkgbmFtZVxyXG4gICAgICAgIHBhcmFtcyA9IG1lLmZpbmQoJ3BhcmFtJyksIC8vbWV0aG9kIHBhcmFtc1xyXG4gICAgICAgIHBhcmFtZXRlcnMgPSB7fTsgLy90ZW1wb3Jhcnkgb2JqZWN0IHRvIHN0b3JlIHBhcmFtIGRhdGFcclxuXHJcbiAgICAgIHBhcmFtcy5lYWNoKGZ1bmN0aW9uKGluZGV4LCBlbGVtZW50KXsgLy9maWxsIHBhcmFtIG9iamVjdCB3aXRoIHJlcXVpcmVkIGRhdGFcclxuICAgICAgICB2YXIgdGhhdCA9ICQodGhpcyk7XHJcbiAgICAgICAgcGFyYW1ldGVyc1t0aGF0LmF0dHIoJ25hbWUnKV0gPSB7XHJcbiAgICAgICAgICAnbmFtZSc6IHRoYXQuYXR0cignbmFtZScpLFxyXG4gICAgICAgICAgJ3JlcXVpcmVkJzogdGhhdC5hdHRyKCdyZXF1aXJlZCcpLFxyXG4gICAgICAgICAgJ3R5cGUnOiB0aGF0LmF0dHIoJ3R5cGUnKSxcclxuICAgICAgICAgICdzdHlsZSc6IHRoYXQuYXR0cignc3R5bGUnKSxcclxuICAgICAgICAgICdkZWZhdWx0JzogdGhhdC5hdHRyKCdkZWZhdWx0JyksXHJcbiAgICAgICAgICAnZG9jJzogdGhhdC5maXJzdCgnZG9jJykudGV4dCgpLnRyaW0oKVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIWJhc2VbY2F0ZWdvcnldKXtcclxuICAgICAgICBiYXNlW2NhdGVnb3J5XSA9IHt9OyAvLyBjcmVhdGUgbmV3IEFQSSBpbiBiYXNlIG9iamVjdCBpZiB0aGVyZSBpcyBub25lXHJcbiAgICAgIH1cclxuICAgICAgYmFzZVtjYXRlZ29yeV1bbWV0aG9kLmF0dHIoXCJuYW1lXCIpXSA9IGJhc2VbY2F0ZWdvcnldW21ldGhvZC5hdHRyKFwibmFtZVwiKV0gfHwge307XHJcbiAgICAgIGJhc2VbY2F0ZWdvcnldLkFMTCA9IGJhc2VbY2F0ZWdvcnldLkFMTCB8fCB7fTtcclxuICAgICAgYmFzZVtjYXRlZ29yeV0uQUxMW21ldGhvZC5hdHRyKFwiaWRcIildPSB7XHJcbiAgICAgICAgJ2lkJyA6IG1ldGhvZC5hdHRyKFwiaWRcIiksIC8vIG1ldGhvZCBpZFxyXG4gICAgICAgICduYW1lJyA6IG1ldGhvZC5hdHRyKFwiYXBpZ2VlOmRpc3BsYXlOYW1lXCIpID8gbWV0aG9kLmF0dHIoXCJhcGlnZWU6ZGlzcGxheU5hbWVcIikgOiBtZXRob2QuYXR0cihcImlkXCIpLCAvLyBtZXRob2QgbmFtZVxyXG4gICAgICAgICdtZXRob2QnIDogbWV0aG9kLmF0dHIoJ25hbWUnKSwgLy8gR0VUIG9yIFBPU1RcclxuICAgICAgICAnY2F0ZWdvcnknIDogY2F0ZWdvcnksIC8vIEFQSSBuYW1lXHJcbiAgICAgICAgJ3BhdGgnOiBtZS5hdHRyKCdwYXRoJyksIC8vIG1ldGhvZCBVUkxcclxuICAgICAgICAncGFyYW1ldGVycyc6IHBhcmFtZXRlcnMsIC8vIG1ldGhvZCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgJ2Jhc2UnIDogbWUucGFyZW50KCkuYXR0cignYmFzZScpLCAvLyBtZXRob2QgYmFzZSBsaW5rXHJcbiAgICAgICAgJ2RvY3VtZW50YXRpb24nIDogJChtZXRob2QuZmluZCgnZG9jJylbMF0pLmF0dHIoJ2FwaWdlZTp1cmwnKSwgLy8gbGluayB0byBkb2N1bWVudGF0aW9uXHJcbiAgICAgICAgJ2Rlc2NyaXB0aW9uJyA6ICQobWV0aG9kLmZpbmQoJ2RvYycpWzBdKS50ZXh0KCkudHJpbSgpIC8vbWV0aG9kIGRlc2NyaXB0aW9uXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBiYXNlW2NhdGVnb3J5XVttZXRob2QuYXR0cihcIm5hbWVcIildW21ldGhvZC5hdHRyKFwiaWRcIildID0ge1xyXG4gICAgICAgICdpZCcgOiBtZXRob2QuYXR0cihcImlkXCIpLCAvLyBtZXRob2QgaWRcclxuICAgICAgICAnbmFtZScgOiBtZXRob2QuYXR0cihcImFwaWdlZTpkaXNwbGF5TmFtZVwiKSA/IG1ldGhvZC5hdHRyKFwiYXBpZ2VlOmRpc3BsYXlOYW1lXCIpIDogbWV0aG9kLmF0dHIoXCJpZFwiKSwgLy8gbWV0aG9kIG5hbWVcclxuICAgICAgICAnbWV0aG9kJyA6IG1ldGhvZC5hdHRyKCduYW1lJyksIC8vIEdFVCBvciBQT1NUXHJcbiAgICAgICAgJ2NhdGVnb3J5JyA6IGNhdGVnb3J5LCAvLyBBUEkgbmFtZVxyXG4gICAgICAgICdwYXRoJzogbWUuYXR0cigncGF0aCcpLCAvLyBtZXRob2QgVVJMXHJcbiAgICAgICAgJ3BhcmFtZXRlcnMnOiBwYXJhbWV0ZXJzLCAvLyBtZXRob2QgcGFyYW1ldGVyc1xyXG4gICAgICAgICdiYXNlJyA6IG1lLnBhcmVudCgpLmF0dHIoJ2Jhc2UnKSwgLy8gbWV0aG9kIGJhc2UgbGlua1xyXG4gICAgICAgICdkb2N1bWVudGF0aW9uJyA6ICQobWV0aG9kLmZpbmQoJ2RvYycpWzBdKS5hdHRyKCdhcGlnZWU6dXJsJyksIC8vIGxpbmsgdG8gZG9jdW1lbnRhdGlvblxyXG4gICAgICAgICdkZXNjcmlwdGlvbicgOiAkKG1ldGhvZC5maW5kKCdkb2MnKVswXSkudGV4dCgpLnRyaW0oKSAvL21ldGhvZCBkZXNjcmlwdGlvblxyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vL2dldHMgZG9jdW1lbnQgZnJvbSBXQURMIGNvbmZpZ3VyYXRpb24gZmlsZVxyXG52YXIgcmVhZEZyb21XQURMID0gZnVuY3Rpb24gKCkge1xyXG4gICQuYWpheCh7XHJcbiAgICB1cmw6IENPTkZJR19VUkwsXHJcbiAgICBhc3luYyA6IGZhbHNlLFxyXG4gICAgZGF0YVR5cGU6ICgkLmJyb3dzZXIubXNpZSkgPyBcInRleHRcIiA6IFwieG1sXCIsXHJcbiAgICBzdWNjZXNzIDogZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICB2YXIgeG1sO1xyXG5cclxuICAgICAgaWYgKHR5cGVvZiByZXNwb25zZSA9PSBcInN0cmluZ1wiKXtcclxuICAgICAgICB4bWwgPSBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxET01cIik7XHJcbiAgICAgICAgeG1sLmFzeW5jID0gZmFsc2U7XHJcbiAgICAgICAgeG1sLmxvYWRYTUwocmVzcG9uc2UpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHhtbCA9IHJlc3BvbnNlO1xyXG4gICAgICB9XHJcbiAgICAgIHBhcnNlWE1MRG9jKHhtbCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGVycm9yOiBmdW5jdGlvbihYTUxIdHRwUmVxdWVzdCwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pe1xyXG4gICAgICBhbGVydCgnRGF0YSBDb3VsZCBOb3QgQmUgTG9hZGVkIC0gJysgdGV4dFN0YXR1cyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcbnJlYWRGcm9tV0FETCgpO1xyXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2U7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9jb21wb25lbnRzL2NvbmZpZy5qc1xuICoqIG1vZHVsZSBpZCA9IDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBhcGlLZXkgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd0ay1hcGkta2V5JykgfHwgXCI3ZWx4ZGt1OUdHRzVrOGowWG04S1dkQU5EZ2VjSE1WMFwiOyAvL0FQSSBLZXlcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIG5hbWU6ICdhcGlrZXknLFxyXG4gIHN0eWxlOiAncXVlcnknLFxyXG4gIHZhbHVlOiBrby5vYnNlcnZhYmxlKGFwaUtleSlcclxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9hcGlrZXkuanNcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcclxuICogQWpheCBTZXJ2aWNlXHJcbiAqIEBwYXJhbSB1cmxcclxuICogQHBhcmFtIG1ldGhvZFxyXG4gKiBAcGFyYW0gY2FsbGJhY2tcclxuICovXHJcbnZhciBhamF4U2VydmljZSA9IGZ1bmN0aW9uICh1cmwsIG1ldGhvZCwgY2FsbGJhY2spIHtcclxuICB2YXIgZXNjYXBlZFVSTCA9IGVuY29kZVVSSSh1cmwpO1xyXG4gIGNvbnNvbGUubG9nKGVzY2FwZWRVUkwpO1xyXG5cclxuICAkLmFqYXgoe1xyXG4gICAgdHlwZTogbWV0aG9kLFxyXG4gICAgdXJsOiBlc2NhcGVkVVJMLFxyXG4gICAgYXN5bmM6IHRydWUsXHJcbiAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICBjb21wbGV0ZTogY2FsbGJhY2tcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGaWx0ZXJzIGFuZCBwcmVwYXJlcyBwYXJhbXMgcGFpcnNcclxuICogQHBhcmFtIGFyclxyXG4gKiBAcGFyYW0gb2JqXHJcbiAqIEBwYXJhbSBrb09ic1xyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXHJcbnZhciBwcmVwYXJlVXJsID0gZnVuY3Rpb24gKGFycikge1xyXG4gIHZhciByZXBsYWNlbWVudCwgdXJsLCBkb21haW4sIHBhdGgsIG1ldGhvZCwgYXBpS2V5LCBwYXJhbXM7XHJcblxyXG4gIGlmICghYXJyICYmICFhcnIubGVuZ3RoKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIFxyXG4gIGRvbWFpbiA9IGFyclswXS5iYXNlO1xyXG4gIHBhdGggPSBhcnJbMF0ucGF0aDtcclxuICBhcGlLZXkgPSBhcnJbMV07XHJcbiAgcGFyYW1zID0gYXJyWzJdLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgcmV0dXJuIGl0ZW0uc3R5bGUgPT09ICdxdWVyeSc7XHJcbiAgfSk7XHJcblxyXG4gIC8vIGFyciBvZiB0ZW1wbGF0ZSBtYXJrc1xyXG4gIHJlcGxhY2VtZW50ID0gcGF0aC5tYXRjaCgvKFtee10qPylcXHcoPz1cXH0pL2dtaSk7XHJcblxyXG4gIC8vIGFyciBvZiB0ZW1wbGF0ZSBwYXJhbXNcclxuICB2YXIgdGVtcGxhdGVzQXJyID0gYXJyWzJdLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgcmV0dXJuIGl0ZW0uc3R5bGUgPT09ICd0ZW1wbGF0ZSc7XHJcbiAgfSk7XHJcblxyXG4gIC8vIHJlcGxhY2VtZW50XHJcbiAgcmVwbGFjZW1lbnQuZm9yRWFjaChmdW5jdGlvbiAodmFsKSB7XHJcbiAgICB2YXIgcGFyYW0gPSB0ZW1wbGF0ZXNBcnIuZmluZChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICByZXR1cm4gaXRlbS5uYW1lID09PSB2YWw7XHJcbiAgICB9KTtcclxuICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoJ3snKyBwYXJhbS5uYW1lICsgJ30nLCBwYXJhbS52YWx1ZSgpIHx8IHBhcmFtLmRlZmF1bHQpO1xyXG4gIH0pO1xyXG5cclxuICAvLyBhZGRzIGFwaUtleSBwYXJhbVxyXG4gIGlmICghcGFyYW1zWzBdIHx8IHBhcmFtc1swXS5uYW1lICE9PSAnYXBpa2V5Jykge1xyXG4gICAgcGFyYW1zLnVuc2hpZnQoYXBpS2V5KTtcclxuICB9XHJcblxyXG4gIC8vIHByZXBhcmVzIHBhcmFtcyBwYXJ0IG9mIHVybFxyXG4gIHBhcmFtcyA9IHBhcmFtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgcmV0dXJuIFtpdGVtLm5hbWUsIGl0ZW0udmFsdWUoKSB8fCBpdGVtLmRlZmF1bHRdLmpvaW4oJz0nKTtcclxuICAgIH0pLmpvaW4oJyYnKTtcclxuXHJcbiAgdXJsID0gW2RvbWFpbiwgJy8nLCBwYXRoLCAnPycsIHBhcmFtc10uam9pbignJyk7XHJcblxyXG4gIHJldHVybiB1cmw7XHJcbn07XHJcblxyXG4vLyBzZW5kcyByZXF1ZXN0IHRvIGdldCB0aGUgc2Vjb25kIGNvbHVtblxyXG52YXIgc2VuZFByaW1hcnlSZXF1ZXN0ID0gZnVuY3Rpb24gKGFycikge1xyXG4gIGNvbnNvbGUuY2xlYXIoKTtcclxuICB2YXIgdXJsID0gcHJlcGFyZVVybChhcnIpO1xyXG4gIC8vIGNvbnNvbGUubG9nKHVybCk7XHJcblxyXG4gIGFqYXhTZXJ2aWNlKHVybCwgYXJyWzBdLm1ldGhvZCwgZnVuY3Rpb24ocmVzcG9uc2UsIG1lc3NhZ2UpIHtcclxuICAgIGlmIChtZXNzYWdlID09ICdlcnJvcicpIHtcclxuICAgICAgdmFyIGVyciA9IHJlc3BvbnNlICYmIHJlc3BvbnNlLnJlc3BvbnNlSlNPTiAmJiByZXNwb25zZS5yZXNwb25zZUpTT04uZXJyb3JzICYmIHJlc3BvbnNlLnJlc3BvbnNlSlNPTi5lcnJvcnNbMF07XHJcbiAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlLCByZXNwb25zZS5zdGF0dXMpO1xyXG4gICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5jb2RlKTtcclxuICAgICAgICBjb25zb2xlLndhcm4oZXJyLmRldGFpbCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKHJlc3BvbnNlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2cobWVzc2FnZSwgcmVzcG9uc2Uuc3RhdHVzKTtcclxuICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UucmVzcG9uc2VKU09OKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHNlbmRQcmltYXJ5UmVxdWVzdDtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9hamF4U2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBoZiA9IHJlcXVpcmUoJy4uL2NvbXBvbmVudHMvaGVscGVyRnVuYycpO1xyXG52YXIgc2VsZjtcclxuXHJcblxyXG4vKipcclxuICogTWVudSBWaWV3LU1vZGVsXHJcbiAqIEBwYXJhbSBiYXNlXHJcbiAqIEBwYXJhbSBjYXRlZ29yeVxyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIE1lbnVWaWV3TW9kZWwoYmFzZSwgY2F0ZWdvcnkpIHtcclxuICBzZWxmID0gdGhpcztcclxuICB0aGlzLmNhdGVnb3J5ID0gY2F0ZWdvcnk7XHJcbiAgdGhpcy5jYXRlZ29yaWVzID0ga28ub2JzZXJ2YWJsZUFycmF5KE9iamVjdC5rZXlzKGJhc2UpLm1hcChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNoZWNrZWQ6IGtvLm9ic2VydmFibGUoIWluZGV4KSxcclxuICAgICAgbmFtZTogaXRlbSxcclxuICAgICAgbGluazogZmFsc2VcclxuICAgIH1cclxuICB9KSk7XHJcblxyXG4gIC8vIGluaXRpYWwgbG9hZFxyXG4gIHRoaXMuc2VsZWN0Q2F0ZWdvcnkodGhpcy5jYXRlZ29yaWVzKClbMF0pO1xyXG59XHJcblxyXG4vKipcclxuICogTWVudSBWaWV3LU1vZGVsIG1ldGhvZFxyXG4gKiBAcGFyYW0gY2F0ZWdvcnlcclxuICovXHJcbk1lbnVWaWV3TW9kZWwucHJvdG90eXBlLnNlbGVjdENhdGVnb3J5ID0gZnVuY3Rpb24gKGNhdGVnb3J5KSB7XHJcbiAgdmFyIGNhdGVnb3J5TmFtZSA9IGNhdGVnb3J5Lm5hbWU7XHJcbiAgc2VsZi5jYXRlZ29yeShjYXRlZ29yeU5hbWUpO1xyXG4gIGhmLmNoZWNrQWN0aXZlKHNlbGYuY2F0ZWdvcmllcywgY2F0ZWdvcnlOYW1lKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWVudVZpZXdNb2RlbDtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NjcmlwdHMvYXBpLWV4cGxvcmVyL3YyL1ZpZXdNb2RlbHMvbWVudVZpZXdNb2RlbC5qc1xuICoqIG1vZHVsZSBpZCA9IDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMuZ2V0TW9kZWxBcnJheSA9IGZ1bmN0aW9uIGdldE1vZGVsQXJyYXkocGFyYW1zKSB7XHJcbiAgICB2YXIgb2JqID0gcGFyYW1zLm9iaiB8fCB7fSxcclxuICAgICAgICBhcnIgPSBwYXJhbXMuYXJyIHx8IFtdLFxyXG4gICAgICAgIHByb3AgPSBwYXJhbXMucHJvcCB8fCAnbmFtZSc7XHJcblxyXG4gICAgZm9yICh2YXIgaSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShpKSkgeyBjb250aW51ZTsgfVxyXG5cclxuICAgICAgICB2YXIgaXRlbSA9IGFyci5maW5kKGZ1bmN0aW9uIChtMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbTEubmFtZSA9PT0gb2JqW2ldW3Byb3BdO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoaXRlbSkgeyBjb250aW51ZTsgfVxyXG5cclxuICAgICAgICBhcnIucHVzaCh7XHJcbiAgICAgICAgICAgIGNoZWNrZWQ6IGtvLm9ic2VydmFibGUoZmFsc2UpLFxyXG4gICAgICAgICAgICBuYW1lOiBvYmpbaV1bcHJvcF1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcnI7XHJcbn07XHJcblxyXG5leHBvcnRzLmNoZWNrQWN0aXZlID0gZnVuY3Rpb24gY2hlY2tBY3RpdmUoa29BcnIsIGFjdGl2ZUVsZW0pIHtcclxuICAgIGlmICgha29BcnIgJiYgIWFjdGl2ZUVsZW0pIHtyZXR1cm4gZmFsc2U7fVxyXG5cclxuICAgIGtvQXJyKGtvQXJyKCkubWFwKGZ1bmN0aW9uIChvYmopIHtcclxuICAgICAgICBpZiAob2JqLm5hbWUgPT09IGFjdGl2ZUVsZW0pIHtcclxuICAgICAgICAgICAgb2JqLmNoZWNrZWQodHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgb2JqLmNoZWNrZWQoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfSkpO1xyXG59O1xyXG5cclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NjcmlwdHMvYXBpLWV4cGxvcmVyL3YyL2NvbXBvbmVudHMvaGVscGVyRnVuYy5qc1xuICoqIG1vZHVsZSBpZCA9IDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBzZWxmO1xyXG52YXIgYmFzZTtcclxuXHJcbi8qKlxyXG4gKiBQYXJhbXMgVmlldy1Nb2RlbFxyXG4gKiBAcGFyYW0gcmF3XHJcbiAqIEBwYXJhbSBtZXRob2RcclxuICogQHBhcmFtIHBhcmFtc1xyXG4gKiBAY29uc3RydWN0b3JcclxuICovXHJcbmZ1bmN0aW9uIFBhcmFtc1ZpZXdNb2RlbChyYXcsIG1ldGhvZCwgcGFyYW1zKSB7XHJcbiAgYmFzZSA9IHJhdztcclxuICBzZWxmID0gdGhpcztcclxuICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcclxuICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICBcclxuICB0aGlzLmFuaW1hdGlvblNwZWVkID0gMjAwO1xyXG4gIHRoaXMuaXNIaWRkZW4gPSBrby5vYnNlcnZhYmxlKHRydWUpO1xyXG4gIHRoaXMucGFyYW1JbkZvY3VzID0ga28ub2JzZXJ2YWJsZSgnJyk7XHJcbiAgdGhpcy5wYXJhbXNNb2RlbCA9IGtvLmNvbXB1dGVkKHNlbGYudXBkYXRlUGFyYW1zTW9kZWwpO1xyXG4gIHRoaXMucGFyYW1JbkZvY3VzKHRoaXMucGFyYW1zTW9kZWwoKVswXSk7XHJcbiAgdGhpcy5pc0RpcnR5ID0ga28uY29tcHV0ZWQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGRpcnR5ID0gdGhpcy5wYXJhbXNNb2RlbCgpLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHJldHVybiBpdGVtLmlzRGlydHkoKSA9PT0gdHJ1ZTtcclxuICAgICAgfSk7XHJcbiAgICByZXR1cm4gZGlydHkubGVuZ3RoID4gMDtcclxuICB9LCB0aGlzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluaXRpYWwgYnVpbGQgb2YgU2VsZWN0IE1vZGVsXHJcbiAqL1xyXG5QYXJhbXNWaWV3TW9kZWwucHJvdG90eXBlLnVwZGF0ZVBhcmFtc01vZGVsID0gZnVuY3Rpb24gKCkge1xyXG4gIHZhciBvYmogPSBzZWxmLm1ldGhvZCgpLnBhcmFtZXRlcnMgfHwge30sXHJcbiAgICBhcnIgPSBbXTtcclxuXHJcbiAgZm9yICh2YXIgaSBpbiBvYmopIHtcclxuICAgIHZhciB2YWx1ZSA9IG9ialtpXTtcclxuXHJcbiAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShpKSkge1xyXG4gICAgICBjb250aW51ZTtcclxuICAgIH1cclxuXHJcbiAgICB2YWx1ZS52YWx1ZSA9IHZhbHVlLnZhbHVlIHx8IGtvLm9ic2VydmFibGUoJycpO1xyXG5cclxuICAgIC8vICdkaXJ0eScgZmxhZyB3YXRjaGVyIGZvciBjdXJyZW50IGZpZWxkXHJcbiAgICB2YWx1ZS5pc0RpcnR5ID0ga28ucHVyZUNvbXB1dGVkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgcmV0dXJuICEhdGhpcy52YWx1ZSgpLnRyaW0oKS5sZW5ndGg7XHJcbiAgICB9LCB2YWx1ZSk7XHJcblxyXG4gICAgLy8gYWRkIGNhbGVuZGFyIGJ0biBmb3IgY3VycmVudCBmaWVsZFxyXG4gICAgdmFsdWUuaGFzQ2FsZW5kYXIgPSBpLnNlYXJjaCgvKGRhdGV8dGltZSkvZ21pKSAhPSAtMTtcclxuXHJcbiAgICAvLyBhZGQgcG9wLXVwIGJ0biBmb3IgY3VycmVudCBmaWVsZFxyXG4gICAgdmFsdWUuaGFzUG9wVXAgPSBpLnNlYXJjaCgvKGF0dHJhY3Rpb25JZHx2ZW51ZUlkKS9nbWkpICE9IC0xO1xyXG5cclxuICAgIGFyci5wdXNoKHZhbHVlKTtcclxuICB9XHJcblxyXG4gIC8vIHByZXBhcmUgb3V0cHV0IGZvciByZXF1ZXN0XHJcbiAgc2VsZi5wcmVwYXJlVXJsUGFpcnMoYXJyLCBzZWxmLnBhcmFtcyk7XHJcblxyXG4gIC8vIGNhdGNoIHBhcmFtcyBmb2N1cyBmb3IgYWJvdXQgc2VjdGlvblxyXG4gIHNlbGYucGFyYW1JbkZvY3VzKGFyclswXSk7XHJcblxyXG4gIHJldHVybiBhcnI7XHJcbn07XHJcblxyXG4vKipcclxuICogU2xpZGUgdG9nZ2xlIGZvciBwYXJhbXMgY29udGFpbmVyIG1ldGhvZFxyXG4gKiBAcGFyYW0gdmlld01vZGVsXHJcbiAqIEBwYXJhbSBldmVudFxyXG4gKi9cclxuUGFyYW1zVmlld01vZGVsLnByb3RvdHlwZS5zbGlkZVRvZ2dsZSA9IGZ1bmN0aW9uICh2aWV3TW9kZWwsIGV2ZW50KSB7XHJcbiAgJChldmVudC5jdXJyZW50VGFyZ2V0KVxyXG4gICAgLnBhcmVudHMoJy5qcy1zbGlkZS1jb250cm9sJylcclxuICAgIC5maW5kKCcuanMtc2xpZGUtd3JhcHBlcicpXHJcbiAgICAuc2xpZGVUb2dnbGUodmlld01vZGVsLmFuaW1hdGlvblNwZWVkLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHZpZXdNb2RlbC5pc0hpZGRlbighdmlld01vZGVsLmlzSGlkZGVuKCkpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogTWFjaGVzIGZvY3VzZWQgcGFyYW1cclxuICogQHBhcmFtIGl0ZW1cclxuICovXHJcblBhcmFtc1ZpZXdNb2RlbC5wcm90b3R5cGUub25Gb2N1cyA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgc2VsZi5wYXJhbUluRm9jdXMoaXRlbSk7XHJcbn07XHJcblxyXG4vKipcclxuICogRmlsdGVycyBwYXJhbXMgYnkgZGVmaW5lZCB2YWx1ZVxyXG4gKiBAcGFyYW0gYXJyXHJcbiAqIEBwYXJhbSBrb09ic1xyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICovXHJcblBhcmFtc1ZpZXdNb2RlbC5wcm90b3R5cGUucHJlcGFyZVVybFBhaXJzID0gZnVuY3Rpb24gKGFyciwga29PYnMpIHtcclxuICBpZiAoIWFyciAmJiAha29PYnMpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBrb09icyhhcnIuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICByZXR1cm4gKGl0ZW0udmFsdWUoKSB8fCBpdGVtLmRlZmF1bHQpO1xyXG4gIH0pKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGFyYW1zVmlld01vZGVsO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvVmlld01vZGVscy9wYXJhbXNWaWV3TW9kZWwuanNcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgaGYgPSByZXF1aXJlKCcuLi9jb21wb25lbnRzL2hlbHBlckZ1bmMnKTtcclxudmFyIHNlbGY7XHJcbnZhciBiYXNlO1xyXG52YXIgY2F0ZWdvcnk7XHJcblxyXG4vKipcclxuICogTWV0aG9kcyBWaWV3LU1vZGVsXHJcbiAqIEBwYXJhbSByYXdcclxuICogQHBhcmFtIGNhdGVnb3J5XHJcbiAqIEBwYXJhbSBtZXRob2RcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqL1xyXG5mdW5jdGlvbiBNZXRob2RzVmlld01vZGVsKHJhdywgY2F0ZWdvcnksIG1ldGhvZCkge1xyXG4gIHNlbGYgPSB0aGlzO1xyXG4gIGJhc2UgPSByYXc7XHJcblxyXG4gIC8vIG9ic2VydmFibGVzXHJcbiAgdGhpcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xyXG4gIHRoaXMubWV0aG9kID0gbWV0aG9kO1xyXG4gIHRoaXMudG9nZ2xlUG9wVXAgPSBrby5vYnNlcnZhYmxlKGZhbHNlKTtcclxuICB0aGlzLnJhZGlvc01vZGVsID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICB0aGlzLnNlbGVjdE1vZGVsID0ga28ub2JzZXJ2YWJsZUFycmF5KFtdKTtcclxuICB0aGlzLnVwZGF0ZU1vZGVsKHRoaXMuY2F0ZWdvcnkoKSk7XHJcbiAgdGhpcy5jYXRlZ29yeS5zdWJzY3JpYmUodGhpcy51cGRhdGVNb2RlbCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPbiBjYXRlZ29yeSBjaGFuZ2UgaGFuZGxlclxyXG4gKiBNZXRob2RzIFZpZXctTW9kZWwgbWV0aG9kXHJcbiAqIEBwYXJhbSBjYXRlZ29yeVxyXG4gKi9cclxuTWV0aG9kc1ZpZXdNb2RlbC5wcm90b3R5cGUudXBkYXRlTW9kZWwgPSBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcclxuICAvLyBpbml0aWFsIHJhZGlvcyBtb2RlbFxyXG4gIHNlbGYudXBkYXRlUmFkaW9zTW9kZWwoYmFzZVtjYXRlZ29yeV0pO1xyXG4gIC8vIGluaXRpYWwgc2VsZWN0IG1vZGVsIChmaXJzdCBtZXRob2QgaW4gZmlyc3Qgc2VjdGlvbiBmb3Igc3RhcnQpXHJcbiAgc2VsZi51cGRhdGVTZWxlY3Qoc2VsZi5yYWRpb3NNb2RlbCgpWzBdKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBPbmNoYW5nZSBoYW5kbGVyIGZvciBSYWRpbyBidXR0b25zXHJcbiAqIEBwYXJhbSBpdGVtXHJcbiAqL1xyXG5NZXRob2RzVmlld01vZGVsLnByb3RvdHlwZS5vbmNoYW5nZVJhZGlvcyA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgLy91cGRhdGUgUmFkaW9zIE1vZGVsXHJcbiAgaGYuY2hlY2tBY3RpdmUoc2VsZi5yYWRpb3NNb2RlbCwgaXRlbS5uYW1lKTtcclxuICAvL3VwZGF0ZSBTZWxlY3QgTW9kZWxcclxuICBzZWxmLnVwZGF0ZVNlbGVjdChpdGVtKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsIGJ1aWxkIG9mIFJhZGlvcyBNb2RlbFxyXG4gKiBAcGFyYW0gcGFyYW1cclxuICogQHJldHVybnMge0FycmF5fVxyXG4gKi9cclxuTWV0aG9kc1ZpZXdNb2RlbC5wcm90b3R5cGUudXBkYXRlUmFkaW9zTW9kZWwgPSBmdW5jdGlvbiAocGFyYW0pIHtcclxuICB2YXIgb2JqID0gcGFyYW0gfHwge30sXHJcbiAgICBhcnIgPSBbXTtcclxuXHJcbiAgZm9yICh2YXIgaSBpbiBvYmopIHtcclxuICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGkpKSB7IGNvbnRpbnVlOyB9XHJcbiAgICB2YXIgaXRlbSA9IHtcclxuICAgICAgY2hlY2tlZDoga28ub2JzZXJ2YWJsZShpID09PSAnQUxMJyksXHJcbiAgICAgIG5hbWU6IGlcclxuICAgIH07XHJcblxyXG4gICAgaWYgKGkgPT09ICdBTEwnKSB7XHJcbiAgICAgIGFyci51bnNoaWZ0KGl0ZW0pXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhcnIucHVzaChpdGVtKTtcclxuICAgIH1cclxuICB9XHJcbiAgdGhpcy5yYWRpb3NNb2RlbChhcnIpO1xyXG4gIHJldHVybiBhcnI7XHJcbn07XHJcblxyXG4vKipcclxuICogSW5pdGlhbCBidWlsZCBvZiBTZWxlY3QgTW9kZWxcclxuICogQHBhcmFtIGl0ZW1cclxuICovXHJcbk1ldGhvZHNWaWV3TW9kZWwucHJvdG90eXBlLnVwZGF0ZVNlbGVjdCA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgdmFyIG9iaiA9IGJhc2Vbc2VsZi5jYXRlZ29yeSgpXVtpdGVtLm5hbWVdfHwge30sXHJcbiAgICBhcnIgPSBbXSxcclxuICAgIGNvdW50ID0gMDtcclxuXHJcbiAgZm9yICh2YXIgaSBpbiBvYmopIHtcclxuICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGkpKSB7IGNvbnRpbnVlOyB9XHJcbiAgICB2YXIgcHJvcGVydHkgPSBvYmpbaV07XHJcbiAgICBhcnIucHVzaCh7XHJcbiAgICAgIGNoZWNrZWQ6IGtvLm9ic2VydmFibGUoIWNvdW50KSxcclxuICAgICAgbmFtZTogcHJvcGVydHkubmFtZSxcclxuICAgICAgaWQ6IHByb3BlcnR5LmlkLFxyXG4gICAgICBsaW5rOiBwcm9wZXJ0eS5kb2N1bWVudGF0aW9uLFxyXG4gICAgICBhYm91dDogcHJvcGVydHkuZGVzY3JpcHRpb24sXHJcbiAgICAgIGNhdGVnb3J5OiBwcm9wZXJ0eS5jYXRlZ29yeSxcclxuICAgICAgbWV0aG9kOiBwcm9wZXJ0eS5tZXRob2RcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIC8vIHNldCBnbG9iYWwgb2JzZXJ2YWJsZVxyXG4gICAgIWNvdW50ICYmIHRoaXMubWV0aG9kKGJhc2VbcHJvcGVydHkuY2F0ZWdvcnldW3Byb3BlcnR5Lm1ldGhvZF1bcHJvcGVydHkuaWRdKTtcclxuXHJcbiAgICBjb3VudCsrO1xyXG4gIH1cclxuICBzZWxmLnNlbGVjdE1vZGVsKGFycik7XHJcbn07XHJcblxyXG5NZXRob2RzVmlld01vZGVsLnByb3RvdHlwZS5vblNlbGVjdE1ldGhvZCA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgaGYuY2hlY2tBY3RpdmUoc2VsZi5zZWxlY3RNb2RlbCwgaXRlbS5uYW1lKTtcclxuICBzZWxmLm1ldGhvZChiYXNlW2l0ZW0uY2F0ZWdvcnldW2l0ZW0ubWV0aG9kXVtpdGVtLmlkXSk7XHJcbn07XHJcblxyXG5NZXRob2RzVmlld01vZGVsLnByb3RvdHlwZS5vbkFib3V0Q2xpY2sgPSBmdW5jdGlvbiAobW9kZWwsIGV2ZW50KSB7XHJcbiAgbW9kZWwudG9nZ2xlUG9wVXAoIW1vZGVsLnRvZ2dsZVBvcFVwKCkpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNZXRob2RzVmlld01vZGVsO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zY3JpcHRzL2FwaS1leHBsb3Jlci92Mi9WaWV3TW9kZWxzL21ldGhvZHNWaWV3TW9kZWwuanNcbiAqKiBtb2R1bGUgaWQgPSA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcclxuICogQ3VzdG9tIFNlbGVjdCBjb21wb25lbnRcclxuICovXHJcbnZhciBzZWxmO1xyXG5cclxuLyoqXHJcbiAqIEN1c3RvbSBTZWxlY3QgVmlldy1Nb2RlbFxyXG4gKiBAcGFyYW0gcGFyYW1zXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKi9cclxuZnVuY3Rpb24gQ3VzdG9tU2VsZWN0KHBhcmFtcykge1xyXG4gIHNlbGYgPSB0aGlzO1xyXG5cclxuICB0aGlzLmFuaW1hdGlvblNwZWVkID0gcGFyYW1zLmFuaW1hdGlvblNwZWVkIHx8IDIwMDtcclxuXHJcbiAgLy9vYnNlcnZhYmxlc1xyXG4gIHRoaXMuc2VsZWN0TW9kZWwgPSBwYXJhbXMub3B0aW9ucyB8fCBrby5vYnNlcnZhYmxlQXJyYXkoW10pO1xyXG4gIHRoaXMucGxhY2Vob2xkZXIgPSBrby5vYnNlcnZhYmxlKHBhcmFtcy5wbGFjZWhvbGRlciB8fCAnJyk7XHJcbiAgdGhpcy5vbnNlbGVjdCA9IHBhcmFtcy5vbnNlbGVjdCB8fCBmdW5jdGlvbiAoaXRlbSkgeyBjb25zb2xlLmxvZyhpdGVtICsnc2VsZWN0ZWQhJyl9O1xyXG4gIHRoaXMuc2VsZWN0ZWQgPSBrby5vYnNlcnZhYmxlKHRoaXMuc2VsZWN0TW9kZWwoKVswXSk7XHJcbiAgdGhpcy5pc09uZU9wdGlvbiA9IGtvLnB1cmVDb21wdXRlZChmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5zZWxlY3RNb2RlbCgpLmxlbmd0aCA8IDI7IC8vIG1vcmUgdGhhbiBvbmUgb3B0aW9uXHJcbiAgfSwgdGhpcyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbmRFbGVtZW50KGV2ZW50KSB7XHJcbiAgdmFyIHBhcmVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLmpzLWN1c3RvbS1zZWxlY3QnKTtcclxuICByZXR1cm4ge1xyXG4gICAgd3JhcHBlcjogcGFyZW50LmZpbmQoJy5qcy1jdXN0b20tc2VsZWN0LXdyYXBwZXInKSxcclxuICAgIGxheWVyOiBwYXJlbnQuZmluZCgnLmpzLWN1c3RvbS1zZWxlY3QtbGF5ZXInKVxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEN1c3RvbSBTZWxlY3QgVmlldy1Nb2RlbCBtZXRob2RcclxuICogQHBhcmFtIHZpZXdNb2RlbFxyXG4gKiBAcGFyYW0gZXZlbnRcclxuICovXHJcbkN1c3RvbVNlbGVjdC5wcm90b3R5cGUuc2xpZGVUb2dnbGUgPSBmdW5jdGlvbih2aWV3TW9kZWwsIGV2ZW50KSB7XHJcbiAgaWYgKHZpZXdNb2RlbC5pc09uZU9wdGlvbigpKSB7cmV0dXJuIGZhbHNlO31cclxuICB2YXIgZWwgPSBmaW5kRWxlbWVudChldmVudCk7XHJcbiAgICBlbC53cmFwcGVyLnNsaWRlVG9nZ2xlKHZpZXdNb2RlbC5hbmltYXRpb25TcGVlZCk7XHJcbiAgICBlbC5sYXllci50b2dnbGVDbGFzcygnaGlkZGVuJyk7XHJcbn07XHJcblxyXG4vKipcclxuICogQ3VzdG9tIFNlbGVjdCBWaWV3LU1vZGVsIG1ldGhvZFxyXG4gKiBAcGFyYW0gaXRlbVxyXG4gKiBAcGFyYW0gZXZlbnRcclxuICovXHJcbkN1c3RvbVNlbGVjdC5wcm90b3R5cGUuc2VsZWN0SXRlbSA9IGZ1bmN0aW9uIChpdGVtLCBldmVudCkge1xyXG4gIHZhciBzZWxmID0gdGhpcztcclxuICB0aGlzLnNlbGVjdGVkKGl0ZW0pO1xyXG4gIC8vIHJ1biBoYW5kbGVyXHJcbiAgdGhpcy5vbnNlbGVjdChpdGVtKTtcclxuICAvLyBzbGlkZSB1cFxyXG4gIHRoaXMuc2xpZGVUb2dnbGUoc2VsZiwgZXZlbnQpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBrby5jb21wb25lbnRzLnJlZ2lzdGVyKCdjdXN0b20tc2VsZWN0Jywge1xyXG4gIHZpZXdNb2RlbDogQ3VzdG9tU2VsZWN0LFxyXG4gIHRlbXBsYXRlOiAoW1xyXG4gICAgJzxkaXYgY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3QganMtY3VzdG9tLXNlbGVjdFwiPicsXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiYXBpLWV4cC1jdXN0b20tc2VsZWN0LXdyYXBwZXJcIj4nLFxyXG4gICAgICAgICc8c2VsZWN0IGRhdGEtYmluZD1cIm9wdGlvbnM6IHNlbGVjdE1vZGVsLCBvcHRpb25zVGV4dDogXFwnbmFtZVxcJywgdmFsdWU6IHNlbGVjdGVkXCIgY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3RfX2ZpZWxkXCIgbmFtZT1cImFwaS1leHAtbWV0aG9kXCI+PC9zZWxlY3Q+JyxcclxuICAgICAgICAnPHNwYW4gY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3RfX3BsYWNlaG9sZGVyXCI+JyxcclxuICAgICAgICAgICc8aW5wdXQgZGF0YS1iaW5kPVwiZXZlbnQ6IHtjbGljazogc2xpZGVUb2dnbGV9LCBhdHRyOiB7dmFsdWU6IHNlbGVjdGVkKCkubmFtZSwgZGlzYWJsZWQ6IGlzT25lT3B0aW9ufVwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCJcIiByZWFkb25seT1cIlwiPicsXHJcbiAgICAgICAgICAnPGIgZGF0YS1iaW5kPVwiY3NzOiB7aGlkZGVuOiBpc09uZU9wdGlvbn1cIiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdF9fY2hldnJvblwiPiZuYnNwOzwvYj4nLFxyXG4gICAgICAgICc8L3NwYW4+JyxcclxuICAgICAgICAnPHVsIGRhdGEtYmluZD1cImZvcmVhY2g6IHNlbGVjdE1vZGVsXCIgY2xhc3M9XCJhcGktZXhwLWN1c3RvbS1zZWxlY3RfX2xpc3QganMtY3VzdG9tLXNlbGVjdC13cmFwcGVyXCI+JyxcclxuICAgICAgICAgICc8bGkgZGF0YS1iaW5kPVwiY3NzOiB7XFwnYWN0aXZlXFwnOiBjaGVja2VkfVwiIGNsYXNzPVwiYXBpLWV4cC1jdXN0b20tc2VsZWN0X19pdGVtXCI+JyxcclxuICAgICAgICAgICAgJzxidXR0b24gZGF0YS1iaW5kPVwiZXZlbnQ6IHtjbGljazogJHBhcmVudC5zZWxlY3RJdGVtLmJpbmQoJHBhcmVudCl9LCB0ZXh0OiBuYW1lLCBjc3M6IHtcXCdhY3RpdmVcXCc6IGNoZWNrZWQoKX0sIGF0dHI6IHtcXCdkYXRhLXZhbHVlXFwnOiBuYW1lfVwiICBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdF9faXRlbS1sYWJlbFwiIGhyZWY9XCIjXCI+PC9idXR0b24+JyxcclxuICAgICAgICAgICAgJzxhIGRhdGEtYmluZD1cImF0dHI6IHtocmVmOiBsaW5rfSwgY3NzOiB7XFwnaGlkZGVuXFwnOiAhbGlua31cIiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdF9faXRlbS1saW5rXCIgdGFyZ2V0PVwiX2JsYW5rXCI+Jm5ic3A7PC9hPicsXHJcbiAgICAgICAgICAnPC9saT4nLFxyXG4gICAgICAgICc8L3VsPicsXHJcbiAgICAgICc8L2Rpdj4nLFxyXG4gICAgICAnPGRpdiBkYXRhLWJpbmQ9XCJjbGljazogc2xpZGVUb2dnbGVcIiBjbGFzcz1cImFwaS1leHAtY3VzdG9tLXNlbGVjdC1sYXllciBqcy1jdXN0b20tc2VsZWN0LWxheWVyIGhpZGRlblwiPjwvZGl2PicsXHJcbiAgICAnPC9kaXY+J1xyXG4gIF0pLmpvaW4oJycpXHJcbn0pO1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc2NyaXB0cy9hcGktZXhwbG9yZXIvdjIvY29tcG9uZW50cy9jdXN0b21TZWxlY3QuanNcbiAqKiBtb2R1bGUgaWQgPSA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9